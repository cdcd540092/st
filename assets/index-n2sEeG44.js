var If=Object.defineProperty;var kf=(l,i,a)=>i in l?If(l,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[i]=a;var et=(l,i,a)=>kf(l,typeof i!="symbol"?i+"":i,a);import{r as ga,g as wl,a as Tf}from"./vendor-react-CRB3T2We.js";import{R as Zu,O as Vu,P as Nf,S as ml,a as Vo,V as zf,b as Lf,B as Of,N as Af,A as Ff,W as Qu,C as jf,c as Xe,d as Yu,e as Df,f as Uf,M as Bf,L as Qo,T as Xn,g as wr,U as vl,h as gl,i as Hf,j as Xu,k as ya,I as Gf,l as ti,D as qu,m as Ku,H as At,F as sn,n as vr,o as Qt,p as Wf,q as Zt,r as Zf,s as wa,t as Vf,u as Qf,v as Yf,w as Nn,x as Ju,y as yl,z as Xf,E as da,G as qf,J as Kf,K as Jf,Q as bf,X as $f,Y as ed,Z as td,_ as uu,$ as nd,a0 as pl,a1 as rd,a2 as id,a3 as ld,a4 as od,a5 as ad,a6 as Jr,a7 as sd,a8 as ud,a9 as cd}from"./vendor-three-Bf9Xd_Ux.js";import{X as fd,k as dd}from"./vendor-mediapipe-BJf9tSCR.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))c(f);new MutationObserver(f=>{for(const m of f)if(m.type==="childList")for(const d of m.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function a(f){const m={};return f.integrity&&(m.integrity=f.integrity),f.referrerPolicy&&(m.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?m.credentials="include":f.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function c(f){if(f.ep)return;f.ep=!0;const m=a(f);fetch(f.href,m)}})();var Yo={exports:{}},Vr={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cu;function pd(){if(cu)return Vr;cu=1;var l=ga(),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,f=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function d(w,g,x){var p,v={},S=null,I=null;x!==void 0&&(S=""+x),g.key!==void 0&&(S=""+g.key),g.ref!==void 0&&(I=g.ref);for(p in g)c.call(g,p)&&!m.hasOwnProperty(p)&&(v[p]=g[p]);if(w&&w.defaultProps)for(p in g=w.defaultProps,g)v[p]===void 0&&(v[p]=g[p]);return{$$typeof:i,type:w,key:S,ref:I,props:v,_owner:f.current}}return Vr.Fragment=a,Vr.jsx=d,Vr.jsxs=d,Vr}var fu;function hd(){return fu||(fu=1,Yo.exports=pd()),Yo.exports}var T=hd(),P=ga();const bu=wl(P);var al={},du;function md(){if(du)return al;du=1;var l=Tf();return al.createRoot=l.createRoot,al.hydrateRoot=l.hydrateRoot,al}var vd=md();const gd=wl(vd);var Xo={exports:{}},Pn={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pu;function yd(){return pu||(pu=1,Pn.ConcurrentRoot=1,Pn.ContinuousEventPriority=4,Pn.DefaultEventPriority=16,Pn.DiscreteEventPriority=1,Pn.IdleEventPriority=536870912,Pn.LegacyRoot=0),Pn}var hu;function wd(){return hu||(hu=1,Xo.exports=yd()),Xo.exports}var gr=wd();function Sd(l){let i;const a=new Set,c=(x,p)=>{const v=typeof x=="function"?x(i):x;if(v!==i){const S=i;i=p?v:Object.assign({},i,v),a.forEach(I=>I(i,S))}},f=()=>i,m=(x,p=f,v=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let S=p(i);function I(){const C=p(i);if(!v(S,C)){const O=S;x(S=C,O)}}return a.add(I),()=>a.delete(I)},g={setState:c,getState:f,subscribe:(x,p,v)=>p||v?m(x,p,v):(a.add(x),()=>a.delete(x)),destroy:()=>a.clear()};return i=l(c,f,g),g}const xd=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),mu=xd?P.useEffect:P.useLayoutEffect;function $u(l){const i=typeof l=="function"?Sd(l):l,a=(c=i.getState,f=Object.is)=>{const[,m]=P.useReducer(k=>k+1,0),d=i.getState(),w=P.useRef(d),g=P.useRef(c),x=P.useRef(f),p=P.useRef(!1),v=P.useRef();v.current===void 0&&(v.current=c(d));let S,I=!1;(w.current!==d||g.current!==c||x.current!==f||p.current)&&(S=c(d),I=!f(v.current,S)),mu(()=>{I&&(v.current=S),w.current=d,g.current=c,x.current=f,p.current=!1});const C=P.useRef(d);mu(()=>{const k=()=>{try{const z=i.getState(),H=g.current(z);x.current(v.current,H)||(w.current=z,v.current=H,m())}catch{p.current=!0,m()}},E=i.subscribe(k);return i.getState()!==C.current&&k(),E},[]);const O=I?S:v.current;return P.useDebugValue(O),O};return Object.assign(a,i),a[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const c=[a,i];return{next(){const f=c.length<=0;return{value:c.shift(),done:f}}}},a}const _d=l=>typeof l=="object"&&typeof l.then=="function",qn=[];function ec(l,i,a=(c,f)=>c===f){if(l===i)return!0;if(!l||!i)return!1;const c=l.length;if(i.length!==c)return!1;for(let f=0;f<c;f++)if(!a(l[f],i[f]))return!1;return!0}function tc(l,i=null,a=!1,c={}){i===null&&(i=[l]);for(const m of qn)if(ec(i,m.keys,m.equal)){if(a)return;if(Object.prototype.hasOwnProperty.call(m,"error"))throw m.error;if(Object.prototype.hasOwnProperty.call(m,"response"))return c.lifespan&&c.lifespan>0&&(m.timeout&&clearTimeout(m.timeout),m.timeout=setTimeout(m.remove,c.lifespan)),m.response;if(!a)throw m.promise}const f={keys:i,equal:c.equal,remove:()=>{const m=qn.indexOf(f);m!==-1&&qn.splice(m,1)},promise:(_d(l)?l:l(...i)).then(m=>{f.response=m,c.lifespan&&c.lifespan>0&&(f.timeout=setTimeout(f.remove,c.lifespan))}).catch(m=>f.error=m)};if(qn.push(f),!a)throw f.promise}const Ed=(l,i,a)=>tc(l,i,!1,a),Md=(l,i,a)=>void tc(l,i,!0,a),Rd=l=>{if(l===void 0||l.length===0)qn.splice(0,qn.length);else{const i=qn.find(a=>ec(l,a.keys,a.equal));i&&i.remove()}};var qo={exports:{}},Ko={exports:{}},Jo={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vu;function Cd(){return vu||(vu=1,(function(l){function i(V,ae){var Y=V.length;V.push(ae);e:for(;0<Y;){var pe=Y-1>>>1,me=V[pe];if(0<f(me,ae))V[pe]=ae,V[Y]=me,Y=pe;else break e}}function a(V){return V.length===0?null:V[0]}function c(V){if(V.length===0)return null;var ae=V[0],Y=V.pop();if(Y!==ae){V[0]=Y;e:for(var pe=0,me=V.length,we=me>>>1;pe<we;){var Ve=2*(pe+1)-1,tt=V[Ve],Ie=Ve+1,st=V[Ie];if(0>f(tt,Y))Ie<me&&0>f(st,tt)?(V[pe]=st,V[Ie]=Y,pe=Ie):(V[pe]=tt,V[Ve]=Y,pe=Ve);else if(Ie<me&&0>f(st,Y))V[pe]=st,V[Ie]=Y,pe=Ie;else break e}}return ae}function f(V,ae){var Y=V.sortIndex-ae.sortIndex;return Y!==0?Y:V.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;l.unstable_now=function(){return m.now()}}else{var d=Date,w=d.now();l.unstable_now=function(){return d.now()-w}}var g=[],x=[],p=1,v=null,S=3,I=!1,C=!1,O=!1,k=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(V){for(var ae=a(x);ae!==null;){if(ae.callback===null)c(x);else if(ae.startTime<=V)c(x),ae.sortIndex=ae.expirationTime,i(g,ae);else break;ae=a(x)}}function ne(V){if(O=!1,H(V),!C)if(a(g)!==null)C=!0,ie(W);else{var ae=a(x);ae!==null&&Se(ne,ae.startTime-V)}}function W(V,ae){C=!1,O&&(O=!1,E(U),U=-1),I=!0;var Y=S;try{for(H(ae),v=a(g);v!==null&&(!(v.expirationTime>ae)||V&&!B());){var pe=v.callback;if(typeof pe=="function"){v.callback=null,S=v.priorityLevel;var me=pe(v.expirationTime<=ae);ae=l.unstable_now(),typeof me=="function"?v.callback=me:v===a(g)&&c(g),H(ae)}else c(g);v=a(g)}if(v!==null)var we=!0;else{var Ve=a(x);Ve!==null&&Se(ne,Ve.startTime-ae),we=!1}return we}finally{v=null,S=Y,I=!1}}var Q=!1,X=null,U=-1,G=5,J=-1;function B(){return!(l.unstable_now()-J<G)}function re(){if(X!==null){var V=l.unstable_now();J=V;var ae=!0;try{ae=X(!0,V)}finally{ae?ce():(Q=!1,X=null)}}else Q=!1}var ce;if(typeof z=="function")ce=function(){z(re)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,xe=fe.port2;fe.port1.onmessage=re,ce=function(){xe.postMessage(null)}}else ce=function(){k(re,0)};function ie(V){X=V,Q||(Q=!0,ce())}function Se(V,ae){U=k(function(){V(l.unstable_now())},ae)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(V){V.callback=null},l.unstable_continueExecution=function(){C||I||(C=!0,ie(W))},l.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<V?Math.floor(1e3/V):5},l.unstable_getCurrentPriorityLevel=function(){return S},l.unstable_getFirstCallbackNode=function(){return a(g)},l.unstable_next=function(V){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var Y=S;S=ae;try{return V()}finally{S=Y}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(V,ae){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Y=S;S=V;try{return ae()}finally{S=Y}},l.unstable_scheduleCallback=function(V,ae,Y){var pe=l.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?pe+Y:pe):Y=pe,V){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=Y+me,V={id:p++,callback:ae,priorityLevel:V,startTime:Y,expirationTime:me,sortIndex:-1},Y>pe?(V.sortIndex=Y,i(x,V),a(g)===null&&V===a(x)&&(O?(E(U),U=-1):O=!0,Se(ne,Y-pe))):(V.sortIndex=me,i(g,V),C||I||(C=!0,ie(W))),V},l.unstable_shouldYield=B,l.unstable_wrapCallback=function(V){var ae=S;return function(){var Y=S;S=ae;try{return V.apply(this,arguments)}finally{S=Y}}}})(Jo)),Jo}var gu;function nc(){return gu||(gu=1,Ko.exports=Cd()),Ko.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bo,yu;function Pd(){return yu||(yu=1,bo=function(i){var a={},c=ga(),f=nc(),m=Object.assign;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,g=Symbol.for("react.element"),x=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),C=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),ne=Symbol.for("react.offscreen"),W=Symbol.iterator;function Q(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}function X(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case p:return"Fragment";case x:return"Portal";case S:return"Profiler";case v:return"StrictMode";case k:return"Suspense";case E:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case O:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case z:return t=e.displayName||null,t!==null?t:X(e.type)||"Memo";case H:t=e._payload,e=e._init;try{return X(e(t))}catch{}}return null}function U(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return X(t);case 8:return t===v?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function G(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function J(e){if(G(e)!==e)throw Error(d(188))}function B(e){var t=e.alternate;if(!t){if(t=G(e),t===null)throw Error(d(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return J(o),e;if(s===r)return J(o),t;s=s.sibling}throw Error(d(188))}if(n.return!==r.return)n=o,r=s;else{for(var y=!1,M=o.child;M;){if(M===n){y=!0,n=o,r=s;break}if(M===r){y=!0,r=o,n=s;break}M=M.sibling}if(!y){for(M=s.child;M;){if(M===n){y=!0,n=s,r=o;break}if(M===r){y=!0,r=s,n=o;break}M=M.sibling}if(!y)throw Error(d(189))}}if(n.alternate!==r)throw Error(d(190))}if(n.tag!==3)throw Error(d(188));return n.stateNode.current===n?e:t}function re(e){return e=B(e),e!==null?ce(e):null}function ce(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ce(e);if(t!==null)return t;e=e.sibling}return null}function fe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){if(e.tag!==4){var t=fe(e);if(t!==null)return t}e=e.sibling}return null}var xe=Array.isArray,ie=i.getPublicInstance,Se=i.getRootHostContext,V=i.getChildHostContext,ae=i.prepareForCommit,Y=i.resetAfterCommit,pe=i.createInstance,me=i.appendInitialChild,we=i.finalizeInitialChildren,Ve=i.prepareUpdate,tt=i.shouldSetTextContent,Ie=i.createTextInstance,st=i.scheduleTimeout,Yt=i.cancelTimeout,Er=i.noTimeout,bn=i.isPrimaryRenderer,Pt=i.supportsMutation,$n=i.supportsPersistence,vt=i.supportsHydration,ii=i.getInstanceFromNode,li=i.preparePortalMount,xl=i.getCurrentEventPriority,_l=i.detachDeletedInstance,El=i.supportsMicrotasks,Ml=i.scheduleMicrotask,Ln=i.supportsTestSelectors,Rl=i.findFiberRoot,Cl=i.getBoundingRect,oi=i.getTextContent,On=i.isHiddenSubtree,Mr=i.matchAccessibilityRole,Pl=i.setFocusIfFocusable,Il=i.setupIntersectionObserver,ai=i.appendChild,er=i.appendChildToContainer,kl=i.commitTextUpdate,Tl=i.commitMount,Nl=i.commitUpdate,An=i.insertBefore,gt=i.insertInContainerBefore,si=i.removeChild,yn=i.removeChildFromContainer,Et=i.resetTextContent,ut=i.hideInstance,zl=i.hideTextInstance,se=i.unhideInstance,Fn=i.unhideTextInstance,Ll=i.clearContainer,Ol=i.cloneInstance,ui=i.createContainerChildSet,ci=i.appendChildToContainerChildSet,Al=i.finalizeContainerChildren,fi=i.replaceContainerChildren,di=i.cloneHiddenInstance,pi=i.cloneHiddenTextInstance,Fl=i.canHydrateInstance,jl=i.canHydrateTextInstance,Dl=i.canHydrateSuspenseInstance,jn=i.isSuspenseInstancePending,Rr=i.isSuspenseInstanceFallback,Dn=i.registerSuspenseInstanceRetry,Xt=i.getNextHydratableSibling,ze=i.getFirstHydratableChild,hi=i.getFirstHydratableChildWithinContainer,Ul=i.getFirstHydratableChildWithinSuspenseInstance,u=i.hydrateInstance,h=i.hydrateTextInstance,_=i.hydrateSuspenseInstance,L=i.getNextHydratableInstanceAfterSuspenseInstance,F=i.commitHydratedContainer,j=i.commitHydratedSuspenseInstance,q=i.clearSuspenseBoundary,Z=i.clearSuspenseBoundaryFromContainer,ee=i.shouldDeleteUnhydratedTailInstances,$=i.didNotMatchHydratedContainerTextInstance,te=i.didNotMatchHydratedTextInstance,b;function He(e){if(b===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);b=t&&t[1]||""}return`
`+b+e}var de=!1;function ve(e,t){if(!e||de)return"";de=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(K){var r=K}Reflect.construct(e,[],t)}else{try{t.call()}catch(K){r=K}e.call(t.prototype)}else{try{throw Error()}catch(K){r=K}e()}}catch(K){if(K&&r&&typeof K.stack=="string"){for(var o=K.stack.split(`
`),s=r.stack.split(`
`),y=o.length-1,M=s.length-1;1<=y&&0<=M&&o[y]!==s[M];)M--;for(;1<=y&&0<=M;y--,M--)if(o[y]!==s[M]){if(y!==1||M!==1)do if(y--,M--,0>M||o[y]!==s[M]){var D=`
`+o[y].replace(" at new "," at ");return e.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",e.displayName)),D}while(1<=y&&0<=M);break}}}finally{de=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?He(e):""}var Ee=Object.prototype.hasOwnProperty,Ce=[],Ae=-1;function Le(e){return{current:e}}function _e(e){0>Ae||(e.current=Ce[Ae],Ce[Ae]=null,Ae--)}function Pe(e,t){Ae++,Ce[Ae]=e.current,e.current=t}var Oe={},We=Le(Oe),ke=Le(!1),Qe=Oe;function yt(e,t){var n=e.type.contextTypes;if(!n)return Oe;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in n)o[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function rt(e){return e=e.childContextTypes,e!=null}function pt(){_e(ke),_e(We)}function Be(e,t,n){if(We.current!==Oe)throw Error(d(168));Pe(We,t),Pe(ke,n)}function ot(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(d(108,U(e)||"Unknown",o));return m({},n,r)}function Ge(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Oe,Qe=We.current,Pe(We,e),Pe(ke,ke.current),!0}function Fe(e,t,n){var r=e.stateNode;if(!r)throw Error(d(169));n?(e=ot(e,t,Qe),r.__reactInternalMemoizedMergedChildContext=e,_e(ke),_e(We),Pe(We,e)):_e(ke),Pe(ke,n)}var Ke=Math.clz32?Math.clz32:bt,cn=Math.log,Mt=Math.LN2;function bt(e){return e>>>=0,e===0?32:31-(cn(e)/Mt|0)|0}var mi=64,vi=4194304;function Cr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gi(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,s=e.pingedLanes,y=n&268435455;if(y!==0){var M=y&~o;M!==0?r=Cr(M):(s&=y,s!==0&&(r=Cr(s)))}else y=n&~o,y!==0?r=Cr(y):s!==0&&(r=Cr(s));if(r===0)return 0;if(t!==0&&t!==r&&(t&o)===0&&(o=r&-r,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ke(t),o=1<<n,r|=e[n],t&=~o;return r}function Uc(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bc(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var y=31-Ke(s),M=1<<y,D=o[y];D===-1?((M&n)===0||(M&r)!==0)&&(o[y]=Uc(M,t)):D<=t&&(e.expiredLanes|=M),s&=~M}}function Bl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Hl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pr(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ke(t),e[t]=n}function Hc(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Ke(n),s=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~s}}function Gl(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ke(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var je=0;function za(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Wl=f.unstable_scheduleCallback,La=f.unstable_cancelCallback,Gc=f.unstable_shouldYield,Wc=f.unstable_requestPaint,ct=f.unstable_now,Zl=f.unstable_ImmediatePriority,Zc=f.unstable_UserBlockingPriority,Vl=f.unstable_NormalPriority,Vc=f.unstable_IdlePriority,yi=null,$t=null;function Qc(e){if($t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(yi,e,void 0,(e.current.flags&128)===128)}catch{}}function Yc(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var en=typeof Object.is=="function"?Object.is:Yc,fn=null,wi=!1,Ql=!1;function Oa(e){fn===null?fn=[e]:fn.push(e)}function Xc(e){wi=!0,Oa(e)}function tn(){if(!Ql&&fn!==null){Ql=!0;var e=0,t=je;try{var n=fn;for(je=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}fn=null,wi=!1}catch(o){throw fn!==null&&(fn=fn.slice(e+1)),Wl(Zl,tn),o}finally{je=t,Ql=!1}}return null}var qc=w.ReactCurrentBatchConfig;function Si(e,t){if(en(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Ee.call(t,o)||!en(e[o],t[o]))return!1}return!0}function Kc(e){switch(e.tag){case 5:return He(e.type);case 16:return He("Lazy");case 13:return He("Suspense");case 19:return He("SuspenseList");case 0:case 2:case 15:return e=ve(e.type,!1),e;case 11:return e=ve(e.type.render,!1),e;case 1:return e=ve(e.type,!0),e;default:return""}}function qt(e,t){if(e&&e.defaultProps){t=m({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var xi=Le(null),_i=null,tr=null,Yl=null;function Xl(){Yl=tr=_i=null}function Aa(e,t,n){bn?(Pe(xi,t._currentValue),t._currentValue=n):(Pe(xi,t._currentValue2),t._currentValue2=n)}function ql(e){var t=xi.current;_e(xi),bn?e._currentValue=t:e._currentValue2=t}function Kl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function nr(e,t){_i=e,Yl=tr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Lt=!0),e.firstContext=null)}function Ft(e){var t=bn?e._currentValue:e._currentValue2;if(Yl!==e)if(e={context:e,memoizedValue:t,next:null},tr===null){if(_i===null)throw Error(d(308));tr=e,_i.dependencies={lanes:0,firstContext:e}}else tr=tr.next=e;return t}var nn=null,wn=!1;function Jl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function dn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Sn(e,t){var n=e.updateQueue;n!==null&&(n=n.shared,it!==null&&(e.mode&1)!==0&&(Ne&2)===0?(e=n.interleaved,e===null?(t.next=t,nn===null?nn=[n]:nn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(e=n.pending,e===null?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function Ei(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Gl(e,n)}}function ja(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var y={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?o=s=y:s=s.next=y,n=n.next}while(n!==null);s===null?o=s=t:s=s.next=t}else o=s=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Mi(e,t,n,r){var o=e.updateQueue;wn=!1;var s=o.firstBaseUpdate,y=o.lastBaseUpdate,M=o.shared.pending;if(M!==null){o.shared.pending=null;var D=M,K=D.next;D.next=null,y===null?s=K:y.next=K,y=D;var ue=e.alternate;ue!==null&&(ue=ue.updateQueue,M=ue.lastBaseUpdate,M!==y&&(M===null?ue.firstBaseUpdate=K:M.next=K,ue.lastBaseUpdate=D))}if(s!==null){var Me=o.baseState;y=0,ue=K=D=null,M=s;do{var ye=M.lane,Ze=M.eventTime;if((r&ye)===ye){ue!==null&&(ue=ue.next={eventTime:Ze,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var ge=e,_t=M;switch(ye=t,Ze=n,_t.tag){case 1:if(ge=_t.payload,typeof ge=="function"){Me=ge.call(Ze,Me,ye);break e}Me=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=_t.payload,ye=typeof ge=="function"?ge.call(Ze,Me,ye):ge,ye==null)break e;Me=m({},Me,ye);break e;case 2:wn=!0}}M.callback!==null&&M.lane!==0&&(e.flags|=64,ye=o.effects,ye===null?o.effects=[M]:ye.push(M))}else Ze={eventTime:Ze,lane:ye,tag:M.tag,payload:M.payload,callback:M.callback,next:null},ue===null?(K=ue=Ze,D=Me):ue=ue.next=Ze,y|=ye;if(M=M.next,M===null){if(M=o.shared.pending,M===null)break;ye=M,M=ye.next,ye.next=null,o.lastBaseUpdate=ye,o.shared.pending=null}}while(!0);if(ue===null&&(D=Me),o.baseState=D,o.firstBaseUpdate=K,o.lastBaseUpdate=ue,t=o.shared.interleaved,t!==null){o=t;do y|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);fr|=y,e.lanes=y,e.memoizedState=Me}}function Da(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(d(191,o));o.call(r)}}}var Ua=new c.Component().refs;function bl(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:m({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ri={isMounted:function(e){return(e=e._reactInternals)?G(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ct(),o=En(e),s=dn(r,o);s.payload=t,n!=null&&(s.callback=n),Sn(e,s),t=Ht(e,o,r),t!==null&&Ei(t,e,o)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ct(),o=En(e),s=dn(r,o);s.tag=1,s.payload=t,n!=null&&(s.callback=n),Sn(e,s),t=Ht(e,o,r),t!==null&&Ei(t,e,o)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ct(),r=En(e),o=dn(n,r);o.tag=2,t!=null&&(o.callback=t),Sn(e,o),t=Ht(e,r,n),t!==null&&Ei(t,e,r)}};function Ba(e,t,n,r,o,s,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,y):t.prototype&&t.prototype.isPureReactComponent?!Si(n,r)||!Si(o,s):!0}function Ha(e,t,n){var r=!1,o=Oe,s=t.contextType;return typeof s=="object"&&s!==null?s=Ft(s):(o=rt(t)?Qe:We.current,r=t.contextTypes,s=(r=r!=null)?yt(e,o):Oe),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ri,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ga(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ri.enqueueReplaceState(t,t.state,null)}function $l(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs=Ua,Jl(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=Ft(s):(s=rt(t)?Qe:We.current,o.context=yt(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(bl(e,t,s,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Ri.enqueueReplaceState(o,o.state,null),Mi(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}var rr=[],ir=0,Ci=null,Pi=0,jt=[],Dt=0,Un=null,pn=1,hn="";function Bn(e,t){rr[ir++]=Pi,rr[ir++]=Ci,Ci=e,Pi=t}function Wa(e,t,n){jt[Dt++]=pn,jt[Dt++]=hn,jt[Dt++]=Un,Un=e;var r=pn;e=hn;var o=32-Ke(r)-1;r&=~(1<<o),n+=1;var s=32-Ke(t)+o;if(30<s){var y=o-o%5;s=(r&(1<<y)-1).toString(32),r>>=y,o-=y,pn=1<<32-Ke(t)+o|n<<o|r,hn=s+e}else pn=1<<s|n<<o|r,hn=e}function eo(e){e.return!==null&&(Bn(e,1),Wa(e,1,0))}function to(e){for(;e===Ci;)Ci=rr[--ir],rr[ir]=null,Pi=rr[--ir],rr[ir]=null;for(;e===Un;)Un=jt[--Dt],jt[Dt]=null,hn=jt[--Dt],jt[Dt]=null,pn=jt[--Dt],jt[Dt]=null}var Nt=null,zt=null,Je=!1,Ir=!1,Kt=null;function Za(e,t){var n=Gt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Va(e,t){switch(e.tag){case 5:return t=Fl(t,e.type,e.pendingProps),t!==null?(e.stateNode=t,Nt=e,zt=ze(t),!0):!1;case 6:return t=jl(t,e.pendingProps),t!==null?(e.stateNode=t,Nt=e,zt=null,!0):!1;case 13:if(t=Dl(t),t!==null){var n=Un!==null?{id:pn,overflow:hn}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Gt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Nt=e,zt=null,!0}return!1;default:return!1}}function no(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ro(e){if(Je){var t=zt;if(t){var n=t;if(!Va(e,t)){if(no(e))throw Error(d(418));t=Xt(n);var r=Nt;t&&Va(e,t)?Za(r,n):(e.flags=e.flags&-4097|2,Je=!1,Nt=e)}}else{if(no(e))throw Error(d(418));e.flags=e.flags&-4097|2,Je=!1,Nt=e}}}function Qa(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Nt=e}function kr(e){if(!vt||e!==Nt)return!1;if(!Je)return Qa(e),Je=!0,!1;if(e.tag!==3&&(e.tag!==5||ee(e.type)&&!tt(e.type,e.memoizedProps))){var t=zt;if(t){if(no(e)){for(e=zt;e;)e=Xt(e);throw Error(d(418))}for(;t;)Za(e,t),t=Xt(t)}}if(Qa(e),e.tag===13){if(!vt)throw Error(d(316));if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));zt=L(e)}else zt=Nt?Xt(e.stateNode):null;return!0}function lr(){vt&&(zt=Nt=null,Ir=Je=!1)}function io(e){Kt===null?Kt=[e]:Kt.push(e)}function Tr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(d(309));var r=n.stateNode}if(!r)throw Error(d(147,e));var o=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(y){var M=o.refs;M===Ua&&(M=o.refs={}),y===null?delete M[s]:M[s]=y},t._stringRef=s,t)}if(typeof e!="string")throw Error(d(284));if(!n._owner)throw Error(d(290,e))}return e}function Ii(e,t){throw e=Object.prototype.toString.call(t),Error(d(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ya(e){var t=e._init;return t(e._payload)}function Xa(e){function t(N,R){if(e){var A=N.deletions;A===null?(N.deletions=[R],N.flags|=16):A.push(R)}}function n(N,R){if(!e)return null;for(;R!==null;)t(N,R),R=R.sibling;return null}function r(N,R){for(N=new Map;R!==null;)R.key!==null?N.set(R.key,R):N.set(R.index,R),R=R.sibling;return N}function o(N,R){return N=Rn(N,R),N.index=0,N.sibling=null,N}function s(N,R,A){return N.index=A,e?(A=N.alternate,A!==null?(A=A.index,A<R?(N.flags|=2,R):A):(N.flags|=2,R)):(N.flags|=1048576,R)}function y(N){return e&&N.alternate===null&&(N.flags|=2),N}function M(N,R,A,oe){return R===null||R.tag!==6?(R=Go(A,N.mode,oe),R.return=N,R):(R=o(R,A),R.return=N,R)}function D(N,R,A,oe){var he=A.type;return he===p?ue(N,R,A.props.children,oe,A.key):R!==null&&(R.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===H&&Ya(he)===R.type)?(oe=o(R,A.props),oe.ref=Tr(N,R,A),oe.return=N,oe):(oe=ll(A.type,A.key,A.props,null,N.mode,oe),oe.ref=Tr(N,R,A),oe.return=N,oe)}function K(N,R,A,oe){return R===null||R.tag!==4||R.stateNode.containerInfo!==A.containerInfo||R.stateNode.implementation!==A.implementation?(R=Wo(A,N.mode,oe),R.return=N,R):(R=o(R,A.children||[]),R.return=N,R)}function ue(N,R,A,oe,he){return R===null||R.tag!==7?(R=Yn(A,N.mode,oe,he),R.return=N,R):(R=o(R,A),R.return=N,R)}function Me(N,R,A){if(typeof R=="string"&&R!==""||typeof R=="number")return R=Go(""+R,N.mode,A),R.return=N,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case g:return A=ll(R.type,R.key,R.props,null,N.mode,A),A.ref=Tr(N,null,R),A.return=N,A;case x:return R=Wo(R,N.mode,A),R.return=N,R;case H:var oe=R._init;return Me(N,oe(R._payload),A)}if(xe(R)||Q(R))return R=Yn(R,N.mode,A,null),R.return=N,R;Ii(N,R)}return null}function ye(N,R,A,oe){var he=R!==null?R.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return he!==null?null:M(N,R,""+A,oe);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case g:return A.key===he?D(N,R,A,oe):null;case x:return A.key===he?K(N,R,A,oe):null;case H:return he=A._init,ye(N,R,he(A._payload),oe)}if(xe(A)||Q(A))return he!==null?null:ue(N,R,A,oe,null);Ii(N,A)}return null}function Ze(N,R,A,oe,he){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return N=N.get(A)||null,M(R,N,""+oe,he);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case g:return N=N.get(oe.key===null?A:oe.key)||null,D(R,N,oe,he);case x:return N=N.get(oe.key===null?A:oe.key)||null,K(R,N,oe,he);case H:var Te=oe._init;return Ze(N,R,A,Te(oe._payload),he)}if(xe(oe)||Q(oe))return N=N.get(A)||null,ue(R,N,oe,he,null);Ii(R,oe)}return null}function ge(N,R,A,oe){for(var he=null,Te=null,Re=R,De=R=0,dt=null;Re!==null&&De<A.length;De++){Re.index>De?(dt=Re,Re=null):dt=Re.sibling;var Ue=ye(N,Re,A[De],oe);if(Ue===null){Re===null&&(Re=dt);break}e&&Re&&Ue.alternate===null&&t(N,Re),R=s(Ue,R,De),Te===null?he=Ue:Te.sibling=Ue,Te=Ue,Re=dt}if(De===A.length)return n(N,Re),Je&&Bn(N,De),he;if(Re===null){for(;De<A.length;De++)Re=Me(N,A[De],oe),Re!==null&&(R=s(Re,R,De),Te===null?he=Re:Te.sibling=Re,Te=Re);return Je&&Bn(N,De),he}for(Re=r(N,Re);De<A.length;De++)dt=Ze(Re,N,De,A[De],oe),dt!==null&&(e&&dt.alternate!==null&&Re.delete(dt.key===null?De:dt.key),R=s(dt,R,De),Te===null?he=dt:Te.sibling=dt,Te=dt);return e&&Re.forEach(function(Cn){return t(N,Cn)}),Je&&Bn(N,De),he}function _t(N,R,A,oe){var he=Q(A);if(typeof he!="function")throw Error(d(150));if(A=he.call(A),A==null)throw Error(d(151));for(var Te=he=null,Re=R,De=R=0,dt=null,Ue=A.next();Re!==null&&!Ue.done;De++,Ue=A.next()){Re.index>De?(dt=Re,Re=null):dt=Re.sibling;var Cn=ye(N,Re,Ue.value,oe);if(Cn===null){Re===null&&(Re=dt);break}e&&Re&&Cn.alternate===null&&t(N,Re),R=s(Cn,R,De),Te===null?he=Cn:Te.sibling=Cn,Te=Cn,Re=dt}if(Ue.done)return n(N,Re),Je&&Bn(N,De),he;if(Re===null){for(;!Ue.done;De++,Ue=A.next())Ue=Me(N,Ue.value,oe),Ue!==null&&(R=s(Ue,R,De),Te===null?he=Ue:Te.sibling=Ue,Te=Ue);return Je&&Bn(N,De),he}for(Re=r(N,Re);!Ue.done;De++,Ue=A.next())Ue=Ze(Re,N,De,Ue.value,oe),Ue!==null&&(e&&Ue.alternate!==null&&Re.delete(Ue.key===null?De:Ue.key),R=s(Ue,R,De),Te===null?he=Ue:Te.sibling=Ue,Te=Ue);return e&&Re.forEach(function(Pf){return t(N,Pf)}),Je&&Bn(N,De),he}function Wt(N,R,A,oe){if(typeof A=="object"&&A!==null&&A.type===p&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case g:e:{for(var he=A.key,Te=R;Te!==null;){if(Te.key===he){if(he=A.type,he===p){if(Te.tag===7){n(N,Te.sibling),R=o(Te,A.props.children),R.return=N,N=R;break e}}else if(Te.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===H&&Ya(he)===Te.type){n(N,Te.sibling),R=o(Te,A.props),R.ref=Tr(N,Te,A),R.return=N,N=R;break e}n(N,Te);break}else t(N,Te);Te=Te.sibling}A.type===p?(R=Yn(A.props.children,N.mode,oe,A.key),R.return=N,N=R):(oe=ll(A.type,A.key,A.props,null,N.mode,oe),oe.ref=Tr(N,R,A),oe.return=N,N=oe)}return y(N);case x:e:{for(Te=A.key;R!==null;){if(R.key===Te)if(R.tag===4&&R.stateNode.containerInfo===A.containerInfo&&R.stateNode.implementation===A.implementation){n(N,R.sibling),R=o(R,A.children||[]),R.return=N,N=R;break e}else{n(N,R);break}else t(N,R);R=R.sibling}R=Wo(A,N.mode,oe),R.return=N,N=R}return y(N);case H:return Te=A._init,Wt(N,R,Te(A._payload),oe)}if(xe(A))return ge(N,R,A,oe);if(Q(A))return _t(N,R,A,oe);Ii(N,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,R!==null&&R.tag===6?(n(N,R.sibling),R=o(R,A),R.return=N,N=R):(n(N,R),R=Go(A,N.mode,oe),R.return=N,N=R),y(N)):n(N,R)}return Wt}var or=Xa(!0),qa=Xa(!1),Nr={},Ut=Le(Nr),zr=Le(Nr),ar=Le(Nr);function rn(e){if(e===Nr)throw Error(d(174));return e}function lo(e,t){Pe(ar,t),Pe(zr,e),Pe(Ut,Nr),e=Se(t),_e(Ut),Pe(Ut,e)}function sr(){_e(Ut),_e(zr),_e(ar)}function Ka(e){var t=rn(ar.current),n=rn(Ut.current);t=V(n,e.type,t),n!==t&&(Pe(zr,e),Pe(Ut,t))}function oo(e){zr.current===e&&(_e(Ut),_e(zr))}var be=Le(0);function ki(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||jn(n)||Rr(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function so(){for(var e=0;e<ao.length;e++){var t=ao[e];bn?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}ao.length=0}var Ti=w.ReactCurrentDispatcher,Bt=w.ReactCurrentBatchConfig,ur=0,$e=null,wt=null,ft=null,Ni=!1,Lr=!1,Or=0,Jc=0;function St(){throw Error(d(321))}function uo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!en(e[n],t[n]))return!1;return!0}function co(e,t,n,r,o,s){if(ur=s,$e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ti.current=e===null||e.memoizedState===null?tf:nf,e=n(r,o),Lr){s=0;do{if(Lr=!1,Or=0,25<=s)throw Error(d(301));s+=1,ft=wt=null,t.updateQueue=null,Ti.current=rf,e=n(r,o)}while(Lr)}if(Ti.current=Fi,t=wt!==null&&wt.next!==null,ur=0,ft=wt=$e=null,Ni=!1,t)throw Error(d(300));return e}function fo(){var e=Or!==0;return Or=0,e}function mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?$e.memoizedState=ft=e:ft=ft.next=e,ft}function ln(){if(wt===null){var e=$e.alternate;e=e!==null?e.memoizedState:null}else e=wt.next;var t=ft===null?$e.memoizedState:ft.next;if(t!==null)ft=t,wt=e;else{if(e===null)throw Error(d(310));wt=e,e={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},ft===null?$e.memoizedState=ft=e:ft=ft.next=e}return ft}function Hn(e,t){return typeof t=="function"?t(e):t}function zi(e){var t=ln(),n=t.queue;if(n===null)throw Error(d(311));n.lastRenderedReducer=e;var r=wt,o=r.baseQueue,s=n.pending;if(s!==null){if(o!==null){var y=o.next;o.next=s.next,s.next=y}r.baseQueue=o=s,n.pending=null}if(o!==null){s=o.next,r=r.baseState;var M=y=null,D=null,K=s;do{var ue=K.lane;if((ur&ue)===ue)D!==null&&(D=D.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),r=K.hasEagerState?K.eagerState:e(r,K.action);else{var Me={lane:ue,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};D===null?(M=D=Me,y=r):D=D.next=Me,$e.lanes|=ue,fr|=ue}K=K.next}while(K!==null&&K!==s);D===null?y=r:D.next=M,en(r,t.memoizedState)||(Lt=!0),t.memoizedState=r,t.baseState=y,t.baseQueue=D,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do s=o.lane,$e.lanes|=s,fr|=s,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Li(e){var t=ln(),n=t.queue;if(n===null)throw Error(d(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,s=t.memoizedState;if(o!==null){n.pending=null;var y=o=o.next;do s=e(s,y.action),y=y.next;while(y!==o);en(s,t.memoizedState)||(Lt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Ja(){}function ba(e,t){var n=$e,r=ln(),o=t(),s=!en(r.memoizedState,o);if(s&&(r.memoizedState=o,Lt=!0),r=r.queue,Fr(ts.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||ft!==null&&ft.memoizedState.tag&1){if(n.flags|=2048,Ar(9,es.bind(null,n,r,o,t),void 0,null),it===null)throw Error(d(349));(ur&30)!==0||$a(n,t,o)}return o}function $a(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=$e.updateQueue,t===null?(t={lastEffect:null,stores:null},$e.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function es(e,t,n,r){t.value=n,t.getSnapshot=r,ns(t)&&Ht(e,1,-1)}function ts(e,t,n){return n(function(){ns(t)&&Ht(e,1,-1)})}function ns(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!en(e,n)}catch{return!0}}function po(e){var t=mn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hn,lastRenderedState:e},t.queue=e,e=e.dispatch=ef.bind(null,$e,e),[t.memoizedState,e]}function Ar(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=$e.updateQueue,t===null?(t={lastEffect:null,stores:null},$e.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function rs(){return ln().memoizedState}function Oi(e,t,n,r){var o=mn();$e.flags|=e,o.memoizedState=Ar(1|t,n,void 0,r===void 0?null:r)}function Ai(e,t,n,r){var o=ln();r=r===void 0?null:r;var s=void 0;if(wt!==null){var y=wt.memoizedState;if(s=y.destroy,r!==null&&uo(r,y.deps)){o.memoizedState=Ar(t,n,s,r);return}}$e.flags|=e,o.memoizedState=Ar(1|t,n,s,r)}function ho(e,t){return Oi(8390656,8,e,t)}function Fr(e,t){return Ai(2048,8,e,t)}function is(e,t){return Ai(4,2,e,t)}function ls(e,t){return Ai(4,4,e,t)}function os(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function as(e,t,n){return n=n!=null?n.concat([e]):null,Ai(4,4,os.bind(null,t,e),n)}function mo(){}function ss(e,t){var n=ln();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&uo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function us(e,t){var n=ln();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&uo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function bc(e,t){var n=je;je=n!==0&&4>n?n:4,e(!0);var r=Bt.transition;Bt.transition={};try{e(!1),t()}finally{je=n,Bt.transition=r}}function cs(){return ln().memoizedState}function $c(e,t,n){var r=En(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},fs(e)?ds(t,n):(ps(e,t,n),n=Ct(),e=Ht(e,r,n),e!==null&&hs(e,t,r))}function ef(e,t,n){var r=En(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(fs(e))ds(t,o);else{ps(e,t,o);var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var y=t.lastRenderedState,M=s(y,n);if(o.hasEagerState=!0,o.eagerState=M,en(M,y))return}catch{}finally{}n=Ct(),e=Ht(e,r,n),e!==null&&hs(e,t,r)}}function fs(e){var t=e.alternate;return e===$e||t!==null&&t===$e}function ds(e,t){Lr=Ni=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ps(e,t,n){it!==null&&(e.mode&1)!==0&&(Ne&2)===0?(e=t.interleaved,e===null?(n.next=n,nn===null?nn=[t]:nn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(e=t.pending,e===null?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function hs(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Gl(e,n)}}var Fi={readContext:Ft,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},tf={readContext:Ft,useCallback:function(e,t){return mn().memoizedState=[e,t===void 0?null:t],e},useContext:Ft,useEffect:ho,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Oi(4194308,4,os.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oi(4,2,e,t)},useMemo:function(e,t){var n=mn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=mn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=$c.bind(null,$e,e),[r.memoizedState,e]},useRef:function(e){var t=mn();return e={current:e},t.memoizedState=e},useState:po,useDebugValue:mo,useDeferredValue:function(e){var t=po(e),n=t[0],r=t[1];return ho(function(){var o=Bt.transition;Bt.transition={};try{r(e)}finally{Bt.transition=o}},[e]),n},useTransition:function(){var e=po(!1),t=e[0];return e=bc.bind(null,e[1]),mn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=$e,o=mn();if(Je){if(n===void 0)throw Error(d(407));n=n()}else{if(n=t(),it===null)throw Error(d(349));(ur&30)!==0||$a(r,t,n)}o.memoizedState=n;var s={value:n,getSnapshot:t};return o.queue=s,ho(ts.bind(null,r,s,e),[e]),r.flags|=2048,Ar(9,es.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=mn(),t=it.identifierPrefix;if(Je){var n=hn,r=pn;n=(r&~(1<<32-Ke(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Or++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Jc++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},nf={readContext:Ft,useCallback:ss,useContext:Ft,useEffect:Fr,useImperativeHandle:as,useInsertionEffect:is,useLayoutEffect:ls,useMemo:us,useReducer:zi,useRef:rs,useState:function(){return zi(Hn)},useDebugValue:mo,useDeferredValue:function(e){var t=zi(Hn),n=t[0],r=t[1];return Fr(function(){var o=Bt.transition;Bt.transition={};try{r(e)}finally{Bt.transition=o}},[e]),n},useTransition:function(){var e=zi(Hn)[0],t=ln().memoizedState;return[e,t]},useMutableSource:Ja,useSyncExternalStore:ba,useId:cs,unstable_isNewReconciler:!1},rf={readContext:Ft,useCallback:ss,useContext:Ft,useEffect:Fr,useImperativeHandle:as,useInsertionEffect:is,useLayoutEffect:ls,useMemo:us,useReducer:Li,useRef:rs,useState:function(){return Li(Hn)},useDebugValue:mo,useDeferredValue:function(e){var t=Li(Hn),n=t[0],r=t[1];return Fr(function(){var o=Bt.transition;Bt.transition={};try{r(e)}finally{Bt.transition=o}},[e]),n},useTransition:function(){var e=Li(Hn)[0],t=ln().memoizedState;return[e,t]},useMutableSource:Ja,useSyncExternalStore:ba,useId:cs,unstable_isNewReconciler:!1};function vo(e,t){try{var n="",r=t;do n+=Kc(r),r=r.return;while(r);var o=n}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o}}function go(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var lf=typeof WeakMap=="function"?WeakMap:Map;function ms(e,t,n){n=dn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){bi||(bi=!0,Ao=r),go(e,t)},n}function vs(e,t,n){n=dn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){go(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){go(e,t),typeof r!="function"&&(xn===null?xn=new Set([this]):xn.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),n}function gs(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new lf;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=wf.bind(null,e,t,n),t.then(e,e))}function ys(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ws(e,t,n,r,o){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=dn(-1,1),t.tag=2,Sn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}function on(e){e.flags|=4}function Ss(e,t){if(e!==null&&e.child===t.child)return!0;if((t.flags&16)!==0)return!1;for(e=t.child;e!==null;){if((e.flags&12854)!==0||(e.subtreeFlags&12854)!==0)return!1;e=e.sibling}return!0}var jr,Dr,ji,Di;if(Pt)jr=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)me(e,n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Dr=function(){},ji=function(e,t,n,r,o){if(e=e.memoizedProps,e!==r){var s=t.stateNode,y=rn(Ut.current);n=Ve(s,n,e,r,o,y),(t.updateQueue=n)&&on(t)}},Di=function(e,t,n,r){n!==r&&on(t)};else if($n){jr=function(e,t,n,r){for(var o=t.child;o!==null;){if(o.tag===5){var s=o.stateNode;n&&r&&(s=di(s,o.type,o.memoizedProps,o)),me(e,s)}else if(o.tag===6)s=o.stateNode,n&&r&&(s=pi(s,o.memoizedProps,o)),me(e,s);else if(o.tag!==4){if(o.tag===22&&o.memoizedState!==null)s=o.child,s!==null&&(s.return=o),jr(e,o,!0,!0);else if(o.child!==null){o.child.return=o,o=o.child;continue}}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};var xs=function(e,t,n,r){for(var o=t.child;o!==null;){if(o.tag===5){var s=o.stateNode;n&&r&&(s=di(s,o.type,o.memoizedProps,o)),ci(e,s)}else if(o.tag===6)s=o.stateNode,n&&r&&(s=pi(s,o.memoizedProps,o)),ci(e,s);else if(o.tag!==4){if(o.tag===22&&o.memoizedState!==null)s=o.child,s!==null&&(s.return=o),xs(e,o,!0,!0);else if(o.child!==null){o.child.return=o,o=o.child;continue}}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Dr=function(e,t){var n=t.stateNode;if(!Ss(e,t)){e=n.containerInfo;var r=ui(e);xs(r,t,!1,!1),n.pendingChildren=r,on(t),Al(e,r)}},ji=function(e,t,n,r,o){var s=e.stateNode,y=e.memoizedProps;if((e=Ss(e,t))&&y===r)t.stateNode=s;else{var M=t.stateNode,D=rn(Ut.current),K=null;y!==r&&(K=Ve(M,n,y,r,o,D)),e&&K===null?t.stateNode=s:(s=Ol(s,K,n,y,r,t,e,M),we(s,n,r,o,D)&&on(t),t.stateNode=s,e?on(t):jr(s,t,!1,!1))}},Di=function(e,t,n,r){n!==r?(e=rn(ar.current),n=rn(Ut.current),t.stateNode=Ie(r,e,n,t),on(t)):t.stateNode=e.stateNode}}else Dr=function(){},ji=function(){},Di=function(){};function Ur(e,t){if(!Je)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function xt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function of(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(t),null;case 1:return rt(t.type)&&pt(),xt(t),null;case 3:return r=t.stateNode,sr(),_e(ke),_e(We),so(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(kr(t)?on(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Kt!==null&&(Do(Kt),Kt=null))),Dr(e,t),xt(t),null;case 5:oo(t),n=rn(ar.current);var o=t.type;if(e!==null&&t.stateNode!=null)ji(e,t,o,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(d(166));return xt(t),null}if(e=rn(Ut.current),kr(t)){if(!vt)throw Error(d(175));e=u(t.stateNode,t.type,t.memoizedProps,n,e,t,!Ir),t.updateQueue=e,e!==null&&on(t)}else{var s=pe(o,r,n,e,t);jr(s,t,!1,!1),t.stateNode=s,we(s,o,r,n,e)&&on(t)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return xt(t),null;case 6:if(e&&t.stateNode!=null)Di(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(d(166));if(e=rn(ar.current),n=rn(Ut.current),kr(t)){if(!vt)throw Error(d(176));if(e=t.stateNode,r=t.memoizedProps,(n=h(e,r,t,!Ir))&&(o=Nt,o!==null))switch(s=(o.mode&1)!==0,o.tag){case 3:$(o.stateNode.containerInfo,e,r,s);break;case 5:te(o.type,o.memoizedProps,o.stateNode,e,r,s)}n&&on(t)}else t.stateNode=Ie(r,e,n,t)}return xt(t),null;case 13:if(_e(be),r=t.memoizedState,Je&&zt!==null&&(t.mode&1)!==0&&(t.flags&128)===0){for(e=zt;e;)e=Xt(e);return lr(),t.flags|=98560,t}if(r!==null&&r.dehydrated!==null){if(r=kr(t),e===null){if(!r)throw Error(d(318));if(!vt)throw Error(d(344));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));_(e,t)}else lr(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;return xt(t),null}return Kt!==null&&(Do(Kt),Kt=null),(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,n=!1,e===null?kr(t):n=e.memoizedState!==null,r&&!n&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(be.current&1)!==0?at===0&&(at=3):Bo())),t.updateQueue!==null&&(t.flags|=4),xt(t),null);case 4:return sr(),Dr(e,t),e===null&&li(t.stateNode.containerInfo),xt(t),null;case 10:return ql(t.type._context),xt(t),null;case 17:return rt(t.type)&&pt(),xt(t),null;case 19:if(_e(be),o=t.memoizedState,o===null)return xt(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)Ur(o,!1);else{if(at!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(s=ki(e),s!==null){for(t.flags|=128,Ur(o,!1),e=s.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,r=t.child;r!==null;)n=r,o=e,n.flags&=14680066,s=n.alternate,s===null?(n.childLanes=0,n.lanes=o,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=s.childLanes,n.lanes=s.lanes,n.child=s.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=s.memoizedProps,n.memoizedState=s.memoizedState,n.updateQueue=s.updateQueue,n.type=s.type,o=s.dependencies,n.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r=r.sibling;return Pe(be,be.current&1|2),t.child}e=e.sibling}o.tail!==null&&ct()>Oo&&(t.flags|=128,r=!0,Ur(o,!1),t.lanes=4194304)}else{if(!r)if(e=ki(s),e!==null){if(t.flags|=128,r=!0,e=e.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),Ur(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Je)return xt(t),null}else 2*ct()-o.renderingStartTime>Oo&&n!==1073741824&&(t.flags|=128,r=!0,Ur(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(e=o.last,e!==null?e.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ct(),t.sibling=null,e=be.current,Pe(be,r?e&1|2:e&1),t):(xt(t),null);case 22:case 23:return Uo(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(Ot&1073741824)!==0&&(xt(t),Pt&&t.subtreeFlags&6&&(t.flags|=8192)):xt(t),null;case 24:return null;case 25:return null}throw Error(d(156,t.tag))}var af=w.ReactCurrentOwner,Lt=!1;function Rt(e,t,n,r){t.child=e===null?qa(t,null,n,r):or(t,e.child,n,r)}function _s(e,t,n,r,o){n=n.render;var s=t.ref;return nr(t,o),r=co(e,t,n,r,s,o),n=fo(),e!==null&&!Lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,vn(e,t,o)):(Je&&n&&eo(t),t.flags|=1,Rt(e,t,r,o),t.child)}function Es(e,t,n,r,o){if(e===null){var s=n.type;return typeof s=="function"&&!Ho(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Ms(e,t,s,r,o)):(e=ll(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,(e.lanes&o)===0){var y=s.memoizedProps;if(n=n.compare,n=n!==null?n:Si,n(y,r)&&e.ref===t.ref)return vn(e,t,o)}return t.flags|=1,e=Rn(s,r),e.ref=t.ref,e.return=t,t.child=e}function Ms(e,t,n,r,o){if(e!==null&&Si(e.memoizedProps,r)&&e.ref===t.ref)if(Lt=!1,(e.lanes&o)!==0)(e.flags&131072)!==0&&(Lt=!0);else return t.lanes=e.lanes,vn(e,t,o);return yo(e,t,n,r,o)}function Rs(e,t,n){var r=t.pendingProps,o=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null},Pe(cr,Ot),Ot|=n;else if((n&1073741824)!==0)t.memoizedState={baseLanes:0,cachePool:null},r=s!==null?s.baseLanes:n,Pe(cr,Ot),Ot|=r;else return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,Pe(cr,Ot),Ot|=e,null;else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Pe(cr,Ot),Ot|=r;return Rt(e,t,o,n),t.child}function Cs(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function yo(e,t,n,r,o){var s=rt(n)?Qe:We.current;return s=yt(t,s),nr(t,o),n=co(e,t,n,r,s,o),r=fo(),e!==null&&!Lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,vn(e,t,o)):(Je&&r&&eo(t),t.flags|=1,Rt(e,t,n,o),t.child)}function Ps(e,t,n,r,o){if(rt(n)){var s=!0;Ge(t)}else s=!1;if(nr(t,o),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),Ha(t,n,r),$l(t,n,r,o),r=!0;else if(e===null){var y=t.stateNode,M=t.memoizedProps;y.props=M;var D=y.context,K=n.contextType;typeof K=="object"&&K!==null?K=Ft(K):(K=rt(n)?Qe:We.current,K=yt(t,K));var ue=n.getDerivedStateFromProps,Me=typeof ue=="function"||typeof y.getSnapshotBeforeUpdate=="function";Me||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(M!==r||D!==K)&&Ga(t,y,r,K),wn=!1;var ye=t.memoizedState;y.state=ye,Mi(t,r,y,o),D=t.memoizedState,M!==r||ye!==D||ke.current||wn?(typeof ue=="function"&&(bl(t,n,ue,r),D=t.memoizedState),(M=wn||Ba(t,n,M,r,ye,D,K))?(Me||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=D),y.props=r,y.state=D,y.context=K,r=M):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{y=t.stateNode,Fa(e,t),M=t.memoizedProps,K=t.type===t.elementType?M:qt(t.type,M),y.props=K,Me=t.pendingProps,ye=y.context,D=n.contextType,typeof D=="object"&&D!==null?D=Ft(D):(D=rt(n)?Qe:We.current,D=yt(t,D));var Ze=n.getDerivedStateFromProps;(ue=typeof Ze=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(M!==Me||ye!==D)&&Ga(t,y,r,D),wn=!1,ye=t.memoizedState,y.state=ye,Mi(t,r,y,o);var ge=t.memoizedState;M!==Me||ye!==ge||ke.current||wn?(typeof Ze=="function"&&(bl(t,n,Ze,r),ge=t.memoizedState),(K=wn||Ba(t,n,K,r,ye,ge,D)||!1)?(ue||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(r,ge,D),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(r,ge,D)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||M===e.memoizedProps&&ye===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||M===e.memoizedProps&&ye===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=ge),y.props=r,y.state=ge,y.context=D,r=K):(typeof y.componentDidUpdate!="function"||M===e.memoizedProps&&ye===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||M===e.memoizedProps&&ye===e.memoizedState||(t.flags|=1024),r=!1)}return wo(e,t,n,r,s,o)}function wo(e,t,n,r,o,s){Cs(e,t);var y=(t.flags&128)!==0;if(!r&&!y)return o&&Fe(t,n,!1),vn(e,t,s);r=t.stateNode,af.current=t;var M=y&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&y?(t.child=or(t,e.child,null,s),t.child=or(t,null,M,s)):Rt(e,t,M,s),t.memoizedState=r.state,o&&Fe(t,n,!0),t.child}function Is(e){var t=e.stateNode;t.pendingContext?Be(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Be(e,t.context,!1),lo(e,t.containerInfo)}function ks(e,t,n,r,o){return lr(),io(o),t.flags|=256,Rt(e,t,n,r),t.child}var Ui={dehydrated:null,treeContext:null,retryLane:0};function Bi(e){return{baseLanes:e,cachePool:null}}function Ts(e,t,n){var r=t.pendingProps,o=be.current,s=!1,y=(t.flags&128)!==0,M;if((M=y)||(M=e!==null&&e.memoizedState===null?!1:(o&2)!==0),M?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Pe(be,o&1),e===null)return ro(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:Rr(e)?t.lanes=8:t.lanes=1073741824,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},(r&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ol(o,r,0,null),e=Yn(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Bi(n),t.memoizedState=Ui,e):So(t,o));if(o=e.memoizedState,o!==null){if(M=o.dehydrated,M!==null){if(y)return t.flags&256?(t.flags&=-257,Hi(e,t,n,Error(d(422)))):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,o=t.mode,r=ol({mode:"visible",children:r.children},o,0,null),s=Yn(s,o,n,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,(t.mode&1)!==0&&or(t,e.child,null,n),t.child.memoizedState=Bi(n),t.memoizedState=Ui,s);if((t.mode&1)===0)t=Hi(e,t,n,null);else if(Rr(M))t=Hi(e,t,n,Error(d(419)));else if(r=(n&e.childLanes)!==0,Lt||r){if(r=it,r!==null){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}r=(s&(r.suspendedLanes|n))!==0?0:s,r!==0&&r!==o.retryLane&&(o.retryLane=r,Ht(e,r,-1))}Bo(),t=Hi(e,t,n,Error(d(421)))}else jn(M)?(t.flags|=128,t.child=e.child,t=Sf.bind(null,e),Dn(M,t),t=null):(n=o.treeContext,vt&&(zt=Ul(M),Nt=t,Je=!0,Kt=null,Ir=!1,n!==null&&(jt[Dt++]=pn,jt[Dt++]=hn,jt[Dt++]=Un,pn=n.id,hn=n.overflow,Un=t)),t=So(t,t.pendingProps.children),t.flags|=4096);return t}return s?(r=zs(e,t,r.children,r.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=o===null?Bi(n):{baseLanes:o.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Ui,r):(n=Ns(e,t,r.children,n),t.memoizedState=null,n)}return s?(r=zs(e,t,r.children,r.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=o===null?Bi(n):{baseLanes:o.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Ui,r):(n=Ns(e,t,r.children,n),t.memoizedState=null,n)}function So(e,t){return t=ol({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ns(e,t,n,r){var o=e.child;return e=o.sibling,n=Rn(o,{mode:"visible",children:n}),(t.mode&1)===0&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function zs(e,t,n,r,o){var s=t.mode;e=e.child;var y=e.sibling,M={mode:"hidden",children:n};return(s&1)===0&&t.child!==e?(n=t.child,n.childLanes=0,n.pendingProps=M,t.deletions=null):(n=Rn(e,M),n.subtreeFlags=e.subtreeFlags&14680064),y!==null?r=Rn(y,r):(r=Yn(r,s,o,null),r.flags|=2),r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Hi(e,t,n,r){return r!==null&&io(r),or(t,e.child,null,n),e=So(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ls(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Kl(e.return,t,n)}function xo(e,t,n,r,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=o)}function Os(e,t,n){var r=t.pendingProps,o=r.revealOrder,s=r.tail;if(Rt(e,t,r.children,n),r=be.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ls(e,n,t);else if(e.tag===19)Ls(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Pe(be,r),(t.mode&1)===0)t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&ki(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),xo(t,!1,o,n,s);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&ki(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}xo(t,!0,n,null,s);break;case"together":xo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function vn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),fr|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(d(153));if(t.child!==null){for(e=t.child,n=Rn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Rn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function sf(e,t,n){switch(t.tag){case 3:Is(t),lr();break;case 5:Ka(t);break;case 1:rt(t.type)&&Ge(t);break;case 4:lo(t,t.stateNode.containerInfo);break;case 10:Aa(t,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(r!==null)return r.dehydrated!==null?(Pe(be,be.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?Ts(e,t,n):(Pe(be,be.current&1),e=vn(e,t,n),e!==null?e.sibling:null);Pe(be,be.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return Os(e,t,n);t.flags|=128}var o=t.memoizedState;if(o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Pe(be,be.current),r)break;return null;case 22:case 23:return t.lanes=0,Rs(e,t,n)}return vn(e,t,n)}function uf(e,t){switch(to(t),t.tag){case 1:return rt(t.type)&&pt(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return sr(),_e(ke),_e(We),so(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return oo(t),null;case 13:if(_e(be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(d(340));lr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _e(be),null;case 4:return sr(),null;case 10:return ql(t.type._context),null;case 22:case 23:return Uo(),null;case 24:return null;default:return null}}var Gi=!1,Gn=!1,cf=typeof WeakSet=="function"?WeakSet:Set,le=null;function Wi(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Tt(e,t,r)}else n.current=null}function _o(e,t,n){try{n()}catch(r){Tt(e,t,r)}}var As=!1;function ff(e,t){for(ae(e.containerInfo),le=t;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var n=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(n!==null){var r=n.memoizedProps,o=n.memoizedState,s=e.stateNode,y=s.getSnapshotBeforeUpdate(e.elementType===e.type?r:qt(e.type,r),o);s.__reactInternalSnapshotBeforeUpdate=y}break;case 3:Pt&&Ll(e.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(d(163))}}catch(M){Tt(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return n=As,As=!1,n}function Wn(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&_o(t,n,s)}o=o.next}while(o!==r)}}function Br(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Eo(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=ie(n);break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Fs(e,t,n){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(yi,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var o=r,s=o.destroy;o=o.tag,s!==void 0&&((o&2)!==0||(o&4)!==0)&&_o(t,n,s),r=r.next}while(r!==e)}break;case 1:if(Wi(t,n),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(y){Tt(t,n,y)}break;case 5:Wi(t,n);break;case 4:Pt?Gs(e,t,n):$n&&$n&&(t=t.stateNode.containerInfo,n=ui(t),fi(t,n))}}function js(e,t,n){for(var r=t;;)if(Fs(e,r,n),r.child===null||Pt&&r.tag===4){if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function Ds(e){var t=e.alternate;t!==null&&(e.alternate=null,Ds(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&_l(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Us(e){return e.tag===5||e.tag===3||e.tag===4}function Bs(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hs(e){if(Pt){e:{for(var t=e.return;t!==null;){if(Us(t))break e;t=t.return}throw Error(d(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,n.flags&32&&(Et(t),n.flags&=-33),n=Bs(e),Ro(e,n,t);break;case 3:case 4:t=n.stateNode.containerInfo,n=Bs(e),Mo(e,n,t);break;default:throw Error(d(161))}}}function Mo(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?gt(n,e,t):er(n,e);else if(r!==4&&(e=e.child,e!==null))for(Mo(e,t,n),e=e.sibling;e!==null;)Mo(e,t,n),e=e.sibling}function Ro(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?An(n,e,t):ai(n,e);else if(r!==4&&(e=e.child,e!==null))for(Ro(e,t,n),e=e.sibling;e!==null;)Ro(e,t,n),e=e.sibling}function Gs(e,t,n){for(var r=t,o=!1,s,y;;){if(!o){o=r.return;e:for(;;){if(o===null)throw Error(d(160));switch(s=o.stateNode,o.tag){case 5:y=!1;break e;case 3:s=s.containerInfo,y=!0;break e;case 4:s=s.containerInfo,y=!0;break e}o=o.return}o=!0}if(r.tag===5||r.tag===6)js(e,r,n),y?yn(s,r.stateNode):si(s,r.stateNode);else if(r.tag===18)y?Z(s,r.stateNode):q(s,r.stateNode);else if(r.tag===4){if(r.child!==null){s=r.stateNode.containerInfo,y=!0,r.child.return=r,r=r.child;continue}}else if(Fs(e,r,n),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(o=!1)}r.sibling.return=r.return,r=r.sibling}}function Co(e,t){if(Pt){switch(t.tag){case 0:case 11:case 14:case 15:Wn(3,t,t.return),Br(3,t),Wn(5,t,t.return);return;case 1:return;case 5:var n=t.stateNode;if(n!=null){var r=t.memoizedProps;e=e!==null?e.memoizedProps:r;var o=t.type,s=t.updateQueue;t.updateQueue=null,s!==null&&Nl(n,s,o,e,r,t)}return;case 6:if(t.stateNode===null)throw Error(d(162));n=t.memoizedProps,kl(t.stateNode,e!==null?e.memoizedProps:n,n);return;case 3:vt&&e!==null&&e.memoizedState.isDehydrated&&F(t.stateNode.containerInfo);return;case 12:return;case 13:Zi(t);return;case 19:Zi(t);return;case 17:return}throw Error(d(163))}switch(t.tag){case 0:case 11:case 14:case 15:Wn(3,t,t.return),Br(3,t),Wn(5,t,t.return);return;case 12:return;case 13:Zi(t);return;case 19:Zi(t);return;case 3:vt&&e!==null&&e.memoizedState.isDehydrated&&F(t.stateNode.containerInfo);break;case 22:case 23:return}e:if($n){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,fi(t.containerInfo,t.pendingChildren);break e}throw Error(d(163))}}function Zi(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new cf),t.forEach(function(r){var o=xf.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function df(e,t){for(le=t;le!==null;){t=le;var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var s=e;Pt?Gs(s,o,t):js(s,o,t);var y=o.alternate;y!==null&&(y.return=null),o.return=null}catch(he){Tt(o,t,he)}}if(n=t.child,(t.subtreeFlags&12854)!==0&&n!==null)n.return=t,le=n;else for(;le!==null;){t=le;try{var M=t.flags;if(M&32&&Pt&&Et(t.stateNode),M&512){var D=t.alternate;if(D!==null){var K=D.ref;K!==null&&(typeof K=="function"?K(null):K.current=null)}}if(M&8192)switch(t.tag){case 13:if(t.memoizedState!==null){var ue=t.alternate;(ue===null||ue.memoizedState===null)&&(Lo=ct())}break;case 22:var Me=t.memoizedState!==null,ye=t.alternate,Ze=ye!==null&&ye.memoizedState!==null;if(n=t,Pt){e:if(r=n,o=Me,s=null,Pt)for(var ge=r;;){if(ge.tag===5){if(s===null){s=ge;var _t=ge.stateNode;o?ut(_t):se(ge.stateNode,ge.memoizedProps)}}else if(ge.tag===6){if(s===null){var Wt=ge.stateNode;o?zl(Wt):Fn(Wt,ge.memoizedProps)}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===r)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===r)break;for(;ge.sibling===null;){if(ge.return===null||ge.return===r)break e;s===ge&&(s=null),ge=ge.return}s===ge&&(s=null),ge.sibling.return=ge.return,ge=ge.sibling}}if(Me&&!Ze&&(n.mode&1)!==0){le=n;for(var N=n.child;N!==null;){for(n=le=N;le!==null;){r=le;var R=r.child;switch(r.tag){case 0:case 11:case 14:case 15:Wn(4,r,r.return);break;case 1:Wi(r,r.return);var A=r.stateNode;if(typeof A.componentWillUnmount=="function"){var oe=r.return;try{A.props=r.memoizedProps,A.state=r.memoizedState,A.componentWillUnmount()}catch(he){Tt(r,oe,he)}}break;case 5:Wi(r,r.return);break;case 22:if(r.memoizedState!==null){Vs(n);continue}}R!==null?(R.return=r,le=R):Vs(n)}N=N.sibling}}}switch(M&4102){case 2:Hs(t),t.flags&=-3;break;case 6:Hs(t),t.flags&=-3,Co(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Co(t.alternate,t);break;case 4:Co(t.alternate,t)}}catch(he){Tt(t,t.return,he)}if(n=t.sibling,n!==null){n.return=t.return,le=n;break}le=t.return}}}function pf(e,t,n){le=e,Ws(e)}function Ws(e,t,n){for(var r=(e.mode&1)!==0;le!==null;){var o=le,s=o.child;if(o.tag===22&&r){var y=o.memoizedState!==null||Gi;if(!y){var M=o.alternate,D=M!==null&&M.memoizedState!==null||Gn;M=Gi;var K=Gn;if(Gi=y,(Gn=D)&&!K)for(le=o;le!==null;)y=le,D=y.child,y.tag===22&&y.memoizedState!==null?Qs(o):D!==null?(D.return=y,le=D):Qs(o);for(;s!==null;)le=s,Ws(s),s=s.sibling;le=o,Gi=M,Gn=K}Zs(e)}else(o.subtreeFlags&8772)!==0&&s!==null?(s.return=o,le=s):Zs(e)}}function Zs(e){for(;le!==null;){var t=le;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Gn||Br(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Gn)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:qt(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Da(t,s,r);break;case 3:var y=t.updateQueue;if(y!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=ie(t.child.stateNode);break;case 1:n=t.child.stateNode}Da(t,y,n)}break;case 5:var M=t.stateNode;n===null&&t.flags&4&&Tl(M,t.type,t.memoizedProps,t);break;case 6:break;case 4:break;case 12:break;case 13:if(vt&&t.memoizedState===null){var D=t.alternate;if(D!==null){var K=D.memoizedState;if(K!==null){var ue=K.dehydrated;ue!==null&&j(ue)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(d(163))}Gn||t.flags&512&&Eo(t)}catch(Me){Tt(t,t.return,Me)}}if(t===e){le=null;break}if(n=t.sibling,n!==null){n.return=t.return,le=n;break}le=t.return}}function Vs(e){for(;le!==null;){var t=le;if(t===e){le=null;break}var n=t.sibling;if(n!==null){n.return=t.return,le=n;break}le=t.return}}function Qs(e){for(;le!==null;){var t=le;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Br(4,t)}catch(D){Tt(t,n,D)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(D){Tt(t,o,D)}}var s=t.return;try{Eo(t)}catch(D){Tt(t,s,D)}break;case 5:var y=t.return;try{Eo(t)}catch(D){Tt(t,y,D)}}}catch(D){Tt(t,t.return,D)}if(t===e){le=null;break}var M=t.sibling;if(M!==null){M.return=t.return,le=M;break}le=t.return}}var Vi=0,Qi=1,Yi=2,Xi=3,qi=4;if(typeof Symbol=="function"&&Symbol.for){var Hr=Symbol.for;Vi=Hr("selector.component"),Qi=Hr("selector.has_pseudo_class"),Yi=Hr("selector.role"),Xi=Hr("selector.test_id"),qi=Hr("selector.text")}function Po(e){var t=ii(e);if(t!=null){if(typeof t.memoizedProps["data-testname"]!="string")throw Error(d(364));return t}if(e=Rl(e),e===null)throw Error(d(362));return e.stateNode.current}function Io(e,t){switch(t.$$typeof){case Vi:if(e.type===t.value)return!0;break;case Qi:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],o=e[n++],s=t[o];if(r.tag!==5||!On(r)){for(;s!=null&&Io(r,s);)o++,s=t[o];if(o===t.length){t=!0;break e}else for(r=r.child;r!==null;)e.push(r,o),r=r.sibling}}t=!1}return t;case Yi:if(e.tag===5&&Mr(e.stateNode,t.value))return!0;break;case qi:if((e.tag===5||e.tag===6)&&(e=oi(e),e!==null&&0<=e.indexOf(t.value)))return!0;break;case Xi:if(e.tag===5&&(e=e.memoizedProps["data-testname"],typeof e=="string"&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(d(365))}return!1}function ko(e){switch(e.$$typeof){case Vi:return"<"+(X(e.value)||"Unknown")+">";case Qi:return":has("+(ko(e)||"")+")";case Yi:return'[role="'+e.value+'"]';case qi:return'"'+e.value+'"';case Xi:return'[data-testname="'+e.value+'"]';default:throw Error(d(365))}}function Ys(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var o=e[r++],s=e[r++],y=t[s];if(o.tag!==5||!On(o)){for(;y!=null&&Io(o,y);)s++,y=t[s];if(s===t.length)n.push(o);else for(o=o.child;o!==null;)e.push(o,s),o=o.sibling}}return n}function To(e,t){if(!Ln)throw Error(d(363));e=Po(e),e=Ys(e,t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(r.tag===5)On(r)||t.push(r.stateNode);else for(r=r.child;r!==null;)e.push(r),r=r.sibling}return t}var hf=Math.ceil,Ki=w.ReactCurrentDispatcher,No=w.ReactCurrentOwner,nt=w.ReactCurrentBatchConfig,Ne=0,it=null,lt=null,ht=0,Ot=0,cr=Le(0),at=0,Gr=null,fr=0,Ji=0,zo=0,Wr=null,It=null,Lo=0,Oo=1/0;function dr(){Oo=ct()+500}var bi=!1,Ao=null,xn=null,$i=!1,_n=null,el=0,Zr=0,Fo=null,tl=-1,nl=0;function Ct(){return(Ne&6)!==0?ct():tl!==-1?tl:tl=ct()}function En(e){return(e.mode&1)===0?1:(Ne&2)!==0&&ht!==0?ht&-ht:qc.transition!==null?(nl===0&&(e=mi,mi<<=1,(mi&4194240)===0&&(mi=64),nl=e),nl):(e=je,e!==0?e:xl())}function Ht(e,t,n){if(50<Zr)throw Zr=0,Fo=null,Error(d(185));var r=rl(e,t);return r===null?null:(Pr(r,t,n),((Ne&2)===0||r!==it)&&(r===it&&((Ne&2)===0&&(Ji|=t),at===4&&Mn(r,ht)),kt(r,n),t===1&&Ne===0&&(e.mode&1)===0&&(dr(),wi&&tn())),r)}function rl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}function kt(e,t){var n=e.callbackNode;Bc(e,t);var r=gi(e,e===it?ht:0);if(r===0)n!==null&&La(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&La(n),t===1)e.tag===0?Xc(qs.bind(null,e)):Oa(qs.bind(null,e)),El?Ml(function(){Ne===0&&tn()}):Wl(Zl,tn),n=null;else{switch(za(r)){case 1:n=Zl;break;case 4:n=Zc;break;case 16:n=Vl;break;case 536870912:n=Vc;break;default:n=Vl}n=iu(n,Xs.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Xs(e,t){if(tl=-1,nl=0,(Ne&6)!==0)throw Error(d(327));var n=e.callbackNode;if(Qn()&&e.callbackNode!==n)return null;var r=gi(e,e===it?ht:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=il(e,r);else{t=r;var o=Ne;Ne|=2;var s=bs();(it!==e||ht!==t)&&(dr(),Zn(e,t));do try{gf();break}catch(M){Js(e,M)}while(!0);Xl(),Ki.current=s,Ne=o,lt!==null?t=0:(it=null,ht=0,t=at)}if(t!==0){if(t===2&&(o=Bl(e),o!==0&&(r=o,t=jo(e,o))),t===1)throw n=Gr,Zn(e,0),Mn(e,r),kt(e,ct()),n;if(t===6)Mn(e,r);else{if(o=e.current.alternate,(r&30)===0&&!mf(o)&&(t=il(e,r),t===2&&(s=Bl(e),s!==0&&(r=s,t=jo(e,s))),t===1))throw n=Gr,Zn(e,0),Mn(e,r),kt(e,ct()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(d(345));case 2:Vn(e,It);break;case 3:if(Mn(e,r),(r&130023424)===r&&(t=Lo+500-ct(),10<t)){if(gi(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){Ct(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=st(Vn.bind(null,e,It),t);break}Vn(e,It);break;case 4:if(Mn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var y=31-Ke(r);s=1<<y,y=t[y],y>o&&(o=y),r&=~s}if(r=o,r=ct()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hf(r/1960))-r,10<r){e.timeoutHandle=st(Vn.bind(null,e,It),r);break}Vn(e,It);break;case 5:Vn(e,It);break;default:throw Error(d(329))}}}return kt(e,ct()),e.callbackNode===n?Xs.bind(null,e):null}function jo(e,t){var n=Wr;return e.current.memoizedState.isDehydrated&&(Zn(e,t).flags|=256),e=il(e,t),e!==2&&(t=It,It=n,t!==null&&Do(t)),e}function Do(e){It===null?It=e:It.push.apply(It,e)}function mf(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!en(s(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Mn(e,t){for(t&=~zo,t&=~Ji,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ke(t),r=1<<n;e[n]=-1,t&=~r}}function qs(e){if((Ne&6)!==0)throw Error(d(327));Qn();var t=gi(e,0);if((t&1)===0)return kt(e,ct()),null;var n=il(e,t);if(e.tag!==0&&n===2){var r=Bl(e);r!==0&&(t=r,n=jo(e,r))}if(n===1)throw n=Gr,Zn(e,0),Mn(e,t),kt(e,ct()),n;if(n===6)throw Error(d(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Vn(e,It),kt(e,ct()),null}function Ks(e){_n!==null&&_n.tag===0&&(Ne&6)===0&&Qn();var t=Ne;Ne|=1;var n=nt.transition,r=je;try{if(nt.transition=null,je=1,e)return e()}finally{je=r,nt.transition=n,Ne=t,(Ne&6)===0&&tn()}}function Uo(){Ot=cr.current,_e(cr)}function Zn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==Er&&(e.timeoutHandle=Er,Yt(n)),lt!==null)for(n=lt.return;n!==null;){var r=n;switch(to(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pt();break;case 3:sr(),_e(ke),_e(We),so();break;case 5:oo(r);break;case 4:sr();break;case 13:_e(be);break;case 19:_e(be);break;case 10:ql(r.type._context);break;case 22:case 23:Uo()}n=n.return}if(it=e,lt=e=Rn(e.current,null),ht=Ot=t,at=0,Gr=null,zo=Ji=fr=0,It=Wr=null,nn!==null){for(t=0;t<nn.length;t++)if(n=nn[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,s=n.pending;if(s!==null){var y=s.next;s.next=o,r.next=y}n.pending=r}nn=null}return e}function Js(e,t){do{var n=lt;try{if(Xl(),Ti.current=Fi,Ni){for(var r=$e.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Ni=!1}if(ur=0,ft=wt=$e=null,Lr=!1,Or=0,No.current=null,n===null||n.return===null){at=1,Gr=t,lt=null;break}e:{var s=e,y=n.return,M=n,D=t;if(t=ht,M.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var K=D,ue=M,Me=ue.tag;if((ue.mode&1)===0&&(Me===0||Me===11||Me===15)){var ye=ue.alternate;ye?(ue.updateQueue=ye.updateQueue,ue.memoizedState=ye.memoizedState,ue.lanes=ye.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var Ze=ys(y);if(Ze!==null){Ze.flags&=-257,ws(Ze,y,M,s,t),Ze.mode&1&&gs(s,K,t),t=Ze,D=K;var ge=t.updateQueue;if(ge===null){var _t=new Set;_t.add(D),t.updateQueue=_t}else ge.add(D);break e}else{if((t&1)===0){gs(s,K,t),Bo();break e}D=Error(d(426))}}else if(Je&&M.mode&1){var Wt=ys(y);if(Wt!==null){(Wt.flags&65536)===0&&(Wt.flags|=256),ws(Wt,y,M,s,t),io(D);break e}}s=D,at!==4&&(at=2),Wr===null?Wr=[s]:Wr.push(s),D=vo(D,M),M=y;do{switch(M.tag){case 3:M.flags|=65536,t&=-t,M.lanes|=t;var N=ms(M,D,t);ja(M,N);break e;case 1:s=D;var R=M.type,A=M.stateNode;if((M.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(xn===null||!xn.has(A)))){M.flags|=65536,t&=-t,M.lanes|=t;var oe=vs(M,s,t);ja(M,oe);break e}}M=M.return}while(M!==null)}eu(n)}catch(he){t=he,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(!0)}function bs(){var e=Ki.current;return Ki.current=Fi,e===null?Fi:e}function Bo(){(at===0||at===3||at===2)&&(at=4),it===null||(fr&268435455)===0&&(Ji&268435455)===0||Mn(it,ht)}function il(e,t){var n=Ne;Ne|=2;var r=bs();it===e&&ht===t||Zn(e,t);do try{vf();break}catch(o){Js(e,o)}while(!0);if(Xl(),Ne=n,Ki.current=r,lt!==null)throw Error(d(261));return it=null,ht=0,at}function vf(){for(;lt!==null;)$s(lt)}function gf(){for(;lt!==null&&!Gc();)$s(lt)}function $s(e){var t=ru(e.alternate,e,Ot);e.memoizedProps=e.pendingProps,t===null?eu(e):lt=t,No.current=null}function eu(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=of(n,t,Ot),n!==null){lt=n;return}}else{if(n=uf(n,t),n!==null){n.flags&=32767,lt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{at=6,lt=null;return}}if(t=t.sibling,t!==null){lt=t;return}lt=t=e}while(t!==null);at===0&&(at=5)}function Vn(e,t){var n=je,r=nt.transition;try{nt.transition=null,je=1,yf(e,t,n)}finally{nt.transition=r,je=n}return null}function yf(e,t,n){do Qn();while(_n!==null);if((Ne&6)!==0)throw Error(d(327));var r=e.finishedWork,o=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(d(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(Hc(e,s),e===it&&(lt=it=null,ht=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||$i||($i=!0,iu(Vl,function(){return Qn(),null})),s=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||s){s=nt.transition,nt.transition=null;var y=je;je=1;var M=Ne;Ne|=4,No.current=null,ff(e,r),df(e,r),Y(e.containerInfo),e.current=r,pf(r),Wc(),Ne=M,je=y,nt.transition=s}else e.current=r;if($i&&($i=!1,_n=e,el=o),s=e.pendingLanes,s===0&&(xn=null),Qc(r.stateNode),kt(e,ct()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(bi)throw bi=!1,e=Ao,Ao=null,e;return(el&1)!==0&&e.tag!==0&&Qn(),s=e.pendingLanes,(s&1)!==0?e===Fo?Zr++:(Zr=0,Fo=e):Zr=0,tn(),null}function Qn(){if(_n!==null){var e=za(el),t=nt.transition,n=je;try{if(nt.transition=null,je=16>e?16:e,_n===null)var r=!1;else{if(e=_n,_n=null,el=0,(Ne&6)!==0)throw Error(d(331));var o=Ne;for(Ne|=4,le=e.current;le!==null;){var s=le,y=s.child;if((le.flags&16)!==0){var M=s.deletions;if(M!==null){for(var D=0;D<M.length;D++){var K=M[D];for(le=K;le!==null;){var ue=le;switch(ue.tag){case 0:case 11:case 15:Wn(8,ue,s)}var Me=ue.child;if(Me!==null)Me.return=ue,le=Me;else for(;le!==null;){ue=le;var ye=ue.sibling,Ze=ue.return;if(Ds(ue),ue===K){le=null;break}if(ye!==null){ye.return=Ze,le=ye;break}le=Ze}}}var ge=s.alternate;if(ge!==null){var _t=ge.child;if(_t!==null){ge.child=null;do{var Wt=_t.sibling;_t.sibling=null,_t=Wt}while(_t!==null)}}le=s}}if((s.subtreeFlags&2064)!==0&&y!==null)y.return=s,le=y;else e:for(;le!==null;){if(s=le,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Wn(9,s,s.return)}var N=s.sibling;if(N!==null){N.return=s.return,le=N;break e}le=s.return}}var R=e.current;for(le=R;le!==null;){y=le;var A=y.child;if((y.subtreeFlags&2064)!==0&&A!==null)A.return=y,le=A;else e:for(y=R;le!==null;){if(M=le,(M.flags&2048)!==0)try{switch(M.tag){case 0:case 11:case 15:Br(9,M)}}catch(he){Tt(M,M.return,he)}if(M===y){le=null;break e}var oe=M.sibling;if(oe!==null){oe.return=M.return,le=oe;break e}le=M.return}}if(Ne=o,tn(),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(yi,e)}catch{}r=!0}return r}finally{je=n,nt.transition=t}}return!1}function tu(e,t,n){t=vo(n,t),t=ms(e,t,1),Sn(e,t),t=Ct(),e=rl(e,1),e!==null&&(Pr(e,1,t),kt(e,t))}function Tt(e,t,n){if(e.tag===3)tu(e,e,n);else for(;t!==null;){if(t.tag===3){tu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xn===null||!xn.has(r))){e=vo(n,e),e=vs(t,e,1),Sn(t,e),e=Ct(),t=rl(t,1),t!==null&&(Pr(t,1,e),kt(t,e));break}}t=t.return}}function wf(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ct(),e.pingedLanes|=e.suspendedLanes&n,it===e&&(ht&n)===n&&(at===4||at===3&&(ht&130023424)===ht&&500>ct()-Lo?Zn(e,0):zo|=n),kt(e,t)}function nu(e,t){t===0&&((e.mode&1)===0?t=1:(t=vi,vi<<=1,(vi&130023424)===0&&(vi=4194304)));var n=Ct();e=rl(e,t),e!==null&&(Pr(e,t,n),kt(e,n))}function Sf(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),nu(e,n)}function xf(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(d(314))}r!==null&&r.delete(t),nu(e,n)}var ru;ru=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ke.current)Lt=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return Lt=!1,sf(e,t,n);Lt=(e.flags&131072)!==0}else Lt=!1,Je&&(t.flags&1048576)!==0&&Wa(t,Pi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var o=yt(t,We.current);nr(t,n),o=co(null,t,r,e,o,n);var s=fo();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,rt(r)?(s=!0,Ge(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Jl(t),o.updater=Ri,t.stateNode=o,o._reactInternals=t,$l(t,r,e,n),t=wo(null,t,r,!0,s,n)):(t.tag=0,Je&&s&&eo(t),Rt(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=Ef(r),e=qt(r,e),o){case 0:t=yo(null,t,r,e,n);break e;case 1:t=Ps(null,t,r,e,n);break e;case 11:t=_s(null,t,r,e,n);break e;case 14:t=Es(null,t,r,qt(r.type,e),n);break e}throw Error(d(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:qt(r,o),yo(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:qt(r,o),Ps(e,t,r,o,n);case 3:e:{if(Is(t),e===null)throw Error(d(387));r=t.pendingProps,s=t.memoizedState,o=s.element,Fa(e,t),Mi(t,r,null,n);var y=t.memoizedState;if(r=y.element,vt&&s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:y.cache,transitions:y.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=Error(d(423)),t=ks(e,t,r,n,o);break e}else if(r!==o){o=Error(d(424)),t=ks(e,t,r,n,o);break e}else for(vt&&(zt=hi(t.stateNode.containerInfo),Nt=t,Je=!0,Kt=null,Ir=!1),n=qa(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(lr(),r===o){t=vn(e,t,n);break e}Rt(e,t,r,n)}t=t.child}return t;case 5:return Ka(t),e===null&&ro(t),r=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,y=o.children,tt(r,o)?y=null:s!==null&&tt(r,s)&&(t.flags|=32),Cs(e,t),Rt(e,t,y,n),t.child;case 6:return e===null&&ro(t),null;case 13:return Ts(e,t,n);case 4:return lo(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=or(t,null,r,n):Rt(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:qt(r,o),_s(e,t,r,o,n);case 7:return Rt(e,t,t.pendingProps,n),t.child;case 8:return Rt(e,t,t.pendingProps.children,n),t.child;case 12:return Rt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,s=t.memoizedProps,y=o.value,Aa(t,r,y),s!==null)if(en(s.value,y)){if(s.children===o.children&&!ke.current){t=vn(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var M=s.dependencies;if(M!==null){y=s.child;for(var D=M.firstContext;D!==null;){if(D.context===r){if(s.tag===1){D=dn(-1,n&-n),D.tag=2;var K=s.updateQueue;if(K!==null){K=K.shared;var ue=K.pending;ue===null?D.next=D:(D.next=ue.next,ue.next=D),K.pending=D}}s.lanes|=n,D=s.alternate,D!==null&&(D.lanes|=n),Kl(s.return,n,t),M.lanes|=n;break}D=D.next}}else if(s.tag===10)y=s.type===t.type?null:s.child;else if(s.tag===18){if(y=s.return,y===null)throw Error(d(341));y.lanes|=n,M=y.alternate,M!==null&&(M.lanes|=n),Kl(y,n,t),y=s.sibling}else y=s.child;if(y!==null)y.return=s;else for(y=s;y!==null;){if(y===t){y=null;break}if(s=y.sibling,s!==null){s.return=y.return,y=s;break}y=y.return}s=y}Rt(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,nr(t,n),o=Ft(o),r=r(o),t.flags|=1,Rt(e,t,r,n),t.child;case 14:return r=t.type,o=qt(r,t.pendingProps),o=qt(r.type,o),Es(e,t,r,o,n);case 15:return Ms(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:qt(r,o),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,rt(r)?(e=!0,Ge(t)):e=!1,nr(t,n),Ha(t,r,o),$l(t,r,o,n),wo(null,t,r,!0,e,n);case 19:return Os(e,t,n);case 22:return Rs(e,t,n)}throw Error(d(156,t.tag))};function iu(e,t){return Wl(e,t)}function _f(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(e,t,n,r){return new _f(e,t,n,r)}function Ho(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ef(e){if(typeof e=="function")return Ho(e)?1:0;if(e!=null){if(e=e.$$typeof,e===O)return 11;if(e===z)return 14}return 2}function Rn(e,t){var n=e.alternate;return n===null?(n=Gt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ll(e,t,n,r,o,s){var y=2;if(r=e,typeof e=="function")Ho(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case p:return Yn(n.children,o,s,t);case v:y=8,o|=8;break;case S:return e=Gt(12,n,t,o|2),e.elementType=S,e.lanes=s,e;case k:return e=Gt(13,n,t,o),e.elementType=k,e.lanes=s,e;case E:return e=Gt(19,n,t,o),e.elementType=E,e.lanes=s,e;case ne:return ol(n,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case I:y=10;break e;case C:y=9;break e;case O:y=11;break e;case z:y=14;break e;case H:y=16,r=null;break e}throw Error(d(130,e==null?e:typeof e,""))}return t=Gt(y,n,t,o),t.elementType=e,t.type=r,t.lanes=s,t}function Yn(e,t,n,r){return e=Gt(7,e,r,t),e.lanes=n,e}function ol(e,t,n,r){return e=Gt(22,e,r,t),e.elementType=ne,e.lanes=n,e.stateNode={},e}function Go(e,t,n){return e=Gt(6,e,null,t),e.lanes=n,e}function Wo(e,t,n){return t=Gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Mf(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Er,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hl(0),this.expirationTimes=Hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hl(0),this.identifierPrefix=r,this.onRecoverableError=o,vt&&(this.mutableSourceEagerHydrationData=null)}function lu(e,t,n,r,o,s,y,M,D){return e=new Mf(e,t,n,M,D),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Gt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},Jl(s),e}function ou(e){if(!e)return Oe;e=e._reactInternals;e:{if(G(e)!==e||e.tag!==1)throw Error(d(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(rt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(d(171))}if(e.tag===1){var n=e.type;if(rt(n))return ot(e,n,t)}return t}function au(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(d(188)):(e=Object.keys(e).join(","),Error(d(268,e)));return e=re(t),e===null?null:e.stateNode}function su(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Zo(e,t){su(e,t),(e=e.alternate)&&su(e,t)}function Rf(e){return e=re(e),e===null?null:e.stateNode}function Cf(){return null}return a.attemptContinuousHydration=function(e){if(e.tag===13){var t=Ct();Ht(e,134217728,t),Zo(e,134217728)}},a.attemptHydrationAtCurrentPriority=function(e){if(e.tag===13){var t=Ct(),n=En(e);Ht(e,n,t),Zo(e,n)}},a.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Cr(t.pendingLanes);n!==0&&(Gl(t,n|1),kt(t,ct()),(Ne&6)===0&&(dr(),tn()))}break;case 13:var r=Ct();Ks(function(){return Ht(e,1,r)}),Zo(e,1)}},a.batchedUpdates=function(e,t){var n=Ne;Ne|=1;try{return e(t)}finally{Ne=n,Ne===0&&(dr(),wi&&tn())}},a.createComponentSelector=function(e){return{$$typeof:Vi,value:e}},a.createContainer=function(e,t,n,r,o,s,y){return lu(e,t,!1,null,n,r,o,s,y)},a.createHasPseudoClassSelector=function(e){return{$$typeof:Qi,value:e}},a.createHydrationContainer=function(e,t,n,r,o,s,y,M,D){return e=lu(n,r,!0,e,o,s,y,M,D),e.context=ou(null),n=e.current,r=Ct(),o=En(n),s=dn(r,o),s.callback=t??null,Sn(n,s),e.current.lanes=o,Pr(e,o,r),kt(e,r),e},a.createPortal=function(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:x,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}},a.createRoleSelector=function(e){return{$$typeof:Yi,value:e}},a.createTestNameSelector=function(e){return{$$typeof:Xi,value:e}},a.createTextSelector=function(e){return{$$typeof:qi,value:e}},a.deferredUpdates=function(e){var t=je,n=nt.transition;try{return nt.transition=null,je=16,e()}finally{je=t,nt.transition=n}},a.discreteUpdates=function(e,t,n,r,o){var s=je,y=nt.transition;try{return nt.transition=null,je=1,e(t,n,r,o)}finally{je=s,nt.transition=y,Ne===0&&dr()}},a.findAllNodes=To,a.findBoundingRects=function(e,t){if(!Ln)throw Error(d(363));t=To(e,t),e=[];for(var n=0;n<t.length;n++)e.push(Cl(t[n]));for(t=e.length-1;0<t;t--){n=e[t];for(var r=n.x,o=r+n.width,s=n.y,y=s+n.height,M=t-1;0<=M;M--)if(t!==M){var D=e[M],K=D.x,ue=K+D.width,Me=D.y,ye=Me+D.height;if(r>=K&&s>=Me&&o<=ue&&y<=ye){e.splice(t,1);break}else if(r!==K||n.width!==D.width||ye<s||Me>y){if(!(s!==Me||n.height!==D.height||ue<r||K>o)){K>r&&(D.width+=K-r,D.x=r),ue<o&&(D.width=o-K),e.splice(t,1);break}}else{Me>s&&(D.height+=Me-s,D.y=s),ye<y&&(D.height=y-Me),e.splice(t,1);break}}}return e},a.findHostInstance=au,a.findHostInstanceWithNoPortals=function(e){return e=B(e),e=e!==null?fe(e):null,e===null?null:e.stateNode},a.findHostInstanceWithWarning=function(e){return au(e)},a.flushControlled=function(e){var t=Ne;Ne|=1;var n=nt.transition,r=je;try{nt.transition=null,je=1,e()}finally{je=r,nt.transition=n,Ne=t,Ne===0&&(dr(),tn())}},a.flushPassiveEffects=Qn,a.flushSync=Ks,a.focusWithin=function(e,t){if(!Ln)throw Error(d(363));for(e=Po(e),t=Ys(e,t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!On(n)){if(n.tag===5&&Pl(n.stateNode))return!0;for(n=n.child;n!==null;)t.push(n),n=n.sibling}}return!1},a.getCurrentUpdatePriority=function(){return je},a.getFindAllNodesFailureDescription=function(e,t){if(!Ln)throw Error(d(363));var n=0,r=[];e=[Po(e),0];for(var o=0;o<e.length;){var s=e[o++],y=e[o++],M=t[y];if((s.tag!==5||!On(s))&&(Io(s,M)&&(r.push(ko(M)),y++,y>n&&(n=y)),y<t.length))for(s=s.child;s!==null;)e.push(s,y),s=s.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(ko(t[n]));return`findAllNodes was able to match part of the selector:
  `+(r.join(" > ")+`

No matching component was found for:
  `)+e.join(" > ")}return null},a.getPublicRootInstance=function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return ie(e.child.stateNode);default:return e.child.stateNode}},a.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:Rf,findFiberByHostInstance:e.findFiberByHostInstance||Cf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{yi=t.inject(e),$t=t}catch{}e=!!t.checkDCE}}return e},a.isAlreadyRendering=function(){return!1},a.observeVisibleRects=function(e,t,n,r){if(!Ln)throw Error(d(363));e=To(e,t);var o=Il(e,n,r).disconnect;return{disconnect:function(){o()}}},a.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},a.runWithPriority=function(e,t){var n=je;try{return je=e,t()}finally{je=n}},a.shouldError=function(){return null},a.shouldSuspend=function(){return!1},a.updateContainer=function(e,t,n,r){var o=t.current,s=Ct(),y=En(o);return n=ou(n),t.context===null?t.context=n:t.pendingContext=n,t=dn(s,y),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),Sn(o,t),e=Ht(o,y,s),e!==null&&Ei(e,o,y),y},a}),bo}var wu;function Id(){return wu||(wu=1,qo.exports=Pd()),qo.exports}var kd=Id();const Td=wl(kd);var Su=nc();const Sa={},xa=l=>void Object.assign(Sa,l);function Nd(l,i){function a(p,{args:v=[],attach:S,...I},C){let O=`${p[0].toUpperCase()}${p.slice(1)}`,k;if(p==="primitive"){if(I.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const E=I.object;k=hr(E,{type:p,root:C,attach:S,primitive:!0})}else{const E=Sa[O];if(!E)throw new Error(`R3F: ${O} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(v))throw new Error("R3F: The args prop must be an array!");k=hr(new E(...v),{type:p,root:C,attach:S,memoizedProps:{args:v}})}return k.__r3f.attach===void 0&&(k instanceof Uf?k.__r3f.attach="geometry":k instanceof Bf&&(k.__r3f.attach="material")),O!=="inject"&&ta(k,I),k}function c(p,v){let S=!1;if(v){var I,C;(I=v.__r3f)!=null&&I.attach?ea(p,v,v.__r3f.attach):v.isObject3D&&p.isObject3D&&(p.add(v),S=!0),S||(C=p.__r3f)==null||C.objects.push(v),v.__r3f||hr(v,{}),v.__r3f.parent=p,ha(v),mr(v)}}function f(p,v,S){let I=!1;if(v){var C,O;if((C=v.__r3f)!=null&&C.attach)ea(p,v,v.__r3f.attach);else if(v.isObject3D&&p.isObject3D){v.parent=p,v.dispatchEvent({type:"added"}),p.dispatchEvent({type:"childadded",child:v});const k=p.children.filter(z=>z!==v),E=k.indexOf(S);p.children=[...k.slice(0,E),v,...k.slice(E)],I=!0}I||(O=p.__r3f)==null||O.objects.push(v),v.__r3f||hr(v,{}),v.__r3f.parent=p,ha(v),mr(v)}}function m(p,v,S=!1){p&&[...p].forEach(I=>d(v,I,S))}function d(p,v,S){if(v){var I,C,O;if(v.__r3f&&(v.__r3f.parent=null),(I=p.__r3f)!=null&&I.objects&&(p.__r3f.objects=p.__r3f.objects.filter(ne=>ne!==v)),(C=v.__r3f)!=null&&C.attach)Ru(p,v,v.__r3f.attach);else if(v.isObject3D&&p.isObject3D){var k;p.remove(v),(k=v.__r3f)!=null&&k.root&&Dd(hl(v),v)}const z=(O=v.__r3f)==null?void 0:O.primitive,H=!z&&(S===void 0?v.dispose!==null:S);if(!z){var E;m((E=v.__r3f)==null?void 0:E.objects,v,H),m(v.children,v,H)}if(delete v.__r3f,H&&v.dispose&&v.type!=="Scene"){const ne=()=>{try{v.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?Su.unstable_scheduleCallback(Su.unstable_IdlePriority,ne):ne()}mr(p)}}function w(p,v,S,I){var C;const O=(C=p.__r3f)==null?void 0:C.parent;if(!O)return;const k=a(v,S,p.__r3f.root);if(p.children){for(const E of p.children)E.__r3f&&c(k,E);p.children=p.children.filter(E=>!E.__r3f)}p.__r3f.objects.forEach(E=>c(k,E)),p.__r3f.objects=[],p.__r3f.autoRemovedBeforeAppend||d(O,p),k.parent&&(k.__r3f.autoRemovedBeforeAppend=!0),c(O,k),k.raycast&&k.__r3f.eventCount&&hl(k).getState().internal.interaction.push(k),[I,I.alternate].forEach(E=>{E!==null&&(E.stateNode=k,E.ref&&(typeof E.ref=="function"?E.ref(k):E.ref.current=k))})}const g=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Td({createInstance:a,removeChild:d,appendChild:c,appendInitialChild:c,insertBefore:f,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(p,v)=>{if(!v)return;const S=p.getState().scene;S.__r3f&&(S.__r3f.root=p,c(S,v))},removeChildFromContainer:(p,v)=>{v&&d(p.getState().scene,v)},insertInContainerBefore:(p,v,S)=>{if(!v||!S)return;const I=p.getState().scene;I.__r3f&&f(I,v,S)},getRootHostContext:()=>null,getChildHostContext:p=>p,finalizeInitialChildren(p){var v;return!!((v=p==null?void 0:p.__r3f)!=null?v:{}).handlers},prepareUpdate(p,v,S,I){var C;if(((C=p==null?void 0:p.__r3f)!=null?C:{}).primitive&&I.object&&I.object!==p)return[!0];{const{args:k=[],children:E,...z}=I,{args:H=[],children:ne,...W}=S;if(!Array.isArray(k))throw new Error("R3F: the args prop must be an array!");if(k.some((X,U)=>X!==H[U]))return[!0];const Q=uc(p,z,W,!0);return Q.changes.length?[!1,Q]:null}},commitUpdate(p,[v,S],I,C,O,k){v?w(p,I,O,k):ta(p,S)},commitMount(p,v,S,I){var C;const O=(C=p.__r3f)!=null?C:{};p.raycast&&O.handlers&&O.eventCount&&hl(p).getState().internal.interaction.push(p)},getPublicInstance:p=>p,prepareForCommit:()=>null,preparePortalMount:p=>hr(p.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(p){var v;const{attach:S,parent:I}=(v=p.__r3f)!=null?v:{};S&&I&&Ru(I,p,S),p.isObject3D&&(p.visible=!1),mr(p)},unhideInstance(p,v){var S;const{attach:I,parent:C}=(S=p.__r3f)!=null?S:{};I&&C&&ea(C,p,I),(p.isObject3D&&v.visible==null||v.visible)&&(p.visible=!0),mr(p)},createTextInstance:g,hideTextInstance:g,unhideTextInstance:g,getCurrentEventPriority:()=>i?i():gr.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Ye.fun(performance.now)?performance.now:Ye.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Ye.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Ye.fun(clearTimeout)?clearTimeout:void 0}),applyProps:ta}}var xu,_u;const $o=l=>"colorSpace"in l||"outputColorSpace"in l,rc=()=>{var l;return(l=Sa.ColorManagement)!=null?l:null},ic=l=>l&&l.isOrthographicCamera,zd=l=>l&&l.hasOwnProperty("current"),ni=typeof window<"u"&&((xu=window.document)!=null&&xu.createElement||((_u=window.navigator)==null?void 0:_u.product)==="ReactNative")?P.useLayoutEffect:P.useEffect;function lc(l){const i=P.useRef(l);return ni(()=>void(i.current=l),[l]),i}function Ld({set:l}){return ni(()=>(l(new Promise(()=>null)),()=>l(!1)),[l]),null}class oc extends P.Component{constructor(...i){super(...i),this.state={error:!1}}componentDidCatch(i){this.props.set(i)}render(){return this.state.error?null:this.props.children}}oc.getDerivedStateFromError=()=>({error:!0});const ac="__default",Eu=new Map,Od=l=>l&&!!l.memoized&&!!l.changes;function sc(l){var i;const a=typeof window<"u"?(i=window.devicePixelRatio)!=null?i:2:1;return Array.isArray(l)?Math.min(Math.max(l[0],a),l[1]):l}const Qr=l=>{var i;return(i=l.__r3f)==null?void 0:i.root.getState()};function hl(l){let i=l.__r3f.root;for(;i.getState().previousRoot;)i=i.getState().previousRoot;return i}const Ye={obj:l=>l===Object(l)&&!Ye.arr(l)&&typeof l!="function",fun:l=>typeof l=="function",str:l=>typeof l=="string",num:l=>typeof l=="number",boo:l=>typeof l=="boolean",und:l=>l===void 0,arr:l=>Array.isArray(l),equ(l,i,{arrays:a="shallow",objects:c="reference",strict:f=!0}={}){if(typeof l!=typeof i||!!l!=!!i)return!1;if(Ye.str(l)||Ye.num(l)||Ye.boo(l))return l===i;const m=Ye.obj(l);if(m&&c==="reference")return l===i;const d=Ye.arr(l);if(d&&a==="reference")return l===i;if((d||m)&&l===i)return!0;let w;for(w in l)if(!(w in i))return!1;if(m&&a==="shallow"&&c==="shallow"){for(w in f?i:l)if(!Ye.equ(l[w],i[w],{strict:f,objects:"reference"}))return!1}else for(w in f?i:l)if(l[w]!==i[w])return!1;if(Ye.und(w)){if(d&&l.length===0&&i.length===0||m&&Object.keys(l).length===0&&Object.keys(i).length===0)return!0;if(l!==i)return!1}return!0}};function Ad(l){const i={nodes:{},materials:{}};return l&&l.traverse(a=>{a.name&&(i.nodes[a.name]=a),a.material&&!i.materials[a.material.name]&&(i.materials[a.material.name]=a.material)}),i}function Fd(l){l.dispose&&l.type!=="Scene"&&l.dispose();for(const i in l)i.dispose==null||i.dispose(),delete l[i]}function hr(l,i){const a=l;return a.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...i},l}function pa(l,i){let a=l;if(i.includes("-")){const c=i.split("-"),f=c.pop();return a=c.reduce((m,d)=>m[d],l),{target:a,key:f}}else return{target:a,key:i}}const Mu=/-\d+$/;function ea(l,i,a){if(Ye.str(a)){if(Mu.test(a)){const m=a.replace(Mu,""),{target:d,key:w}=pa(l,m);Array.isArray(d[w])||(d[w]=[])}const{target:c,key:f}=pa(l,a);i.__r3f.previousAttach=c[f],c[f]=i}else i.__r3f.previousAttach=a(l,i)}function Ru(l,i,a){var c,f;if(Ye.str(a)){const{target:m,key:d}=pa(l,a),w=i.__r3f.previousAttach;w===void 0?delete m[d]:m[d]=w}else(c=i.__r3f)==null||c.previousAttach==null||c.previousAttach(l,i);(f=i.__r3f)==null||delete f.previousAttach}function uc(l,{children:i,key:a,ref:c,...f},{children:m,key:d,ref:w,...g}={},x=!1){const p=l.__r3f,v=Object.entries(f),S=[];if(x){const C=Object.keys(g);for(let O=0;O<C.length;O++)f.hasOwnProperty(C[O])||v.unshift([C[O],ac+"remove"])}v.forEach(([C,O])=>{var k;if((k=l.__r3f)!=null&&k.primitive&&C==="object"||Ye.equ(O,g[C]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(C))return S.push([C,O,!0,[]]);let E=[];C.includes("-")&&(E=C.split("-")),S.push([C,O,!1,E]);for(const z in f){const H=f[z];z.startsWith(`${C}-`)&&S.push([z,H,!1,z.split("-")])}});const I={...f};return p!=null&&p.memoizedProps&&p!=null&&p.memoizedProps.args&&(I.args=p.memoizedProps.args),p!=null&&p.memoizedProps&&p!=null&&p.memoizedProps.attach&&(I.attach=p.memoizedProps.attach),{memoized:I,changes:S}}function ta(l,i){var a;const c=l.__r3f,f=c==null?void 0:c.root,m=f==null||f.getState==null?void 0:f.getState(),{memoized:d,changes:w}=Od(i)?i:uc(l,i),g=c==null?void 0:c.eventCount;l.__r3f&&(l.__r3f.memoizedProps=d);for(let p=0;p<w.length;p++){let[v,S,I,C]=w[p];if($o(l)){const z="srgb",H="srgb-linear";v==="encoding"?(v="colorSpace",S=S===3001?z:H):v==="outputEncoding"&&(v="outputColorSpace",S=S===3001?z:H)}let O=l,k=O[v];if(C.length&&(k=C.reduce((E,z)=>E[z],l),!(k&&k.set))){const[E,...z]=C.reverse();O=z.reverse().reduce((H,ne)=>H[ne],l),v=E}if(S===ac+"remove")if(O.constructor){let E=Eu.get(O.constructor);E||(E=new O.constructor,Eu.set(O.constructor,E)),S=E[v]}else S=0;if(I&&c)S?c.handlers[v]=S:delete c.handlers[v],c.eventCount=Object.keys(c.handlers).length;else if(k&&k.set&&(k.copy||k instanceof Qo)){if(Array.isArray(S))k.fromArray?k.fromArray(S):k.set(...S);else if(k.copy&&S&&S.constructor&&k.constructor===S.constructor)k.copy(S);else if(S!==void 0){const E=k instanceof gl;!E&&k.setScalar?k.setScalar(S):k instanceof Qo&&S instanceof Qo?k.mask=S.mask:k.set(S),!rc()&&m&&!m.linear&&E&&k.convertSRGBToLinear()}}else if(O[v]=S,O[v]instanceof Xn&&O[v].format===wr&&O[v].type===vl&&m){const E=O[v];$o(E)&&$o(m.gl)?E.colorSpace=m.gl.outputColorSpace:E.encoding=m.gl.outputEncoding}mr(l)}if(c&&c.parent&&l.raycast&&g!==c.eventCount){const p=hl(l).getState().internal,v=p.interaction.indexOf(l);v>-1&&p.interaction.splice(v,1),c.eventCount&&p.interaction.push(l)}return!(w.length===1&&w[0][0]==="onUpdate")&&w.length&&(a=l.__r3f)!=null&&a.parent&&ha(l),l}function mr(l){var i,a;const c=(i=l.__r3f)==null||(a=i.root)==null||a.getState==null?void 0:a.getState();c&&c.internal.frames===0&&c.invalidate()}function ha(l){l.onUpdate==null||l.onUpdate(l)}function cc(l,i){l.manual||(ic(l)?(l.left=i.width/-2,l.right=i.width/2,l.top=i.height/2,l.bottom=i.height/-2):l.aspect=i.width/i.height,l.updateProjectionMatrix(),l.updateMatrixWorld())}function sl(l){return(l.eventObject||l.object).uuid+"/"+l.index+l.instanceId}function jd(){var l;const i=typeof self<"u"&&self||typeof window<"u"&&window;if(!i)return gr.DefaultEventPriority;switch((l=i.event)==null?void 0:l.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return gr.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return gr.ContinuousEventPriority;default:return gr.DefaultEventPriority}}function fc(l,i,a,c){const f=a.get(i);f&&(a.delete(i),a.size===0&&(l.delete(c),f.target.releasePointerCapture(c)))}function Dd(l,i){const{internal:a}=l.getState();a.interaction=a.interaction.filter(c=>c!==i),a.initialHits=a.initialHits.filter(c=>c!==i),a.hovered.forEach((c,f)=>{(c.eventObject===i||c.object===i)&&a.hovered.delete(f)}),a.capturedMap.forEach((c,f)=>{fc(a.capturedMap,i,c,f)})}function Ud(l){function i(g){const{internal:x}=l.getState(),p=g.offsetX-x.initialClick[0],v=g.offsetY-x.initialClick[1];return Math.round(Math.sqrt(p*p+v*v))}function a(g){return g.filter(x=>["Move","Over","Enter","Out","Leave"].some(p=>{var v;return(v=x.__r3f)==null?void 0:v.handlers["onPointer"+p]}))}function c(g,x){const p=l.getState(),v=new Set,S=[],I=x?x(p.internal.interaction):p.internal.interaction;for(let E=0;E<I.length;E++){const z=Qr(I[E]);z&&(z.raycaster.camera=void 0)}p.previousRoot||p.events.compute==null||p.events.compute(g,p);function C(E){const z=Qr(E);if(!z||!z.events.enabled||z.raycaster.camera===null)return[];if(z.raycaster.camera===void 0){var H;z.events.compute==null||z.events.compute(g,z,(H=z.previousRoot)==null?void 0:H.getState()),z.raycaster.camera===void 0&&(z.raycaster.camera=null)}return z.raycaster.camera?z.raycaster.intersectObject(E,!0):[]}let O=I.flatMap(C).sort((E,z)=>{const H=Qr(E.object),ne=Qr(z.object);return!H||!ne?E.distance-z.distance:ne.events.priority-H.events.priority||E.distance-z.distance}).filter(E=>{const z=sl(E);return v.has(z)?!1:(v.add(z),!0)});p.events.filter&&(O=p.events.filter(O,p));for(const E of O){let z=E.object;for(;z;){var k;(k=z.__r3f)!=null&&k.eventCount&&S.push({...E,eventObject:z}),z=z.parent}}if("pointerId"in g&&p.internal.capturedMap.has(g.pointerId))for(let E of p.internal.capturedMap.get(g.pointerId).values())v.has(sl(E.intersection))||S.push(E.intersection);return S}function f(g,x,p,v){const S=l.getState();if(g.length){const I={stopped:!1};for(const C of g){const O=Qr(C.object)||S,{raycaster:k,pointer:E,camera:z,internal:H}=O,ne=new Xe(E.x,E.y,0).unproject(z),W=J=>{var B,re;return(B=(re=H.capturedMap.get(J))==null?void 0:re.has(C.eventObject))!=null?B:!1},Q=J=>{const B={intersection:C,target:x.target};H.capturedMap.has(J)?H.capturedMap.get(J).set(C.eventObject,B):H.capturedMap.set(J,new Map([[C.eventObject,B]])),x.target.setPointerCapture(J)},X=J=>{const B=H.capturedMap.get(J);B&&fc(H.capturedMap,C.eventObject,B,J)};let U={};for(let J in x){let B=x[J];typeof B!="function"&&(U[J]=B)}let G={...C,...U,pointer:E,intersections:g,stopped:I.stopped,delta:p,unprojectedPoint:ne,ray:k.ray,camera:z,stopPropagation(){const J="pointerId"in x&&H.capturedMap.get(x.pointerId);if((!J||J.has(C.eventObject))&&(G.stopped=I.stopped=!0,H.hovered.size&&Array.from(H.hovered.values()).find(B=>B.eventObject===C.eventObject))){const B=g.slice(0,g.indexOf(C));m([...B,C])}},target:{hasPointerCapture:W,setPointerCapture:Q,releasePointerCapture:X},currentTarget:{hasPointerCapture:W,setPointerCapture:Q,releasePointerCapture:X},nativeEvent:x};if(v(G),I.stopped===!0)break}}return g}function m(g){const{internal:x}=l.getState();for(const p of x.hovered.values())if(!g.length||!g.find(v=>v.object===p.object&&v.index===p.index&&v.instanceId===p.instanceId)){const S=p.eventObject.__r3f,I=S==null?void 0:S.handlers;if(x.hovered.delete(sl(p)),S!=null&&S.eventCount){const C={...p,intersections:g};I.onPointerOut==null||I.onPointerOut(C),I.onPointerLeave==null||I.onPointerLeave(C)}}}function d(g,x){for(let p=0;p<x.length;p++){const v=x[p].__r3f;v==null||v.handlers.onPointerMissed==null||v.handlers.onPointerMissed(g)}}function w(g){switch(g){case"onPointerLeave":case"onPointerCancel":return()=>m([]);case"onLostPointerCapture":return x=>{const{internal:p}=l.getState();"pointerId"in x&&p.capturedMap.has(x.pointerId)&&requestAnimationFrame(()=>{p.capturedMap.has(x.pointerId)&&(p.capturedMap.delete(x.pointerId),m([]))})}}return function(p){const{onPointerMissed:v,internal:S}=l.getState();S.lastEvent.current=p;const I=g==="onPointerMove",C=g==="onClick"||g==="onContextMenu"||g==="onDoubleClick",k=c(p,I?a:void 0),E=C?i(p):0;g==="onPointerDown"&&(S.initialClick=[p.offsetX,p.offsetY],S.initialHits=k.map(H=>H.eventObject)),C&&!k.length&&E<=2&&(d(p,S.interaction),v&&v(p)),I&&m(k);function z(H){const ne=H.eventObject,W=ne.__r3f,Q=W==null?void 0:W.handlers;if(W!=null&&W.eventCount)if(I){if(Q.onPointerOver||Q.onPointerEnter||Q.onPointerOut||Q.onPointerLeave){const X=sl(H),U=S.hovered.get(X);U?U.stopped&&H.stopPropagation():(S.hovered.set(X,H),Q.onPointerOver==null||Q.onPointerOver(H),Q.onPointerEnter==null||Q.onPointerEnter(H))}Q.onPointerMove==null||Q.onPointerMove(H)}else{const X=Q[g];X?(!C||S.initialHits.includes(ne))&&(d(p,S.interaction.filter(U=>!S.initialHits.includes(U))),X(H)):C&&S.initialHits.includes(ne)&&d(p,S.interaction.filter(U=>!S.initialHits.includes(U)))}}f(k,p,E,z)}}return{handlePointer:w}}const Bd=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],dc=l=>!!(l!=null&&l.render),_a=P.createContext(null),Hd=(l,i)=>{const a=$u((w,g)=>{const x=new Xe,p=new Xe,v=new Xe;function S(E=g().camera,z=p,H=g().size){const{width:ne,height:W,top:Q,left:X}=H,U=ne/W;z instanceof Xe?v.copy(z):v.set(...z);const G=E.getWorldPosition(x).distanceTo(v);if(ic(E))return{width:ne/E.zoom,height:W/E.zoom,top:Q,left:X,factor:1,distance:G,aspect:U};{const J=E.fov*Math.PI/180,B=2*Math.tan(J/2)*G,re=B*(ne/W);return{width:re,height:B,top:Q,left:X,factor:ne/re,distance:G,aspect:U}}}let I;const C=E=>w(z=>({performance:{...z.performance,current:E}})),O=new Yu;return{set:w,get:g,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(E=1)=>l(g(),E),advance:(E,z)=>i(E,z,g()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Df,pointer:O,mouse:O,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const E=g();I&&clearTimeout(I),E.performance.current!==E.performance.min&&C(E.performance.min),I=setTimeout(()=>C(g().performance.max),E.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:S},setEvents:E=>w(z=>({...z,events:{...z.events,...E}})),setSize:(E,z,H,ne,W)=>{const Q=g().camera,X={width:E,height:z,top:ne||0,left:W||0,updateStyle:H};w(U=>({size:X,viewport:{...U.viewport,...S(Q,p,X)}}))},setDpr:E=>w(z=>{const H=sc(E);return{viewport:{...z.viewport,dpr:H,initialDpr:z.viewport.initialDpr||H}}}),setFrameloop:(E="always")=>{const z=g().clock;z.stop(),z.elapsedTime=0,E!=="never"&&(z.start(),z.elapsedTime=0),w(()=>({frameloop:E}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:P.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(E,z,H)=>{const ne=g().internal;return ne.priority=ne.priority+(z>0?1:0),ne.subscribers.push({ref:E,priority:z,store:H}),ne.subscribers=ne.subscribers.sort((W,Q)=>W.priority-Q.priority),()=>{const W=g().internal;W!=null&&W.subscribers&&(W.priority=W.priority-(z>0?1:0),W.subscribers=W.subscribers.filter(Q=>Q.ref!==E))}}}}}),c=a.getState();let f=c.size,m=c.viewport.dpr,d=c.camera;return a.subscribe(()=>{const{camera:w,size:g,viewport:x,gl:p,set:v}=a.getState();if(g.width!==f.width||g.height!==f.height||x.dpr!==m){var S;f=g,m=x.dpr,cc(w,g),p.setPixelRatio(x.dpr);const I=(S=g.updateStyle)!=null?S:typeof HTMLCanvasElement<"u"&&p.domElement instanceof HTMLCanvasElement;p.setSize(g.width,g.height,I)}w!==d&&(d=w,v(I=>({viewport:{...I.viewport,...I.viewport.getCurrentViewport(w)}})))}),a.subscribe(w=>l(w)),a};let ul,Gd=new Set,Wd=new Set,Zd=new Set;function na(l,i){if(l.size)for(const{callback:a}of l.values())a(i)}function Yr(l,i){switch(l){case"before":return na(Gd,i);case"after":return na(Wd,i);case"tail":return na(Zd,i)}}let ra,ia;function la(l,i,a){let c=i.clock.getDelta();for(i.frameloop==="never"&&typeof l=="number"&&(c=l-i.clock.elapsedTime,i.clock.oldTime=i.clock.elapsedTime,i.clock.elapsedTime=l),ra=i.internal.subscribers,ul=0;ul<ra.length;ul++)ia=ra[ul],ia.ref.current(ia.store.getState(),c,a);return!i.internal.priority&&i.gl.render&&i.gl.render(i.scene,i.camera),i.internal.frames=Math.max(0,i.internal.frames-1),i.frameloop==="always"?1:i.internal.frames}function Vd(l){let i=!1,a=!1,c,f,m;function d(x){f=requestAnimationFrame(d),i=!0,c=0,Yr("before",x),a=!0;for(const v of l.values()){var p;m=v.store.getState(),m.internal.active&&(m.frameloop==="always"||m.internal.frames>0)&&!((p=m.gl.xr)!=null&&p.isPresenting)&&(c+=la(x,m))}if(a=!1,Yr("after",x),c===0)return Yr("tail",x),i=!1,cancelAnimationFrame(f)}function w(x,p=1){var v;if(!x)return l.forEach(S=>w(S.store.getState(),p));(v=x.gl.xr)!=null&&v.isPresenting||!x.internal.active||x.frameloop==="never"||(p>1?x.internal.frames=Math.min(60,x.internal.frames+p):a?x.internal.frames=2:x.internal.frames=1,i||(i=!0,requestAnimationFrame(d)))}function g(x,p=!0,v,S){if(p&&Yr("before",x),v)la(x,v,S);else for(const I of l.values())la(x,I.store.getState());p&&Yr("after",x)}return{loop:d,invalidate:w,advance:g}}function Ea(){const l=P.useContext(_a);if(!l)throw new Error("R3F: Hooks can only be used within the Canvas component!");return l}function un(l=a=>a,i){return Ea()(l,i)}function gn(l,i=0){const a=Ea(),c=a.getState().internal.subscribe,f=lc(l);return ni(()=>c(f,i,a),[i,c,a]),null}const Cu=new WeakMap;function pc(l,i){return function(a,...c){let f=Cu.get(a);return f||(f=new a,Cu.set(a,f)),l&&l(f),Promise.all(c.map(m=>new Promise((d,w)=>f.load(m,g=>{g.scene&&Object.assign(g,Ad(g.scene)),d(g)},i,g=>w(new Error(`Could not load ${m}: ${g==null?void 0:g.message}`))))))}}function Sr(l,i,a,c){const f=Array.isArray(i)?i:[i],m=Ed(pc(a,c),[l,...f],{equal:Ye.equ});return Array.isArray(i)?m:m[0]}Sr.preload=function(l,i,a){const c=Array.isArray(i)?i:[i];return Md(pc(a),[l,...c])};Sr.clear=function(l,i){const a=Array.isArray(i)?i:[i];return Rd([l,...a])};const xr=new Map,{invalidate:Pu,advance:Iu}=Vd(xr),{reconciler:$r,applyProps:kn}=Nd(xr,jd),pr={objects:"shallow",strict:!1},Qd=(l,i)=>{const a=typeof l=="function"?l(i):l;return dc(a)?a:new Qu({powerPreference:"high-performance",canvas:i,antialias:!0,alpha:!0,...l})};function Yd(l,i){const a=typeof HTMLCanvasElement<"u"&&l instanceof HTMLCanvasElement;if(i){const{width:c,height:f,top:m,left:d,updateStyle:w=a}=i;return{width:c,height:f,top:m,left:d,updateStyle:w}}else if(typeof HTMLCanvasElement<"u"&&l instanceof HTMLCanvasElement&&l.parentElement){const{width:c,height:f,top:m,left:d}=l.parentElement.getBoundingClientRect();return{width:c,height:f,top:m,left:d,updateStyle:a}}else if(typeof OffscreenCanvas<"u"&&l instanceof OffscreenCanvas)return{width:l.width,height:l.height,top:0,left:0,updateStyle:a};return{width:0,height:0,top:0,left:0}}function Xd(l){const i=xr.get(l),a=i==null?void 0:i.fiber,c=i==null?void 0:i.store;i&&console.warn("R3F.createRoot should only be called once!");const f=typeof reportError=="function"?reportError:console.error,m=c||Hd(Pu,Iu),d=a||$r.createContainer(m,gr.ConcurrentRoot,null,!1,null,"",f,null);i||xr.set(l,{fiber:d,store:m});let w,g=!1,x;return{configure(p={}){let{gl:v,size:S,scene:I,events:C,onCreated:O,shadows:k=!1,linear:E=!1,flat:z=!1,legacy:H=!1,orthographic:ne=!1,frameloop:W="always",dpr:Q=[1,2],performance:X,raycaster:U,camera:G,onPointerMissed:J}=p,B=m.getState(),re=B.gl;B.gl||B.set({gl:re=Qd(v,l)});let ce=B.raycaster;ce||B.set({raycaster:ce=new Zu});const{params:fe,...xe}=U||{};if(Ye.equ(xe,ce,pr)||kn(ce,{...xe}),Ye.equ(fe,ce.params,pr)||kn(ce,{params:{...ce.params,...fe}}),!B.camera||B.camera===x&&!Ye.equ(x,G,pr)){x=G;const Y=G instanceof jf,pe=Y?G:ne?new Vu(0,0,0,0,.1,1e3):new Nf(75,0,.1,1e3);Y||(pe.position.z=5,G&&(kn(pe,G),("aspect"in G||"left"in G||"right"in G||"bottom"in G||"top"in G)&&(pe.manual=!0,pe.updateProjectionMatrix())),!B.camera&&!(G!=null&&G.rotation)&&pe.lookAt(0,0,0)),B.set({camera:pe}),ce.camera=pe}if(!B.scene){let Y;I instanceof ml?Y=I:(Y=new ml,I&&kn(Y,I)),B.set({scene:hr(Y)})}if(!B.xr){var ie;const Y=(we,Ve)=>{const tt=m.getState();tt.frameloop!=="never"&&Iu(we,!0,tt,Ve)},pe=()=>{const we=m.getState();we.gl.xr.enabled=we.gl.xr.isPresenting,we.gl.xr.setAnimationLoop(we.gl.xr.isPresenting?Y:null),we.gl.xr.isPresenting||Pu(we)},me={connect(){const we=m.getState().gl;we.xr.addEventListener("sessionstart",pe),we.xr.addEventListener("sessionend",pe)},disconnect(){const we=m.getState().gl;we.xr.removeEventListener("sessionstart",pe),we.xr.removeEventListener("sessionend",pe)}};typeof((ie=re.xr)==null?void 0:ie.addEventListener)=="function"&&me.connect(),B.set({xr:me})}if(re.shadowMap){const Y=re.shadowMap.enabled,pe=re.shadowMap.type;if(re.shadowMap.enabled=!!k,Ye.boo(k))re.shadowMap.type=Vo;else if(Ye.str(k)){var Se;const me={basic:Of,percentage:Lf,soft:Vo,variance:zf};re.shadowMap.type=(Se=me[k])!=null?Se:Vo}else Ye.obj(k)&&Object.assign(re.shadowMap,k);(Y!==re.shadowMap.enabled||pe!==re.shadowMap.type)&&(re.shadowMap.needsUpdate=!0)}const V=rc();V&&("enabled"in V?V.enabled=!H:"legacyMode"in V&&(V.legacyMode=H)),g||kn(re,{outputEncoding:E?3e3:3001,toneMapping:z?Af:Ff}),B.legacy!==H&&B.set(()=>({legacy:H})),B.linear!==E&&B.set(()=>({linear:E})),B.flat!==z&&B.set(()=>({flat:z})),v&&!Ye.fun(v)&&!dc(v)&&!Ye.equ(v,re,pr)&&kn(re,v),C&&!B.events.handlers&&B.set({events:C(m)});const ae=Yd(l,S);return Ye.equ(ae,B.size,pr)||B.setSize(ae.width,ae.height,ae.updateStyle,ae.top,ae.left),Q&&B.viewport.dpr!==sc(Q)&&B.setDpr(Q),B.frameloop!==W&&B.setFrameloop(W),B.onPointerMissed||B.set({onPointerMissed:J}),X&&!Ye.equ(X,B.performance,pr)&&B.set(Y=>({performance:{...Y.performance,...X}})),w=O,g=!0,this},render(p){return g||this.configure(),$r.updateContainer(T.jsx(qd,{store:m,children:p,onCreated:w,rootElement:l}),d,null,()=>{}),m},unmount(){hc(l)}}}function qd({store:l,children:i,onCreated:a,rootElement:c}){return ni(()=>{const f=l.getState();f.set(m=>({internal:{...m.internal,active:!0}})),a&&a(f),l.getState().events.connected||f.events.connect==null||f.events.connect(c)},[]),T.jsx(_a.Provider,{value:l,children:i})}function hc(l,i){const a=xr.get(l),c=a==null?void 0:a.fiber;if(c){const f=a==null?void 0:a.store.getState();f&&(f.internal.active=!1),$r.updateContainer(null,c,null,()=>{f&&setTimeout(()=>{try{var m,d,w,g;f.events.disconnect==null||f.events.disconnect(),(m=f.gl)==null||(d=m.renderLists)==null||d.dispose==null||d.dispose(),(w=f.gl)==null||w.forceContextLoss==null||w.forceContextLoss(),(g=f.gl)!=null&&g.xr&&f.xr.disconnect(),Fd(f),xr.delete(l)}catch{}},500)})}}function Kd(l,i,a){return T.jsx(Jd,{children:l,container:i,state:a},i.uuid)}function Jd({state:l={},children:i,container:a}){const{events:c,size:f,...m}=l,d=Ea(),[w]=P.useState(()=>new Zu),[g]=P.useState(()=>new Yu),x=P.useCallback((v,S)=>{const I={...v};Object.keys(v).forEach(O=>{(Bd.includes(O)||v[O]!==S[O]&&S[O])&&delete I[O]});let C;if(S&&f){const O=S.camera;C=v.viewport.getCurrentViewport(O,new Xe,f),O!==v.camera&&cc(O,f)}return{...I,scene:a,raycaster:w,pointer:g,mouse:g,previousRoot:d,events:{...v.events,...S==null?void 0:S.events,...c},size:{...v.size,...f},viewport:{...v.viewport,...C},...m}},[l]),[p]=P.useState(()=>{const v=d.getState();return $u((I,C)=>({...v,scene:a,raycaster:w,pointer:g,mouse:g,previousRoot:d,events:{...v.events,...c},size:{...v.size,...f},...m,set:I,get:C,setEvents:O=>I(k=>({...k,events:{...k.events,...O}}))}))});return P.useEffect(()=>{const v=d.subscribe(S=>p.setState(I=>x(S,I)));return()=>{v()}},[x]),P.useEffect(()=>{p.setState(v=>x(d.getState(),v))},[x]),P.useEffect(()=>()=>{p.destroy()},[]),T.jsx(T.Fragment,{children:$r.createPortal(T.jsx(_a.Provider,{value:p,children:i}),p,null)})}$r.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:P.version});const oa={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function bd(l){const{handlePointer:i}=Ud(l);return{priority:1,enabled:!0,compute(a,c,f){c.pointer.set(a.offsetX/c.size.width*2-1,-(a.offsetY/c.size.height)*2+1),c.raycaster.setFromCamera(c.pointer,c.camera)},connected:void 0,handlers:Object.keys(oa).reduce((a,c)=>({...a,[c]:i(c)}),{}),update:()=>{var a;const{events:c,internal:f}=l.getState();(a=f.lastEvent)!=null&&a.current&&c.handlers&&c.handlers.onPointerMove(f.lastEvent.current)},connect:a=>{var c;const{set:f,events:m}=l.getState();m.disconnect==null||m.disconnect(),f(d=>({events:{...d.events,connected:a}})),Object.entries((c=m.handlers)!=null?c:[]).forEach(([d,w])=>{const[g,x]=oa[d];a.addEventListener(g,w,{passive:x})})},disconnect:()=>{const{set:a,events:c}=l.getState();if(c.connected){var f;Object.entries((f=c.handlers)!=null?f:[]).forEach(([m,d])=>{if(c&&c.connected instanceof HTMLElement){const[w]=oa[m];c.connected.removeEventListener(w,d)}}),a(m=>({events:{...m.events,connected:void 0}}))}}}}var aa,ku;function $d(){if(ku)return aa;ku=1;function l(i,a,c){var f,m,d,w,g;a==null&&(a=100);function x(){var v=Date.now()-w;v<a&&v>=0?f=setTimeout(x,a-v):(f=null,c||(g=i.apply(d,m),d=m=null))}var p=function(){d=this,m=arguments,w=Date.now();var v=c&&!f;return f||(f=setTimeout(x,a)),v&&(g=i.apply(d,m),d=m=null),g};return p.clear=function(){f&&(clearTimeout(f),f=null)},p.flush=function(){f&&(g=i.apply(d,m),d=m=null,clearTimeout(f),f=null)},p}return l.debounce=l,aa=l,aa}var ep=$d();const Tu=wl(ep);var tp=Object.defineProperty,np=Object.defineProperties,rp=Object.getOwnPropertyDescriptors,Nu=Object.getOwnPropertySymbols,ip=Object.prototype.hasOwnProperty,lp=Object.prototype.propertyIsEnumerable,zu=(l,i,a)=>i in l?tp(l,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[i]=a,Lu=(l,i)=>{for(var a in i||(i={}))ip.call(i,a)&&zu(l,a,i[a]);if(Nu)for(var a of Nu(i))lp.call(i,a)&&zu(l,a,i[a]);return l},op=(l,i)=>np(l,rp(i)),Ou,Au;typeof window<"u"&&((Ou=window.document)!=null&&Ou.createElement||((Au=window.navigator)==null?void 0:Au.product)==="ReactNative")?P.useLayoutEffect:P.useEffect;function mc(l,i,a){if(!l)return;if(a(l)===!0)return l;let c=l.child;for(;c;){const f=mc(c,i,a);if(f)return f;c=c.sibling}}function vc(l){try{return Object.defineProperties(l,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return l}}const Fu=console.error;console.error=function(){const l=[...arguments].join("");if(l!=null&&l.startsWith("Warning:")&&l.includes("useContext")){console.error=Fu;return}return Fu.apply(this,arguments)};const Ma=vc(P.createContext(null));class gc extends P.Component{render(){return P.createElement(Ma.Provider,{value:this._reactInternals},this.props.children)}}function ap(){const l=P.useContext(Ma);if(l===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const i=P.useId();return P.useMemo(()=>{for(const c of[l,l==null?void 0:l.alternate]){if(!c)continue;const f=mc(c,!1,m=>{let d=m.memoizedState;for(;d;){if(d.memoizedState===i)return!0;d=d.next}});if(f)return f}},[l,i])}function sp(){const l=ap(),[i]=P.useState(()=>new Map);i.clear();let a=l;for(;a;){if(a.type&&typeof a.type=="object"){const f=a.type._context===void 0&&a.type.Provider===a.type?a.type:a.type._context;f&&f!==Ma&&!i.has(f)&&i.set(f,P.useContext(vc(f)))}a=a.return}return i}function up(){const l=sp();return P.useMemo(()=>Array.from(l.keys()).reduce((i,a)=>c=>P.createElement(i,null,P.createElement(a.Provider,op(Lu({},c),{value:l.get(a)}))),i=>P.createElement(gc,Lu({},i))),[l])}function cp({debounce:l,scroll:i,polyfill:a,offsetSize:c}={debounce:0,scroll:!1,offsetSize:!1}){const f=a||typeof window<"u"&&window.ResizeObserver,[m,d]=P.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!f)return m.width=1280,m.height=800,[()=>{},m,()=>{}];const w=P.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:m}),g=l?typeof l=="number"?l:l.scroll:null,x=l?typeof l=="number"?l:l.resize:null,p=P.useRef(!1);P.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[v,S,I]=P.useMemo(()=>{const E=()=>{if(!w.current.element)return;const{left:z,top:H,width:ne,height:W,bottom:Q,right:X,x:U,y:G}=w.current.element.getBoundingClientRect(),J={left:z,top:H,width:ne,height:W,bottom:Q,right:X,x:U,y:G};w.current.element instanceof HTMLElement&&c&&(J.height=w.current.element.offsetHeight,J.width=w.current.element.offsetWidth),Object.freeze(J),p.current&&!hp(w.current.lastBounds,J)&&d(w.current.lastBounds=J)};return[E,x?Tu(E,x):E,g?Tu(E,g):E]},[d,c,g,x]);function C(){w.current.scrollContainers&&(w.current.scrollContainers.forEach(E=>E.removeEventListener("scroll",I,!0)),w.current.scrollContainers=null),w.current.resizeObserver&&(w.current.resizeObserver.disconnect(),w.current.resizeObserver=null)}function O(){w.current.element&&(w.current.resizeObserver=new f(I),w.current.resizeObserver.observe(w.current.element),i&&w.current.scrollContainers&&w.current.scrollContainers.forEach(E=>E.addEventListener("scroll",I,{capture:!0,passive:!0})))}const k=E=>{!E||E===w.current.element||(C(),w.current.element=E,w.current.scrollContainers=yc(E),O())};return dp(I,!!i),fp(S),P.useEffect(()=>{C(),O()},[i,I,S]),P.useEffect(()=>C,[]),[k,m,v]}function fp(l){P.useEffect(()=>{const i=l;return window.addEventListener("resize",i),()=>void window.removeEventListener("resize",i)},[l])}function dp(l,i){P.useEffect(()=>{if(i){const a=l;return window.addEventListener("scroll",a,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",a,!0)}},[l,i])}function yc(l){const i=[];if(!l||l===document.body)return i;const{overflow:a,overflowX:c,overflowY:f}=window.getComputedStyle(l);return[a,c,f].some(m=>m==="auto"||m==="scroll")&&i.push(l),[...i,...yc(l.parentElement)]}const pp=["x","y","top","bottom","left","right","width","height"],hp=(l,i)=>pp.every(a=>l[a]===i[a]),mp=P.forwardRef(function({children:i,fallback:a,resize:c,style:f,gl:m,events:d=bd,eventSource:w,eventPrefix:g,shadows:x,linear:p,flat:v,legacy:S,orthographic:I,frameloop:C,dpr:O,performance:k,raycaster:E,camera:z,scene:H,onPointerMissed:ne,onCreated:W,...Q},X){P.useMemo(()=>xa(Hf),[]);const U=up(),[G,J]=cp({scroll:!0,debounce:{scroll:50,resize:0},...c}),B=P.useRef(null),re=P.useRef(null);P.useImperativeHandle(X,()=>B.current);const ce=lc(ne),[fe,xe]=P.useState(!1),[ie,Se]=P.useState(!1);if(fe)throw fe;if(ie)throw ie;const V=P.useRef(null);ni(()=>{const Y=B.current;J.width>0&&J.height>0&&Y&&(V.current||(V.current=Xd(Y)),V.current.configure({gl:m,events:d,shadows:x,linear:p,flat:v,legacy:S,orthographic:I,frameloop:C,dpr:O,performance:k,raycaster:E,camera:z,scene:H,size:J,onPointerMissed:(...pe)=>ce.current==null?void 0:ce.current(...pe),onCreated:pe=>{pe.events.connect==null||pe.events.connect(w?zd(w)?w.current:w:re.current),g&&pe.setEvents({compute:(me,we)=>{const Ve=me[g+"X"],tt=me[g+"Y"];we.pointer.set(Ve/we.size.width*2-1,-(tt/we.size.height)*2+1),we.raycaster.setFromCamera(we.pointer,we.camera)}}),W==null||W(pe)}}),V.current.render(T.jsx(U,{children:T.jsx(oc,{set:Se,children:T.jsx(P.Suspense,{fallback:T.jsx(Ld,{set:xe}),children:i})})})))}),P.useEffect(()=>{const Y=B.current;if(Y)return()=>hc(Y)},[]);const ae=w?"none":"auto";return T.jsx("div",{ref:re,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ae,...f},...Q,children:T.jsx("div",{ref:G,style:{width:"100%",height:"100%"},children:T.jsx("canvas",{ref:B,style:{display:"block"},children:a})})})}),vp=P.forwardRef(function(i,a){return T.jsx(gc,{children:T.jsx(mp,{...i,ref:a})})});/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/var mt=(l=>(l.LOADING="LOADING",l.IDLE="IDLE",l.PLAYING="PLAYING",l.GAME_OVER="GAME_OVER",l.VICTORY="VICTORY",l))(mt||{}),Tn=(l=>(l[l.UP=0]="UP",l[l.DOWN=1]="DOWN",l[l.LEFT=2]="LEFT",l[l.RIGHT=3]="RIGHT",l[l.ANY=4]="ANY",l))(Tn||{});const Kn={left:"#3b82f6",right:"#ef4444"};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const gp=-30,Xr=0,yp=5,sa=4,cl=.8,an=.5,wc=[-1.5*cl,-.5*cl,.5*cl,1.5*cl],Sc=[.8,1.6,2.4],wp="https://commondatastorage.googleapis.com/codeskulptor-demos/riceracer_assets/music/race2.ogg",xc=140,Sp=60/xc,xp=()=>{const l=[];let i=0;const a=400;for(let c=12;c<a;c++){const f=c*Sp;if(c%4!==0||Math.random()>.6)continue;const m=Math.random()>.5?"left":"right",d=Math.floor(Math.random()*4),w=Math.floor(Math.random()*3),g=Tn.ANY;l.push({id:`note-${i++}`,time:f,lineIndex:d,lineLayer:w,type:m,cutDirection:g,requiresGrip:Math.random()>.7})}return l.sort((c,f)=>c.time-f.time)},ju=xp(),_p={[Tn.UP]:new Xe(0,1,0),[Tn.DOWN]:new Xe(0,-1,0),[Tn.LEFT]:new Xe(-1,0,0),[Tn.RIGHT]:new Xe(1,0,0),[Tn.ANY]:new Xe(0,0,0)};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const Ep=(l,i)=>{const m=(.5-l)*5,d=(1-i)*3.5-3.5/2+.8,w=-Math.max(0,d*.2);return new Xe(m,Math.max(.1,d),w)},Mp=l=>{let i=0;const a=[{tip:8,pip:6},{tip:12,pip:10},{tip:16,pip:14},{tip:20,pip:18}];for(const c of a){const f=l[c.tip],m=l[c.pip];f.y>m.y+.02&&i++}return i===4},Rp=l=>{const[i,a]=P.useState(!1),[c,f]=P.useState(null),m=P.useRef({left:null,right:null,lastLeft:null,lastRight:null,leftVelocity:new Xe(0,0,0),rightVelocity:new Xe(0,0,0),leftGripping:!1,rightGripping:!1,lastTimestamp:0}),d=P.useRef(null),w=P.useRef(null),g=P.useRef(0);return P.useEffect(()=>{let x=!0;const p=async()=>{try{const C=await fd.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.14/wasm");if(!x)return;const O=await dd.createFromOptions(C,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/hand_landmarker/hand_landmarker/float16/1/hand_landmarker.task",delegate:"GPU"},runningMode:"VIDEO",numHands:2,minHandDetectionConfidence:.5,minHandPresenceConfidence:.5,minTrackingConfidence:.5});if(!x){O.close();return}w.current=O,v()}catch(C){console.error("Error initializing MediaPipe:",C),f(`Failed to load hand tracking: ${C.message}`)}},v=async()=>{try{const C=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}}});l.current&&x&&(l.current.srcObject=C,l.current.onloadeddata=()=>{x&&(a(!0),S())})}catch(C){console.error("Camera Error:",C),f("Could not access camera.")}},S=()=>{if(!l.current||!w.current||!x)return;const C=l.current;if(C.videoWidth>0&&C.videoHeight>0){let O=performance.now();try{const k=w.current.detectForVideo(C,O);d.current=k,I(k)}catch(k){console.warn("Detection failed this frame",k)}}g.current=requestAnimationFrame(S)},I=C=>{const O=performance.now(),k=(O-m.current.lastTimestamp)/1e3;m.current.lastTimestamp=O;let E=null,z=null,H=!1,ne=!1;if(C.landmarks)for(let X=0;X<C.landmarks.length;X++){const U=C.landmarks[X];if(!C.handedness||!C.handedness[X]||!C.handedness[X][0])continue;const J=C.handedness[X][0].categoryName==="Right",B=U[8],re=Ep(B.x,B.y),ce=Mp(U);J?(z=re,ne=ce):(E=re,H=ce)}const W=m.current,Q=.6;E?(W.left&&(E.lerpVectors(W.left,E,Q),k>.001&&W.leftVelocity.subVectors(E,W.left).divideScalar(k)),W.lastLeft=W.left?W.left.clone():E.clone(),W.left=E,W.leftGripping=H):(W.left=null,W.leftGripping=!1),z?(W.right&&(z.lerpVectors(W.right,z,Q),k>.001&&W.rightVelocity.subVectors(z,W.right).divideScalar(k)),W.lastRight=W.right?W.right.clone():z.clone(),W.right=z,W.rightGripping=ne):(W.right=null,W.rightGripping=!1)};return p(),()=>{x=!1,g.current&&cancelAnimationFrame(g.current),w.current&&w.current.close(),l.current&&l.current.srcObject&&l.current.srcObject.getTracks().forEach(O=>O.stop())}},[l]),{isCameraReady:i,handPositionsRef:m,lastResultsRef:d,error:c}};function Jn(){return Jn=Object.assign?Object.assign.bind():function(l){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var c in a)({}).hasOwnProperty.call(a,c)&&(l[c]=a[c])}return l},Jn.apply(null,arguments)}const _c=parseInt(Xu.replace(/\D+/g,""));var Vt=Uint8Array,zn=Uint16Array,ma=Uint32Array,Ec=new Vt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Mc=new Vt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Cp=new Vt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Rc=function(l,i){for(var a=new zn(31),c=0;c<31;++c)a[c]=i+=1<<l[c-1];for(var f=new ma(a[30]),c=1;c<30;++c)for(var m=a[c];m<a[c+1];++m)f[m]=m-a[c]<<5|c;return[a,f]},Cc=Rc(Ec,2),Pc=Cc[0],Pp=Cc[1];Pc[28]=258,Pp[258]=28;var Ip=Rc(Mc,0),kp=Ip[0],va=new zn(32768);for(var qe=0;qe<32768;++qe){var In=(qe&43690)>>>1|(qe&21845)<<1;In=(In&52428)>>>2|(In&13107)<<2,In=(In&61680)>>>4|(In&3855)<<4,va[qe]=((In&65280)>>>8|(In&255)<<8)>>>1}var br=(function(l,i,a){for(var c=l.length,f=0,m=new zn(i);f<c;++f)++m[l[f]-1];var d=new zn(i);for(f=0;f<i;++f)d[f]=d[f-1]+m[f-1]<<1;var w;if(a){w=new zn(1<<i);var g=15-i;for(f=0;f<c;++f)if(l[f])for(var x=f<<4|l[f],p=i-l[f],v=d[l[f]-1]++<<p,S=v|(1<<p)-1;v<=S;++v)w[va[v]>>>g]=x}else for(w=new zn(c),f=0;f<c;++f)l[f]&&(w[f]=va[d[l[f]-1]++]>>>15-l[f]);return w}),ri=new Vt(288);for(var qe=0;qe<144;++qe)ri[qe]=8;for(var qe=144;qe<256;++qe)ri[qe]=9;for(var qe=256;qe<280;++qe)ri[qe]=7;for(var qe=280;qe<288;++qe)ri[qe]=8;var Ic=new Vt(32);for(var qe=0;qe<32;++qe)Ic[qe]=5;var Tp=br(ri,9,1),Np=br(Ic,5,1),ua=function(l){for(var i=l[0],a=1;a<l.length;++a)l[a]>i&&(i=l[a]);return i},Jt=function(l,i,a){var c=i/8|0;return(l[c]|l[c+1]<<8)>>(i&7)&a},ca=function(l,i){var a=i/8|0;return(l[a]|l[a+1]<<8|l[a+2]<<16)>>(i&7)},zp=function(l){return(l/8|0)+(l&7&&1)},Lp=function(l,i,a){(a==null||a>l.length)&&(a=l.length);var c=new(l instanceof zn?zn:l instanceof ma?ma:Vt)(a-i);return c.set(l.subarray(i,a)),c},Op=function(l,i,a){var c=l.length;if(!c||a&&!a.l&&c<5)return i||new Vt(0);var f=!i||a,m=!a||a.i;a||(a={}),i||(i=new Vt(c*3));var d=function(Ie){var st=i.length;if(Ie>st){var Yt=new Vt(Math.max(st*2,Ie));Yt.set(i),i=Yt}},w=a.f||0,g=a.p||0,x=a.b||0,p=a.l,v=a.d,S=a.m,I=a.n,C=c*8;do{if(!p){a.f=w=Jt(l,g,1);var O=Jt(l,g+1,3);if(g+=3,O)if(O==1)p=Tp,v=Np,S=9,I=5;else if(O==2){var H=Jt(l,g,31)+257,ne=Jt(l,g+10,15)+4,W=H+Jt(l,g+5,31)+1;g+=14;for(var Q=new Vt(W),X=new Vt(19),U=0;U<ne;++U)X[Cp[U]]=Jt(l,g+U*3,7);g+=ne*3;for(var G=ua(X),J=(1<<G)-1,B=br(X,G,1),U=0;U<W;){var re=B[Jt(l,g,J)];g+=re&15;var k=re>>>4;if(k<16)Q[U++]=k;else{var ce=0,fe=0;for(k==16?(fe=3+Jt(l,g,3),g+=2,ce=Q[U-1]):k==17?(fe=3+Jt(l,g,7),g+=3):k==18&&(fe=11+Jt(l,g,127),g+=7);fe--;)Q[U++]=ce}}var xe=Q.subarray(0,H),ie=Q.subarray(H);S=ua(xe),I=ua(ie),p=br(xe,S,1),v=br(ie,I,1)}else throw"invalid block type";else{var k=zp(g)+4,E=l[k-4]|l[k-3]<<8,z=k+E;if(z>c){if(m)throw"unexpected EOF";break}f&&d(x+E),i.set(l.subarray(k,z),x),a.b=x+=E,a.p=g=z*8;continue}if(g>C){if(m)throw"unexpected EOF";break}}f&&d(x+131072);for(var Se=(1<<S)-1,V=(1<<I)-1,ae=g;;ae=g){var ce=p[ca(l,g)&Se],Y=ce>>>4;if(g+=ce&15,g>C){if(m)throw"unexpected EOF";break}if(!ce)throw"invalid length/literal";if(Y<256)i[x++]=Y;else if(Y==256){ae=g,p=null;break}else{var pe=Y-254;if(Y>264){var U=Y-257,me=Ec[U];pe=Jt(l,g,(1<<me)-1)+Pc[U],g+=me}var we=v[ca(l,g)&V],Ve=we>>>4;if(!we)throw"invalid distance";g+=we&15;var ie=kp[Ve];if(Ve>3){var me=Mc[Ve];ie+=ca(l,g)&(1<<me)-1,g+=me}if(g>C){if(m)throw"unexpected EOF";break}f&&d(x+131072);for(var tt=x+pe;x<tt;x+=4)i[x]=i[x-ie],i[x+1]=i[x+1-ie],i[x+2]=i[x+2-ie],i[x+3]=i[x+3-ie];x=tt}}a.l=p,a.p=ae,a.b=x,p&&(w=1,a.m=S,a.d=v,a.n=I)}while(!w);return x==i.length?i:Lp(i,0,x)},Ap=new Vt(0),Fp=function(l){if((l[0]&15)!=8||l[0]>>>4>7||(l[0]<<8|l[1])%31)throw"invalid zlib data";if(l[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function fl(l,i){return Op((Fp(l),l.subarray(2,-4)),i)}var jp=typeof TextDecoder<"u"&&new TextDecoder,Dp=0;try{jp.decode(Ap,{stream:!0}),Dp=1}catch{}const Up=l=>l&&l.isCubeTexture;class Bp extends ya{constructor(i,a){var c,f;const m=Up(i),w=((f=m?(c=i.image[0])==null?void 0:c.width:i.image.width)!=null?f:1024)/4,g=Math.floor(Math.log2(w)),x=Math.pow(2,g),p=3*Math.max(x,112),v=4*x,S=[m?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/p}`,`#define CUBEUV_TEXEL_HEIGHT ${1/v}`,`#define CUBEUV_MAX_MIP ${g}.0`],I=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,C=S.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${_c>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,O={map:{value:i},height:{value:(a==null?void 0:a.height)||15},radius:{value:(a==null?void 0:a.radius)||100}},k=new Gf(1,16),E=new ti({uniforms:O,fragmentShader:C,vertexShader:I,side:qu});super(k,E)}set radius(i){this.material.uniforms.radius.value=i}get radius(){return this.material.uniforms.radius.value}set height(i){this.material.uniforms.height.value=i}get height(){return this.material.uniforms.height.value}}class Hp extends Ku{constructor(i){super(i),this.type=At}parse(i){const d=function(U,G){switch(U){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(G||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(G||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(G||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(G||""))}},v=function(U,G,J){G=G||1024;let re=U.pos,ce=-1,fe=0,xe="",ie=String.fromCharCode.apply(null,new Uint16Array(U.subarray(re,re+128)));for(;0>(ce=ie.indexOf(`
`))&&fe<G&&re<U.byteLength;)xe+=ie,fe+=ie.length,re+=128,ie+=String.fromCharCode.apply(null,new Uint16Array(U.subarray(re,re+128)));return-1<ce?(U.pos+=fe+ce+1,xe+ie.slice(0,ce)):!1},S=function(U){const G=/^#\?(\S+)/,J=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,B=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,re=/^\s*FORMAT=(\S+)\s*$/,ce=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,fe={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let xe,ie;for((U.pos>=U.byteLength||!(xe=v(U)))&&d(1,"no header found"),(ie=xe.match(G))||d(3,"bad initial token"),fe.valid|=1,fe.programtype=ie[1],fe.string+=xe+`
`;xe=v(U),xe!==!1;){if(fe.string+=xe+`
`,xe.charAt(0)==="#"){fe.comments+=xe+`
`;continue}if((ie=xe.match(J))&&(fe.gamma=parseFloat(ie[1])),(ie=xe.match(B))&&(fe.exposure=parseFloat(ie[1])),(ie=xe.match(re))&&(fe.valid|=2,fe.format=ie[1]),(ie=xe.match(ce))&&(fe.valid|=4,fe.height=parseInt(ie[1],10),fe.width=parseInt(ie[2],10)),fe.valid&2&&fe.valid&4)break}return fe.valid&2||d(3,"missing format specifier"),fe.valid&4||d(3,"missing image size specifier"),fe},I=function(U,G,J){const B=G;if(B<8||B>32767||U[0]!==2||U[1]!==2||U[2]&128)return new Uint8Array(U);B!==(U[2]<<8|U[3])&&d(3,"wrong scanline width");const re=new Uint8Array(4*G*J);re.length||d(4,"unable to allocate buffer space");let ce=0,fe=0;const xe=4*B,ie=new Uint8Array(4),Se=new Uint8Array(xe);let V=J;for(;V>0&&fe<U.byteLength;){fe+4>U.byteLength&&d(1),ie[0]=U[fe++],ie[1]=U[fe++],ie[2]=U[fe++],ie[3]=U[fe++],(ie[0]!=2||ie[1]!=2||(ie[2]<<8|ie[3])!=B)&&d(3,"bad rgbe scanline format");let ae=0,Y;for(;ae<xe&&fe<U.byteLength;){Y=U[fe++];const me=Y>128;if(me&&(Y-=128),(Y===0||ae+Y>xe)&&d(3,"bad scanline data"),me){const we=U[fe++];for(let Ve=0;Ve<Y;Ve++)Se[ae++]=we}else Se.set(U.subarray(fe,fe+Y),ae),ae+=Y,fe+=Y}const pe=B;for(let me=0;me<pe;me++){let we=0;re[ce]=Se[me+we],we+=B,re[ce+1]=Se[me+we],we+=B,re[ce+2]=Se[me+we],we+=B,re[ce+3]=Se[me+we],ce+=4}V--}return re},C=function(U,G,J,B){const re=U[G+3],ce=Math.pow(2,re-128)/255;J[B+0]=U[G+0]*ce,J[B+1]=U[G+1]*ce,J[B+2]=U[G+2]*ce,J[B+3]=1},O=function(U,G,J,B){const re=U[G+3],ce=Math.pow(2,re-128)/255;J[B+0]=vr.toHalfFloat(Math.min(U[G+0]*ce,65504)),J[B+1]=vr.toHalfFloat(Math.min(U[G+1]*ce,65504)),J[B+2]=vr.toHalfFloat(Math.min(U[G+2]*ce,65504)),J[B+3]=vr.toHalfFloat(1)},k=new Uint8Array(i);k.pos=0;const E=S(k),z=E.width,H=E.height,ne=I(k.subarray(k.pos),z,H);let W,Q,X;switch(this.type){case sn:X=ne.length/4;const U=new Float32Array(X*4);for(let J=0;J<X;J++)C(ne,J*4,U,J*4);W=U,Q=sn;break;case At:X=ne.length/4;const G=new Uint16Array(X*4);for(let J=0;J<X;J++)O(ne,J*4,G,J*4);W=G,Q=At;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:z,height:H,data:W,header:E.string,gamma:E.gamma,exposure:E.exposure,type:Q}}setDataType(i){return this.type=i,this}load(i,a,c,f){function m(d,w){switch(d.type){case sn:case At:"colorSpace"in d?d.colorSpace="srgb-linear":d.encoding=3e3,d.minFilter=Qt,d.magFilter=Qt,d.generateMipmaps=!1,d.flipY=!0;break}a&&a(d,w)}return super.load(i,m,c,f)}}const qr=_c>=152;class Gp extends Ku{constructor(i){super(i),this.type=At}parse(i){const G=Math.pow(2.7182818,2.2);function J(u,h){for(var _=0,L=0;L<65536;++L)(L==0||u[L>>3]&1<<(L&7))&&(h[_++]=L);for(var F=_-1;_<65536;)h[_++]=0;return F}function B(u){for(var h=0;h<16384;h++)u[h]={},u[h].len=0,u[h].lit=0,u[h].p=null}const re={l:0,c:0,lc:0};function ce(u,h,_,L,F){for(;_<u;)h=h<<8|si(L,F),_+=8;_-=u,re.l=h>>_&(1<<u)-1,re.c=h,re.lc=_}const fe=new Array(59);function xe(u){for(var h=0;h<=58;++h)fe[h]=0;for(var h=0;h<65537;++h)fe[u[h]]+=1;for(var _=0,h=58;h>0;--h){var L=_+fe[h]>>1;fe[h]=_,_=L}for(var h=0;h<65537;++h){var F=u[h];F>0&&(u[h]=F|fe[F]++<<6)}}function ie(u,h,_,L,F,j,q){for(var Z=_,ee=0,$=0;F<=j;F++){if(Z.value-_.value>L)return!1;ce(6,ee,$,u,Z);var te=re.l;if(ee=re.c,$=re.lc,q[F]=te,te==63){if(Z.value-_.value>L)throw"Something wrong with hufUnpackEncTable";ce(8,ee,$,u,Z);var b=re.l+6;if(ee=re.c,$=re.lc,F+b>j+1)throw"Something wrong with hufUnpackEncTable";for(;b--;)q[F++]=0;F--}else if(te>=59){var b=te-59+2;if(F+b>j+1)throw"Something wrong with hufUnpackEncTable";for(;b--;)q[F++]=0;F--}}xe(q)}function Se(u){return u&63}function V(u){return u>>6}function ae(u,h,_,L){for(;h<=_;h++){var F=V(u[h]),j=Se(u[h]);if(F>>j)throw"Invalid table entry";if(j>14){var q=L[F>>j-14];if(q.len)throw"Invalid table entry";if(q.lit++,q.p){var Z=q.p;q.p=new Array(q.lit);for(var ee=0;ee<q.lit-1;++ee)q.p[ee]=Z[ee]}else q.p=new Array(1);q.p[q.lit-1]=h}else if(j)for(var $=0,ee=1<<14-j;ee>0;ee--){var q=L[(F<<14-j)+$];if(q.len||q.p)throw"Invalid table entry";q.len=j,q.lit=h,$++}}return!0}const Y={c:0,lc:0};function pe(u,h,_,L){u=u<<8|si(_,L),h+=8,Y.c=u,Y.lc=h}const me={c:0,lc:0};function we(u,h,_,L,F,j,q,Z,ee,$){if(u==h){L<8&&(pe(_,L,F,q),_=Y.c,L=Y.lc),L-=8;var te=_>>L,te=new Uint8Array([te])[0];if(ee.value+te>$)return!1;for(var b=Z[ee.value-1];te-- >0;)Z[ee.value++]=b}else if(ee.value<$)Z[ee.value++]=u;else return!1;me.c=_,me.lc=L}function Ve(u){return u&65535}function tt(u){var h=Ve(u);return h>32767?h-65536:h}const Ie={a:0,b:0};function st(u,h){var _=tt(u),L=tt(h),F=L,j=_+(F&1)+(F>>1),q=j,Z=j-F;Ie.a=q,Ie.b=Z}function Yt(u,h){var _=Ve(u),L=Ve(h),F=_-(L>>1)&65535,j=L+F-32768&65535;Ie.a=j,Ie.b=F}function Er(u,h,_,L,F,j,q){for(var Z=q<16384,ee=_>F?F:_,$=1,te;$<=ee;)$<<=1;for($>>=1,te=$,$>>=1;$>=1;){for(var b=0,He=b+j*(F-te),de=j*$,ve=j*te,Ee=L*$,Ce=L*te,Ae,Le,_e,Pe;b<=He;b+=ve){for(var Oe=b,We=b+L*(_-te);Oe<=We;Oe+=Ce){var ke=Oe+Ee,Qe=Oe+de,yt=Qe+Ee;Z?(st(u[Oe+h],u[Qe+h]),Ae=Ie.a,_e=Ie.b,st(u[ke+h],u[yt+h]),Le=Ie.a,Pe=Ie.b,st(Ae,Le),u[Oe+h]=Ie.a,u[ke+h]=Ie.b,st(_e,Pe),u[Qe+h]=Ie.a,u[yt+h]=Ie.b):(Yt(u[Oe+h],u[Qe+h]),Ae=Ie.a,_e=Ie.b,Yt(u[ke+h],u[yt+h]),Le=Ie.a,Pe=Ie.b,Yt(Ae,Le),u[Oe+h]=Ie.a,u[ke+h]=Ie.b,Yt(_e,Pe),u[Qe+h]=Ie.a,u[yt+h]=Ie.b)}if(_&$){var Qe=Oe+de;Z?st(u[Oe+h],u[Qe+h]):Yt(u[Oe+h],u[Qe+h]),Ae=Ie.a,u[Qe+h]=Ie.b,u[Oe+h]=Ae}}if(F&$)for(var Oe=b,We=b+L*(_-te);Oe<=We;Oe+=Ce){var ke=Oe+Ee;Z?st(u[Oe+h],u[ke+h]):Yt(u[Oe+h],u[ke+h]),Ae=Ie.a,u[ke+h]=Ie.b,u[Oe+h]=Ae}te=$,$>>=1}return b}function bn(u,h,_,L,F,j,q,Z,ee,$){for(var te=0,b=0,He=Z,de=Math.trunc(F.value+(j+7)/8);F.value<de;)for(pe(te,b,_,F),te=Y.c,b=Y.lc;b>=14;){var ve=te>>b-14&16383,Ee=h[ve];if(Ee.len)b-=Ee.len,we(Ee.lit,q,te,b,_,L,F,ee,$,He),te=me.c,b=me.lc;else{if(!Ee.p)throw"hufDecode issues";var Ce;for(Ce=0;Ce<Ee.lit;Ce++){for(var Ae=Se(u[Ee.p[Ce]]);b<Ae&&F.value<de;)pe(te,b,_,F),te=Y.c,b=Y.lc;if(b>=Ae&&V(u[Ee.p[Ce]])==(te>>b-Ae&(1<<Ae)-1)){b-=Ae,we(Ee.p[Ce],q,te,b,_,L,F,ee,$,He),te=me.c,b=me.lc;break}}if(Ce==Ee.lit)throw"hufDecode issues"}}var Le=8-j&7;for(te>>=Le,b-=Le;b>0;){var Ee=h[te<<14-b&16383];if(Ee.len)b-=Ee.len,we(Ee.lit,q,te,b,_,L,F,ee,$,He),te=me.c,b=me.lc;else throw"hufDecode issues"}return!0}function Pt(u,h,_,L,F,j){var q={value:0},Z=_.value,ee=gt(h,_),$=gt(h,_);_.value+=4;var te=gt(h,_);if(_.value+=4,ee<0||ee>=65537||$<0||$>=65537)throw"Something wrong with HUF_ENCSIZE";var b=new Array(65537),He=new Array(16384);B(He);var de=L-(_.value-Z);if(ie(u,h,_,de,ee,$,b),te>8*(L-(_.value-Z)))throw"Something wrong with hufUncompress";ae(b,ee,$,He),bn(b,He,u,h,_,te,$,j,F,q)}function $n(u,h,_){for(var L=0;L<_;++L)h[L]=u[h[L]]}function vt(u){for(var h=1;h<u.length;h++){var _=u[h-1]+u[h]-128;u[h]=_}}function ii(u,h){for(var _=0,L=Math.floor((u.length+1)/2),F=0,j=u.length-1;!(F>j||(h[F++]=u[_++],F>j));)h[F++]=u[L++]}function li(u){for(var h=u.byteLength,_=new Array,L=0,F=new DataView(u);h>0;){var j=F.getInt8(L++);if(j<0){var q=-j;h-=q+1;for(var Z=0;Z<q;Z++)_.push(F.getUint8(L++))}else{var q=j;h-=2;for(var ee=F.getUint8(L++),Z=0;Z<q+1;Z++)_.push(ee)}}return _}function xl(u,h,_,L,F,j){var ke=new DataView(j.buffer),q=_[u.idx[0]].width,Z=_[u.idx[0]].height,ee=3,$=Math.floor(q/8),te=Math.ceil(q/8),b=Math.ceil(Z/8),He=q-(te-1)*8,de=Z-(b-1)*8,ve={value:0},Ee=new Array(ee),Ce=new Array(ee),Ae=new Array(ee),Le=new Array(ee),_e=new Array(ee);for(let Be=0;Be<ee;++Be)_e[Be]=h[u.idx[Be]],Ee[Be]=Be<1?0:Ee[Be-1]+te*b,Ce[Be]=new Float32Array(64),Ae[Be]=new Uint16Array(64),Le[Be]=new Uint16Array(te*64);for(let Be=0;Be<b;++Be){var Pe=8;Be==b-1&&(Pe=de);var Oe=8;for(let Ge=0;Ge<te;++Ge){Ge==te-1&&(Oe=He);for(let Fe=0;Fe<ee;++Fe)Ae[Fe].fill(0),Ae[Fe][0]=F[Ee[Fe]++],_l(ve,L,Ae[Fe]),El(Ae[Fe],Ce[Fe]),Ml(Ce[Fe]);Ln(Ce);for(let Fe=0;Fe<ee;++Fe)Rl(Ce[Fe],Le[Fe],Ge*64)}let ot=0;for(let Ge=0;Ge<ee;++Ge){const Fe=_[u.idx[Ge]].type;for(let Ke=8*Be;Ke<8*Be+Pe;++Ke){ot=_e[Ge][Ke];for(let cn=0;cn<$;++cn){const Mt=cn*64+(Ke&7)*8;ke.setUint16(ot+0*Fe,Le[Ge][Mt+0],!0),ke.setUint16(ot+2*Fe,Le[Ge][Mt+1],!0),ke.setUint16(ot+4*Fe,Le[Ge][Mt+2],!0),ke.setUint16(ot+6*Fe,Le[Ge][Mt+3],!0),ke.setUint16(ot+8*Fe,Le[Ge][Mt+4],!0),ke.setUint16(ot+10*Fe,Le[Ge][Mt+5],!0),ke.setUint16(ot+12*Fe,Le[Ge][Mt+6],!0),ke.setUint16(ot+14*Fe,Le[Ge][Mt+7],!0),ot+=16*Fe}}if($!=te)for(let Ke=8*Be;Ke<8*Be+Pe;++Ke){const cn=_e[Ge][Ke]+8*$*2*Fe,Mt=$*64+(Ke&7)*8;for(let bt=0;bt<Oe;++bt)ke.setUint16(cn+bt*2*Fe,Le[Ge][Mt+bt],!0)}}}for(var We=new Uint16Array(q),ke=new DataView(j.buffer),Qe=0;Qe<ee;++Qe){_[u.idx[Qe]].decoded=!0;var yt=_[u.idx[Qe]].type;if(_[Qe].type==2)for(var rt=0;rt<Z;++rt){const Be=_e[Qe][rt];for(var pt=0;pt<q;++pt)We[pt]=ke.getUint16(Be+pt*2*yt,!0);for(var pt=0;pt<q;++pt)ke.setFloat32(Be+pt*2*yt,se(We[pt]),!0)}}}function _l(u,h,_){for(var L,F=1;F<64;)L=h[u.value],L==65280?F=64:L>>8==255?F+=L&255:(_[F]=L,F++),u.value++}function El(u,h){h[0]=se(u[0]),h[1]=se(u[1]),h[2]=se(u[5]),h[3]=se(u[6]),h[4]=se(u[14]),h[5]=se(u[15]),h[6]=se(u[27]),h[7]=se(u[28]),h[8]=se(u[2]),h[9]=se(u[4]),h[10]=se(u[7]),h[11]=se(u[13]),h[12]=se(u[16]),h[13]=se(u[26]),h[14]=se(u[29]),h[15]=se(u[42]),h[16]=se(u[3]),h[17]=se(u[8]),h[18]=se(u[12]),h[19]=se(u[17]),h[20]=se(u[25]),h[21]=se(u[30]),h[22]=se(u[41]),h[23]=se(u[43]),h[24]=se(u[9]),h[25]=se(u[11]),h[26]=se(u[18]),h[27]=se(u[24]),h[28]=se(u[31]),h[29]=se(u[40]),h[30]=se(u[44]),h[31]=se(u[53]),h[32]=se(u[10]),h[33]=se(u[19]),h[34]=se(u[23]),h[35]=se(u[32]),h[36]=se(u[39]),h[37]=se(u[45]),h[38]=se(u[52]),h[39]=se(u[54]),h[40]=se(u[20]),h[41]=se(u[22]),h[42]=se(u[33]),h[43]=se(u[38]),h[44]=se(u[46]),h[45]=se(u[51]),h[46]=se(u[55]),h[47]=se(u[60]),h[48]=se(u[21]),h[49]=se(u[34]),h[50]=se(u[37]),h[51]=se(u[47]),h[52]=se(u[50]),h[53]=se(u[56]),h[54]=se(u[59]),h[55]=se(u[61]),h[56]=se(u[35]),h[57]=se(u[36]),h[58]=se(u[48]),h[59]=se(u[49]),h[60]=se(u[57]),h[61]=se(u[58]),h[62]=se(u[62]),h[63]=se(u[63])}function Ml(u){const h=.5*Math.cos(.7853975),_=.5*Math.cos(3.14159/16),L=.5*Math.cos(3.14159/8),F=.5*Math.cos(3*3.14159/16),j=.5*Math.cos(5*3.14159/16),q=.5*Math.cos(3*3.14159/8),Z=.5*Math.cos(7*3.14159/16);for(var ee=new Array(4),$=new Array(4),te=new Array(4),b=new Array(4),He=0;He<8;++He){var de=He*8;ee[0]=L*u[de+2],ee[1]=q*u[de+2],ee[2]=L*u[de+6],ee[3]=q*u[de+6],$[0]=_*u[de+1]+F*u[de+3]+j*u[de+5]+Z*u[de+7],$[1]=F*u[de+1]-Z*u[de+3]-_*u[de+5]-j*u[de+7],$[2]=j*u[de+1]-_*u[de+3]+Z*u[de+5]+F*u[de+7],$[3]=Z*u[de+1]-j*u[de+3]+F*u[de+5]-_*u[de+7],te[0]=h*(u[de+0]+u[de+4]),te[3]=h*(u[de+0]-u[de+4]),te[1]=ee[0]+ee[3],te[2]=ee[1]-ee[2],b[0]=te[0]+te[1],b[1]=te[3]+te[2],b[2]=te[3]-te[2],b[3]=te[0]-te[1],u[de+0]=b[0]+$[0],u[de+1]=b[1]+$[1],u[de+2]=b[2]+$[2],u[de+3]=b[3]+$[3],u[de+4]=b[3]-$[3],u[de+5]=b[2]-$[2],u[de+6]=b[1]-$[1],u[de+7]=b[0]-$[0]}for(var ve=0;ve<8;++ve)ee[0]=L*u[16+ve],ee[1]=q*u[16+ve],ee[2]=L*u[48+ve],ee[3]=q*u[48+ve],$[0]=_*u[8+ve]+F*u[24+ve]+j*u[40+ve]+Z*u[56+ve],$[1]=F*u[8+ve]-Z*u[24+ve]-_*u[40+ve]-j*u[56+ve],$[2]=j*u[8+ve]-_*u[24+ve]+Z*u[40+ve]+F*u[56+ve],$[3]=Z*u[8+ve]-j*u[24+ve]+F*u[40+ve]-_*u[56+ve],te[0]=h*(u[ve]+u[32+ve]),te[3]=h*(u[ve]-u[32+ve]),te[1]=ee[0]+ee[3],te[2]=ee[1]-ee[2],b[0]=te[0]+te[1],b[1]=te[3]+te[2],b[2]=te[3]-te[2],b[3]=te[0]-te[1],u[0+ve]=b[0]+$[0],u[8+ve]=b[1]+$[1],u[16+ve]=b[2]+$[2],u[24+ve]=b[3]+$[3],u[32+ve]=b[3]-$[3],u[40+ve]=b[2]-$[2],u[48+ve]=b[1]-$[1],u[56+ve]=b[0]-$[0]}function Ln(u){for(var h=0;h<64;++h){var _=u[0][h],L=u[1][h],F=u[2][h];u[0][h]=_+1.5747*F,u[1][h]=_-.1873*L-.4682*F,u[2][h]=_+1.8556*L}}function Rl(u,h,_){for(var L=0;L<64;++L)h[_+L]=vr.toHalfFloat(Cl(u[L]))}function Cl(u){return u<=1?Math.sign(u)*Math.pow(Math.abs(u),2.2):Math.sign(u)*Math.pow(G,Math.abs(u)-1)}function oi(u){return new DataView(u.array.buffer,u.offset.value,u.size)}function On(u){var h=u.viewer.buffer.slice(u.offset.value,u.offset.value+u.size),_=new Uint8Array(li(h)),L=new Uint8Array(_.length);return vt(_),ii(_,L),new DataView(L.buffer)}function Mr(u){var h=u.array.slice(u.offset.value,u.offset.value+u.size),_=fl(h),L=new Uint8Array(_.length);return vt(_),ii(_,L),new DataView(L.buffer)}function Pl(u){for(var h=u.viewer,_={value:u.offset.value},L=new Uint16Array(u.width*u.scanlineBlockSize*(u.channels*u.type)),F=new Uint8Array(8192),j=0,q=new Array(u.channels),Z=0;Z<u.channels;Z++)q[Z]={},q[Z].start=j,q[Z].end=q[Z].start,q[Z].nx=u.width,q[Z].ny=u.lines,q[Z].size=u.type,j+=q[Z].nx*q[Z].ny*q[Z].size;var ee=Fn(h,_),$=Fn(h,_);if($>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(ee<=$)for(var Z=0;Z<$-ee+1;Z++)F[Z+ee]=yn(h,_);var te=new Uint16Array(65536),b=J(F,te),He=gt(h,_);Pt(u.array,h,_,He,L,j);for(var Z=0;Z<u.channels;++Z)for(var de=q[Z],ve=0;ve<q[Z].size;++ve)Er(L,de.start+ve,de.nx,de.size,de.ny,de.nx*de.size,b);$n(te,L,j);for(var Ee=0,Ce=new Uint8Array(L.buffer.byteLength),Ae=0;Ae<u.lines;Ae++)for(var Le=0;Le<u.channels;Le++){var de=q[Le],_e=de.nx*de.size,Pe=new Uint8Array(L.buffer,de.end*2,_e*2);Ce.set(Pe,Ee),Ee+=_e*2,de.end+=_e}return new DataView(Ce.buffer)}function Il(u){var h=u.array.slice(u.offset.value,u.offset.value+u.size),_=fl(h);const L=u.lines*u.channels*u.width,F=u.type==1?new Uint16Array(L):new Uint32Array(L);let j=0,q=0;const Z=new Array(4);for(let ee=0;ee<u.lines;ee++)for(let $=0;$<u.channels;$++){let te=0;switch(u.type){case 1:Z[0]=j,Z[1]=Z[0]+u.width,j=Z[1]+u.width;for(let b=0;b<u.width;++b){const He=_[Z[0]++]<<8|_[Z[1]++];te+=He,F[q]=te,q++}break;case 2:Z[0]=j,Z[1]=Z[0]+u.width,Z[2]=Z[1]+u.width,j=Z[2]+u.width;for(let b=0;b<u.width;++b){const He=_[Z[0]++]<<24|_[Z[1]++]<<16|_[Z[2]++]<<8;te+=He,F[q]=te,q++}break}}return new DataView(F.buffer)}function ai(u){var h=u.viewer,_={value:u.offset.value},L=new Uint8Array(u.width*u.lines*(u.channels*u.type*2)),F={version:Et(h,_),unknownUncompressedSize:Et(h,_),unknownCompressedSize:Et(h,_),acCompressedSize:Et(h,_),dcCompressedSize:Et(h,_),rleCompressedSize:Et(h,_),rleUncompressedSize:Et(h,_),rleRawSize:Et(h,_),totalAcUncompressedCount:Et(h,_),totalDcUncompressedCount:Et(h,_),acCompression:Et(h,_)};if(F.version<2)throw"EXRLoader.parse: "+Xt.compression+" version "+F.version+" is unsupported";for(var j=new Array,q=Fn(h,_)-2;q>0;){var Z=er(h.buffer,_),ee=yn(h,_),$=ee>>2&3,te=(ee>>4)-1,b=new Int8Array([te])[0],He=yn(h,_);j.push({name:Z,index:b,type:He,compression:$}),q-=Z.length+3}for(var de=Xt.channels,ve=new Array(u.channels),Ee=0;Ee<u.channels;++Ee){var Ce=ve[Ee]={},Ae=de[Ee];Ce.name=Ae.name,Ce.compression=0,Ce.decoded=!1,Ce.type=Ae.pixelType,Ce.pLinear=Ae.pLinear,Ce.width=u.width,Ce.height=u.lines}for(var Le={idx:new Array(3)},_e=0;_e<u.channels;++_e)for(var Ce=ve[_e],Ee=0;Ee<j.length;++Ee){var Pe=j[Ee];Ce.name==Pe.name&&(Ce.compression=Pe.compression,Pe.index>=0&&(Le.idx[Pe.index]=_e),Ce.offset=_e)}if(F.acCompressedSize>0)switch(F.acCompression){case 0:var ke=new Uint16Array(F.totalAcUncompressedCount);Pt(u.array,h,_,F.acCompressedSize,ke,F.totalAcUncompressedCount);break;case 1:var Oe=u.array.slice(_.value,_.value+F.totalAcUncompressedCount),We=fl(Oe),ke=new Uint16Array(We.buffer);_.value+=F.totalAcUncompressedCount;break}if(F.dcCompressedSize>0){var Qe={array:u.array,offset:_,size:F.dcCompressedSize},yt=new Uint16Array(Mr(Qe).buffer);_.value+=F.dcCompressedSize}if(F.rleRawSize>0){var Oe=u.array.slice(_.value,_.value+F.rleCompressedSize),We=fl(Oe),rt=li(We.buffer);_.value+=F.rleCompressedSize}for(var pt=0,Be=new Array(ve.length),Ee=0;Ee<Be.length;++Ee)Be[Ee]=new Array;for(var ot=0;ot<u.lines;++ot)for(var Ge=0;Ge<ve.length;++Ge)Be[Ge].push(pt),pt+=ve[Ge].width*u.type*2;xl(Le,Be,ve,ke,yt,L);for(var Ee=0;Ee<ve.length;++Ee){var Ce=ve[Ee];if(!Ce.decoded)switch(Ce.compression){case 2:for(var Fe=0,Ke=0,ot=0;ot<u.lines;++ot){for(var cn=Be[Ee][Fe],Mt=0;Mt<Ce.width;++Mt){for(var bt=0;bt<2*Ce.type;++bt)L[cn++]=rt[Ke+bt*Ce.width*Ce.height];Ke++}Fe++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(L.buffer)}function er(u,h){for(var _=new Uint8Array(u),L=0;_[h.value+L]!=0;)L+=1;var F=new TextDecoder().decode(_.slice(h.value,h.value+L));return h.value=h.value+L+1,F}function kl(u,h,_){var L=new TextDecoder().decode(new Uint8Array(u).slice(h.value,h.value+_));return h.value=h.value+_,L}function Tl(u,h){var _=An(u,h),L=gt(u,h);return[_,L]}function Nl(u,h){var _=gt(u,h),L=gt(u,h);return[_,L]}function An(u,h){var _=u.getInt32(h.value,!0);return h.value=h.value+4,_}function gt(u,h){var _=u.getUint32(h.value,!0);return h.value=h.value+4,_}function si(u,h){var _=u[h.value];return h.value=h.value+1,_}function yn(u,h){var _=u.getUint8(h.value);return h.value=h.value+1,_}const Et=function(u,h){let _;return"getBigInt64"in DataView.prototype?_=Number(u.getBigInt64(h.value,!0)):_=u.getUint32(h.value+4,!0)+Number(u.getUint32(h.value,!0)<<32),h.value+=8,_};function ut(u,h){var _=u.getFloat32(h.value,!0);return h.value+=4,_}function zl(u,h){return vr.toHalfFloat(ut(u,h))}function se(u){var h=(u&31744)>>10,_=u&1023;return(u>>15?-1:1)*(h?h===31?_?NaN:1/0:Math.pow(2,h-15)*(1+_/1024):6103515625e-14*(_/1024))}function Fn(u,h){var _=u.getUint16(h.value,!0);return h.value+=2,_}function Ll(u,h){return se(Fn(u,h))}function Ol(u,h,_,L){for(var F=_.value,j=[];_.value<F+L-1;){var q=er(h,_),Z=An(u,_),ee=yn(u,_);_.value+=3;var $=An(u,_),te=An(u,_);j.push({name:q,pixelType:Z,pLinear:ee,xSampling:$,ySampling:te})}return _.value+=1,j}function ui(u,h){var _=ut(u,h),L=ut(u,h),F=ut(u,h),j=ut(u,h),q=ut(u,h),Z=ut(u,h),ee=ut(u,h),$=ut(u,h);return{redX:_,redY:L,greenX:F,greenY:j,blueX:q,blueY:Z,whiteX:ee,whiteY:$}}function ci(u,h){var _=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],L=yn(u,h);return _[L]}function Al(u,h){var _=gt(u,h),L=gt(u,h),F=gt(u,h),j=gt(u,h);return{xMin:_,yMin:L,xMax:F,yMax:j}}function fi(u,h){var _=["INCREASING_Y"],L=yn(u,h);return _[L]}function di(u,h){var _=ut(u,h),L=ut(u,h);return[_,L]}function pi(u,h){var _=ut(u,h),L=ut(u,h),F=ut(u,h);return[_,L,F]}function Fl(u,h,_,L,F){if(L==="string"||L==="stringvector"||L==="iccProfile")return kl(h,_,F);if(L==="chlist")return Ol(u,h,_,F);if(L==="chromaticities")return ui(u,_);if(L==="compression")return ci(u,_);if(L==="box2i")return Al(u,_);if(L==="lineOrder")return fi(u,_);if(L==="float")return ut(u,_);if(L==="v2f")return di(u,_);if(L==="v3f")return pi(u,_);if(L==="int")return An(u,_);if(L==="rational")return Tl(u,_);if(L==="timecode")return Nl(u,_);if(L==="preview")return _.value+=F,"skipped";_.value+=F}function jl(u,h,_){const L={};if(u.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";L.version=u.getUint8(4);const F=u.getUint8(5);L.spec={singleTile:!!(F&2),longName:!!(F&4),deepFormat:!!(F&8),multiPart:!!(F&16)},_.value=8;for(var j=!0;j;){var q=er(h,_);if(q==0)j=!1;else{var Z=er(h,_),ee=gt(u,_),$=Fl(u,h,_,Z,ee);$===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Z}'.`):L[q]=$}}if((F&-5)!=0)throw console.error("EXRHeader:",L),"THREE.EXRLoader: provided file is currently unsupported.";return L}function Dl(u,h,_,L,F){const j={size:0,viewer:h,array:_,offset:L,width:u.dataWindow.xMax-u.dataWindow.xMin+1,height:u.dataWindow.yMax-u.dataWindow.yMin+1,channels:u.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:u.channels[0].pixelType,uncompress:null,getter:null,format:null,[qr?"colorSpace":"encoding"]:null};switch(u.compression){case"NO_COMPRESSION":j.lines=1,j.uncompress=oi;break;case"RLE_COMPRESSION":j.lines=1,j.uncompress=On;break;case"ZIPS_COMPRESSION":j.lines=1,j.uncompress=Mr;break;case"ZIP_COMPRESSION":j.lines=16,j.uncompress=Mr;break;case"PIZ_COMPRESSION":j.lines=32,j.uncompress=Pl;break;case"PXR24_COMPRESSION":j.lines=16,j.uncompress=Il;break;case"DWAA_COMPRESSION":j.lines=32,j.uncompress=ai;break;case"DWAB_COMPRESSION":j.lines=256,j.uncompress=ai;break;default:throw"EXRLoader.parse: "+u.compression+" is unsupported"}if(j.scanlineBlockSize=j.lines,j.type==1)switch(F){case sn:j.getter=Ll,j.inputSize=2;break;case At:j.getter=Fn,j.inputSize=2;break}else if(j.type==2)switch(F){case sn:j.getter=ut,j.inputSize=4;break;case At:j.getter=zl,j.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+j.type+" for "+u.compression+".";j.blockCount=(u.dataWindow.yMax+1)/j.scanlineBlockSize;for(var q=0;q<j.blockCount;q++)Et(h,L);j.outputChannels=j.channels==3?4:j.channels;const Z=j.width*j.height*j.outputChannels;switch(F){case sn:j.byteArray=new Float32Array(Z),j.channels<j.outputChannels&&j.byteArray.fill(1,0,Z);break;case At:j.byteArray=new Uint16Array(Z),j.channels<j.outputChannels&&j.byteArray.fill(15360,0,Z);break;default:console.error("THREE.EXRLoader: unsupported type: ",F);break}return j.bytesPerLine=j.width*j.inputSize*j.channels,j.outputChannels==4?j.format=wr:j.format=Wf,qr?j.colorSpace="srgb-linear":j.encoding=3e3,j}const jn=new DataView(i),Rr=new Uint8Array(i),Dn={value:0},Xt=jl(jn,i,Dn),ze=Dl(Xt,jn,Rr,Dn,this.type),hi={value:0},Ul={R:0,G:1,B:2,A:3,Y:0};for(let u=0;u<ze.height/ze.scanlineBlockSize;u++){const h=gt(jn,Dn);ze.size=gt(jn,Dn),ze.lines=h+ze.scanlineBlockSize>ze.height?ze.height-h:ze.scanlineBlockSize;const L=ze.size<ze.lines*ze.bytesPerLine?ze.uncompress(ze):oi(ze);Dn.value+=ze.size;for(let F=0;F<ze.scanlineBlockSize;F++){const j=F+u*ze.scanlineBlockSize;if(j>=ze.height)break;for(let q=0;q<ze.channels;q++){const Z=Ul[Xt.channels[q].name];for(let ee=0;ee<ze.width;ee++){hi.value=(F*(ze.channels*ze.width)+q*ze.width+ee)*ze.inputSize;const $=(ze.height-1-j)*(ze.width*ze.outputChannels)+ee*ze.outputChannels+Z;ze.byteArray[$]=ze.getter(L,hi)}}}}return{header:Xt,width:ze.width,height:ze.height,data:ze.byteArray,format:ze.format,[qr?"colorSpace":"encoding"]:ze[qr?"colorSpace":"encoding"],type:this.type}}setDataType(i){return this.type=i,this}load(i,a,c,f){function m(d,w){qr?d.colorSpace=w.colorSpace:d.encoding=w.encoding,d.minFilter=Qt,d.magFilter=Qt,d.generateMipmaps=!1,d.flipY=!1,a&&a(d,w)}return super.load(i,m,c,f)}}function Wp(l,i,a,c){const f=class extends ti{constructor(d={}){const w=Object.entries(l);super({uniforms:w.reduce((g,[x,p])=>{const v=Zf.clone({[x]:{value:p}});return{...g,...v}},{}),vertexShader:i,fragmentShader:a}),this.key="",w.forEach(([g])=>Object.defineProperty(this,g,{get:()=>this.uniforms[g].value,set:x=>this.uniforms[g].value=x})),Object.assign(this,d)}};return f.key=Zt.generateUUID(),f}const Zp=()=>parseInt(Xu.replace(/\D+/g,"")),kc=Zp();function Vp(l,i,a){const c=un(S=>S.size),f=un(S=>S.viewport),m=typeof l=="number"?l:c.width*f.dpr,d=c.height*f.dpr,w=(typeof l=="number"?a:l)||{},{samples:g=0,depth:x,...p}=w,v=P.useMemo(()=>{const S=new wa(m,d,{minFilter:Qt,magFilter:Qt,type:At,...p});return x&&(S.depthTexture=new Vf(m,d,sn)),S.samples=g,S},[]);return P.useLayoutEffect(()=>{v.setSize(m,d),g&&(v.samples=g)},[g,v,m,d]),P.useEffect(()=>()=>v.dispose(),[]),v}const Qp=l=>typeof l=="function",Yp=P.forwardRef(({envMap:l,resolution:i=256,frames:a=1/0,makeDefault:c,children:f,...m},d)=>{const w=un(({set:k})=>k),g=un(({camera:k})=>k),x=un(({size:k})=>k),p=P.useRef(null);P.useImperativeHandle(d,()=>p.current,[]);const v=P.useRef(null),S=Vp(i);P.useLayoutEffect(()=>{m.manual||(p.current.aspect=x.width/x.height)},[x,m]),P.useLayoutEffect(()=>{p.current.updateProjectionMatrix()});let I=0,C=null;const O=Qp(f);return gn(k=>{O&&(a===1/0||I<a)&&(v.current.visible=!1,k.gl.setRenderTarget(S),C=k.scene.background,l&&(k.scene.background=l),k.gl.render(k.scene,p.current),k.scene.background=C,k.gl.setRenderTarget(null),v.current.visible=!0,I++)}),P.useLayoutEffect(()=>{if(c){const k=g;return w(()=>({camera:p.current})),()=>w(()=>({camera:k}))}},[p,c,w]),P.createElement(P.Fragment,null,P.createElement("perspectiveCamera",Jn({ref:p},m),!O&&f),P.createElement("group",{ref:v},O&&f(S.texture)))}),Xp=Wp({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new gl,sectionColor:new gl,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new Xe,worldPlanePosition:new Xe},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${kc>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),qp=P.forwardRef(({args:l,cellColor:i="#000000",sectionColor:a="#2080ff",cellSize:c=.5,sectionSize:f=1,followCamera:m=!1,infiniteGrid:d=!1,fadeDistance:w=100,fadeStrength:g=1,fadeFrom:x=1,cellThickness:p=.5,sectionThickness:v=1,side:S=Yf,...I},C)=>{xa({GridMaterial:Xp});const O=P.useRef(null);P.useImperativeHandle(C,()=>O.current,[]);const k=new Qf,E=new Xe(0,1,0),z=new Xe(0,0,0);gn(W=>{k.setFromNormalAndCoplanarPoint(E,z).applyMatrix4(O.current.matrixWorld);const Q=O.current.material,X=Q.uniforms.worldCamProjPosition,U=Q.uniforms.worldPlanePosition;k.projectPoint(W.camera.position,X.value),U.value.set(0,0,0).applyMatrix4(O.current.matrixWorld)});const H={cellSize:c,sectionSize:f,cellColor:i,sectionColor:a,cellThickness:p,sectionThickness:v},ne={fadeDistance:w,fadeStrength:g,fadeFrom:x,infiniteGrid:d,followCamera:m};return P.createElement("mesh",Jn({ref:O,frustumCulled:!1},I),P.createElement("gridMaterial",Jn({transparent:!0,"extensions-derivatives":!0,side:S},H,ne)),P.createElement("planeGeometry",{args:l}))}),Kp=3e3,Jp=3001;function Tc(l,i){const a=l+"Geometry";return P.forwardRef(({args:c,children:f,...m},d)=>{const w=P.useRef(null);return P.useImperativeHandle(d,()=>w.current),P.useLayoutEffect(()=>void(i==null?void 0:i(w.current))),P.createElement("mesh",Jn({ref:w},m),P.createElement(a,{attach:"geometry",args:c}),f)})}const bp=Tc("octahedron"),$p=Tc("extrude"),Nc=(l,i,a)=>{let c;switch(l){case vl:c=new Uint8ClampedArray(i*a*4);break;case At:c=new Uint16Array(i*a*4);break;case $f:c=new Uint32Array(i*a*4);break;case bf:c=new Int8Array(i*a*4);break;case Jf:c=new Int16Array(i*a*4);break;case Kf:c=new Int32Array(i*a*4);break;case sn:c=new Float32Array(i*a*4);break;default:throw new Error("Unsupported data type")}return c};let dl;const eh=(l,i,a,c)=>{if(dl!==void 0)return dl;const f=new wa(1,1,c);i.setRenderTarget(f);const m=new ya(new Ju,new qf({color:16777215}));i.render(m,a),i.setRenderTarget(null);const d=Nc(l,f.width,f.height);return i.readRenderTargetPixels(f,0,0,f.width,f.height,d),f.dispose(),m.geometry.dispose(),m.material.dispose(),dl=d[0]!==0,dl};class Ra{constructor(i){et(this,"_renderer");et(this,"_rendererIsDisposable",!1);et(this,"_material");et(this,"_scene");et(this,"_camera");et(this,"_quad");et(this,"_renderTarget");et(this,"_width");et(this,"_height");et(this,"_type");et(this,"_colorSpace");et(this,"_supportsReadPixels",!0);et(this,"render",()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(i){throw this._renderer.setRenderTarget(null),i}this._renderer.setRenderTarget(null)});var c,f,m,d,w,g,x,p,v,S,I,C,O,k,E,z;this._width=i.width,this._height=i.height,this._type=i.type,this._colorSpace=i.colorSpace;const a={format:wr,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((c=i.renderTargetOptions)==null?void 0:c.anisotropy)!==void 0?(f=i.renderTargetOptions)==null?void 0:f.anisotropy:1,generateMipmaps:((m=i.renderTargetOptions)==null?void 0:m.generateMipmaps)!==void 0?(d=i.renderTargetOptions)==null?void 0:d.generateMipmaps:!1,magFilter:((w=i.renderTargetOptions)==null?void 0:w.magFilter)!==void 0?(g=i.renderTargetOptions)==null?void 0:g.magFilter:Qt,minFilter:((x=i.renderTargetOptions)==null?void 0:x.minFilter)!==void 0?(p=i.renderTargetOptions)==null?void 0:p.minFilter:Qt,samples:((v=i.renderTargetOptions)==null?void 0:v.samples)!==void 0?(S=i.renderTargetOptions)==null?void 0:S.samples:void 0,wrapS:((I=i.renderTargetOptions)==null?void 0:I.wrapS)!==void 0?(C=i.renderTargetOptions)==null?void 0:C.wrapS:Nn,wrapT:((O=i.renderTargetOptions)==null?void 0:O.wrapT)!==void 0?(k=i.renderTargetOptions)==null?void 0:k.wrapT:Nn};if(this._material=i.material,i.renderer?this._renderer=i.renderer:(this._renderer=Ra.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new ml,this._camera=new Vu,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!eh(this._type,this._renderer,this._camera,a)){let H;switch(this._type){case At:H=this._renderer.extensions.has("EXT_color_buffer_float")?sn:void 0;break}H!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${sn}`),this._type=H):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new ya(new Ju,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new wa(this.width,this.height,a),this._renderTarget.texture.mapping=((E=i.renderTargetOptions)==null?void 0:E.mapping)!==void 0?(z=i.renderTargetOptions)==null?void 0:z.mapping:yl}static instantiateRenderer(){const i=new Qu;return i.setSize(128,128),i}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const i=Nc(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,i),i}toDataTexture(i){const a=new Xf(this.toArray(),this.width,this.height,wr,this._type,(i==null?void 0:i.mapping)||yl,(i==null?void 0:i.wrapS)||Nn,(i==null?void 0:i.wrapT)||Nn,(i==null?void 0:i.magFilter)||Qt,(i==null?void 0:i.minFilter)||Qt,(i==null?void 0:i.anisotropy)||1,da);return a.generateMipmaps=(i==null?void 0:i.generateMipmaps)!==void 0?i==null?void 0:i.generateMipmaps:!1,a}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(i){this.disposeOnDemandRenderer(),i&&this.renderTarget.dispose(),this.material instanceof ti&&Object.values(this.material.uniforms).forEach(a=>{a.value instanceof Xn&&a.value.dispose()}),Object.values(this.material).forEach(a=>{a instanceof Xn&&a.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(i){this._width=i,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(i){this._height=i,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(i){this._renderTarget=i,this._width=i.width,this._height=i.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class zc extends Error{}class Lc extends Error{}const Kr=(l,i,a)=>{const c=new RegExp(`${i}="([^"]*)"`,"i").exec(l);if(c)return c[1];const f=new RegExp(`<${i}[^>]*>([\\s\\S]*?)</${i}>`,"i").exec(l);if(f){const m=f[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return m&&m.length===3?m.map(d=>d.replace(/<\/?rdf:li>/g,"")):f[1].trim()}if(a!==void 0)return a;throw new Error(`Can't find ${i} in gainmap metadata`)},th=l=>{let i;typeof TextDecoder<"u"?i=new TextDecoder().decode(l):i=l.toString();let a=i.indexOf("<x:xmpmeta");for(;a!==-1;){const c=i.indexOf("x:xmpmeta>",a),f=i.slice(a,c+10);try{const m=Kr(f,"hdrgm:GainMapMin","0"),d=Kr(f,"hdrgm:GainMapMax"),w=Kr(f,"hdrgm:Gamma","1"),g=Kr(f,"hdrgm:OffsetSDR","0.015625"),x=Kr(f,"hdrgm:OffsetHDR","0.015625"),p=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(f),v=p?p[1]:"0",S=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(f);if(!S)throw new Error("Incomplete gainmap metadata");const I=S[1];return{gainMapMin:Array.isArray(m)?m.map(C=>parseFloat(C)):[parseFloat(m),parseFloat(m),parseFloat(m)],gainMapMax:Array.isArray(d)?d.map(C=>parseFloat(C)):[parseFloat(d),parseFloat(d),parseFloat(d)],gamma:Array.isArray(w)?w.map(C=>parseFloat(C)):[parseFloat(w),parseFloat(w),parseFloat(w)],offsetSdr:Array.isArray(g)?g.map(C=>parseFloat(C)):[parseFloat(g),parseFloat(g),parseFloat(g)],offsetHdr:Array.isArray(x)?x.map(C=>parseFloat(C)):[parseFloat(x),parseFloat(x),parseFloat(x)],hdrCapacityMin:parseFloat(v),hdrCapacityMax:parseFloat(I)}}catch{}a=i.indexOf("<x:xmpmeta",c)}};class nh{constructor(i){et(this,"options");this.options={debug:i&&i.debug!==void 0?i.debug:!1,extractFII:i&&i.extractFII!==void 0?i.extractFII:!0,extractNonFII:i&&i.extractNonFII!==void 0?i.extractNonFII:!0}}extract(i){return new Promise((a,c)=>{const f=this.options.debug,m=new DataView(i.buffer);if(m.getUint16(0)!==65496){c(new Error("Not a valid jpeg"));return}const d=m.byteLength;let w=2,g=0,x;for(;w<d;){if(++g>250){c(new Error(`Found no marker after ${g} loops `));return}if(m.getUint8(w)!==255){c(new Error(`Not a valid marker at offset 0x${w.toString(16)}, found: 0x${m.getUint8(w).toString(16)}`));return}if(x=m.getUint8(w+1),f&&console.log(`Marker: ${x.toString(16)}`),x===226){f&&console.log("Found APP2 marker (0xffe2)");const p=w+4;if(m.getUint32(p)===1297106432){const v=p+4;let S;if(m.getUint16(v)===18761)S=!1;else if(m.getUint16(v)===19789)S=!0;else{c(new Error("No valid endianness marker found in TIFF header"));return}if(m.getUint16(v+2,!S)!==42){c(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const I=m.getUint32(v+4,!S);if(I<8){c(new Error("Not valid TIFF data! (First offset less than 8)"));return}const C=v+I,O=m.getUint16(C,!S),k=C+2;let E=0;for(let W=k;W<k+12*O;W+=12)m.getUint16(W,!S)===45057&&(E=m.getUint32(W+8,!S));const H=C+2+O*12+4,ne=[];for(let W=H;W<H+E*16;W+=16){const Q={MPType:m.getUint32(W,!S),size:m.getUint32(W+4,!S),dataOffset:m.getUint32(W+8,!S),dependantImages:m.getUint32(W+12,!S),start:-1,end:-1,isFII:!1};Q.dataOffset?(Q.start=v+Q.dataOffset,Q.isFII=!1):(Q.start=0,Q.isFII=!0),Q.end=Q.start+Q.size,ne.push(Q)}if(this.options.extractNonFII&&ne.length){const W=new Blob([m]),Q=[];for(const X of ne){if(X.isFII&&!this.options.extractFII)continue;const U=W.slice(X.start,X.end+1,"image/jpeg");Q.push(U)}a(Q)}}}w+=2+m.getUint16(w+2)}})}}const rh=async l=>{const i=th(l);if(!i)throw new Lc("Gain map XMP metadata not found");const c=await new nh({extractFII:!0,extractNonFII:!0}).extract(l);if(c.length!==2)throw new zc("Gain map recovery image not found");return{sdr:new Uint8Array(await c[0].arrayBuffer()),gainMap:new Uint8Array(await c[1].arrayBuffer()),metadata:i}},Du=l=>new Promise((i,a)=>{const c=document.createElement("img");c.onload=()=>{i(c)},c.onerror=f=>{a(f)},c.src=URL.createObjectURL(l)});class ih extends ed{constructor(a,c){super(c);et(this,"_renderer");et(this,"_renderTargetOptions");et(this,"_internalLoadingManager");et(this,"_config");this._config=a,a.renderer&&(this._renderer=a.renderer),this._internalLoadingManager=new td}setRenderer(a){return this._renderer=a,this}setRenderTargetOptions(a){return this._renderTargetOptions=a,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const a=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Xn,sdr:new Xn});return this._config.createQuadRenderer({width:16,height:16,type:At,colorSpace:da,material:a,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(a,c,f){const m=c?new Blob([c],{type:"image/jpeg"}):void 0,d=new Blob([a],{type:"image/jpeg"});let w,g,x=!1;if(typeof createImageBitmap>"u"){const p=await Promise.all([m?Du(m):Promise.resolve(void 0),Du(d)]);g=p[0],w=p[1],x=f==="flipY"}else{const p=await Promise.all([m?createImageBitmap(m,{imageOrientation:f||"flipY"}):Promise.resolve(void 0),createImageBitmap(d,{imageOrientation:f||"flipY"})]);g=p[0],w=p[1]}return{sdrImage:w,gainMapImage:g,needsFlip:x}}createTextures(a,c,f){const m=new Xn(c||new ImageData(2,2),yl,Nn,Nn,Qt,uu,wr,vl,1,da);m.flipY=f,m.needsUpdate=!0;const d=new Xn(a,yl,Nn,Nn,Qt,uu,wr,vl,1,nd);return d.flipY=f,d.needsUpdate=!0,{gainMap:m,sdr:d}}updateQuadRenderer(a,c,f,m,d){a.width=c.width,a.height=c.height,a.material.gainMap=f,a.material.sdr=m,a.material.gainMapMin=d.gainMapMin,a.material.gainMapMax=d.gainMapMax,a.material.offsetHdr=d.offsetHdr,a.material.offsetSdr=d.offsetSdr,a.material.gamma=d.gamma,a.material.hdrCapacityMin=d.hdrCapacityMin,a.material.hdrCapacityMax=d.hdrCapacityMax,a.material.maxDisplayBoost=Math.pow(2,d.hdrCapacityMax),a.material.needsUpdate=!0}}const lh=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,oh=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class ah extends ti{constructor({gamma:a,offsetHdr:c,offsetSdr:f,gainMapMin:m,gainMapMax:d,maxDisplayBoost:w,hdrCapacityMin:g,hdrCapacityMax:x,sdr:p,gainMap:v}){super({name:"GainMapDecoderMaterial",vertexShader:lh,fragmentShader:oh,uniforms:{sdr:{value:p},gainMap:{value:v},gamma:{value:new Xe(1/a[0],1/a[1],1/a[2])},offsetHdr:{value:new Xe().fromArray(c)},offsetSdr:{value:new Xe().fromArray(f)},gainMapMin:{value:new Xe().fromArray(m)},gainMapMax:{value:new Xe().fromArray(d)},weightFactor:{value:(Math.log2(w)-g)/(x-g)}},blending:rd,depthTest:!1,depthWrite:!1});et(this,"_maxDisplayBoost");et(this,"_hdrCapacityMin");et(this,"_hdrCapacityMax");this._maxDisplayBoost=w,this._hdrCapacityMin=g,this._hdrCapacityMax=x,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(a){this.uniforms.sdr.value=a}get gainMap(){return this.uniforms.gainMap.value}set gainMap(a){this.uniforms.gainMap.value=a}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(a){this.uniforms.offsetHdr.value.fromArray(a)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(a){this.uniforms.offsetSdr.value.fromArray(a)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(a){this.uniforms.gainMapMin.value.fromArray(a)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(a){this.uniforms.gainMapMax.value.fromArray(a)}get gamma(){const a=this.uniforms.gamma.value;return[1/a.x,1/a.y,1/a.z]}set gamma(a){const c=this.uniforms.gamma.value;c.x=1/a[0],c.y=1/a[1],c.z=1/a[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(a){this._hdrCapacityMin=a,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(a){this._hdrCapacityMax=a,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(a){this._maxDisplayBoost=Math.max(1,Math.min(65504,a)),this.calculateWeight()}calculateWeight(){const a=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,a))}}class Oc extends ih{constructor(i,a){super({renderer:i,createMaterial:c=>new ah(c),createQuadRenderer:c=>new Ra(c)},a)}async render(i,a,c,f){const{sdrImage:m,gainMapImage:d,needsFlip:w}=await this.processImages(c,f,"flipY"),{gainMap:g,sdr:x}=this.createTextures(m,d,w);this.updateQuadRenderer(i,m,g,x,a),i.render()}}class sh extends Oc{load([i,a,c],f,m,d){const w=this.prepareQuadRenderer();let g,x,p;const v=async()=>{if(g&&x&&p){try{await this.render(w,p,g,x)}catch(G){this.manager.itemError(i),this.manager.itemError(a),this.manager.itemError(c),typeof d=="function"&&d(G),w.disposeOnDemandRenderer();return}typeof f=="function"&&f(w),this.manager.itemEnd(i),this.manager.itemEnd(a),this.manager.itemEnd(c),w.disposeOnDemandRenderer()}};let S=!0,I=0,C=0,O=!0,k=0,E=0,z=!0,H=0,ne=0;const W=()=>{if(typeof m=="function"){const G=I+k+H,J=C+E+ne,B=S&&O&&z;m(new ProgressEvent("progress",{lengthComputable:B,loaded:J,total:G}))}};this.manager.itemStart(i),this.manager.itemStart(a),this.manager.itemStart(c);const Q=new pl(this._internalLoadingManager);Q.setResponseType("arraybuffer"),Q.setRequestHeader(this.requestHeader),Q.setPath(this.path),Q.setWithCredentials(this.withCredentials),Q.load(i,async G=>{if(typeof G=="string")throw new Error("Invalid sdr buffer");g=G,await v()},G=>{S=G.lengthComputable,C=G.loaded,I=G.total,W()},G=>{this.manager.itemError(i),typeof d=="function"&&d(G)});const X=new pl(this._internalLoadingManager);X.setResponseType("arraybuffer"),X.setRequestHeader(this.requestHeader),X.setPath(this.path),X.setWithCredentials(this.withCredentials),X.load(a,async G=>{if(typeof G=="string")throw new Error("Invalid gainmap buffer");x=G,await v()},G=>{O=G.lengthComputable,E=G.loaded,k=G.total,W()},G=>{this.manager.itemError(a),typeof d=="function"&&d(G)});const U=new pl(this._internalLoadingManager);return U.setRequestHeader(this.requestHeader),U.setPath(this.path),U.setWithCredentials(this.withCredentials),U.load(c,async G=>{if(typeof G!="string")throw new Error("Invalid metadata string");p=JSON.parse(G),await v()},G=>{z=G.lengthComputable,ne=G.loaded,H=G.total,W()},G=>{this.manager.itemError(c),typeof d=="function"&&d(G)}),w}}class uh extends Oc{load(i,a,c,f){const m=this.prepareQuadRenderer(),d=new pl(this._internalLoadingManager);return d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setPath(this.path),d.setWithCredentials(this.withCredentials),this.manager.itemStart(i),d.load(i,async w=>{if(typeof w=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const g=new Uint8Array(w);let x,p,v;try{const S=await rh(g);x=S.sdr,p=S.gainMap,v=S.metadata}catch(S){if(S instanceof Lc||S instanceof zc)console.warn(`Failure to reconstruct an HDR image from ${i}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),v={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},x=g;else throw S}try{await this.render(m,v,x.buffer,p==null?void 0:p.buffer)}catch(S){this.manager.itemError(i),typeof f=="function"&&f(S),m.disposeOnDemandRenderer();return}typeof a=="function"&&a(m),this.manager.itemEnd(i),m.disposeOnDemandRenderer()},c,w=>{this.manager.itemError(i),typeof f=="function"&&f(w)}),m}}const ei={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},Ac="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",yr=l=>Array.isArray(l),Ca=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function Sl({files:l=Ca,path:i="",preset:a=void 0,encoding:c=void 0,extensions:f}={}){let m=null,d=!1;a&&(Pa(a),l=ei[a],i=Ac),d=yr(l);const{extension:w,isCubemap:g}=Ia(l);if(m=ka(w),!m)throw new Error("useEnvironment: Unrecognized file extension: "+l);const x=un(I=>I.gl);P.useLayoutEffect(()=>{if(w!=="webp"&&w!=="jpg"&&w!=="jpeg")return;function I(){Sr.clear(m,d?[l]:l)}x.domElement.addEventListener("webglcontextlost",I,{once:!0})},[l,x.domElement]);const p=Sr(m,d?[l]:l,I=>{(w==="webp"||w==="jpg"||w==="jpeg")&&I.setRenderer(x),I.setPath==null||I.setPath(i),f&&f(I)});let v=d?p[0]:p;if(w==="jpg"||w==="jpeg"||w==="webp"){var S;v=(S=v.renderTarget)==null?void 0:S.texture}return v.mapping=g?id:ld,"colorSpace"in v?v.colorSpace=c??g?"srgb":"srgb-linear":v.encoding=c??g?Jp:Kp,v}const ch={files:Ca,path:"",preset:void 0,extensions:void 0};Sl.preload=l=>{const i={...ch,...l};let{files:a,path:c=""}=i;const{preset:f,extensions:m}=i;f&&(Pa(f),a=ei[f],c=Ac);const{extension:d}=Ia(a);if(d==="webp"||d==="jpg"||d==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const w=ka(d);if(!w)throw new Error("useEnvironment: Unrecognized file extension: "+a);Sr.preload(w,yr(a)?[a]:a,g=>{g.setPath==null||g.setPath(c),m&&m(g)})};const fh={files:Ca,preset:void 0};Sl.clear=l=>{const i={...fh,...l};let{files:a}=i;const{preset:c}=i;c&&(Pa(c),a=ei[c]);const{extension:f}=Ia(a),m=ka(f);if(!m)throw new Error("useEnvironment: Unrecognized file extension: "+a);Sr.clear(m,yr(a)?[a]:a)};function Pa(l){if(!(l in ei))throw new Error("Preset must be one of: "+Object.keys(ei).join(", "))}function Ia(l){var i;const a=yr(l)&&l.length===6,c=yr(l)&&l.length===3&&l.some(d=>d.endsWith("json")),f=yr(l)?l[0]:l;return{extension:a?"cube":c?"webp":f.startsWith("data:application/exr")?"exr":f.startsWith("data:application/hdr")?"hdr":f.startsWith("data:image/jpeg")?"jpg":(i=f.split(".").pop())==null||(i=i.split("?"))==null||(i=i.shift())==null?void 0:i.toLowerCase(),isCubemap:a,isGainmap:c}}function ka(l){return l==="cube"?od:l==="hdr"?Hp:l==="exr"?Gp:l==="jpg"||l==="jpeg"?uh:l==="webp"?sh:null}const dh=l=>l.current&&l.current.isScene,ph=l=>dh(l)?l.current:l;function Ta(l,i,a,c,f={}){var m,d,w,g,x;f={backgroundBlurriness:(m=f.blur)!==null&&m!==void 0?m:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...f};const p=ph(i||a),v=p.background,S=p.environment,I={backgroundBlurriness:p.backgroundBlurriness,backgroundIntensity:p.backgroundIntensity,backgroundRotation:(d=(w=p.backgroundRotation)==null||w.clone==null?void 0:w.clone())!==null&&d!==void 0?d:[0,0,0],environmentIntensity:p.environmentIntensity,environmentRotation:(g=(x=p.environmentRotation)==null||x.clone==null?void 0:x.clone())!==null&&g!==void 0?g:[0,0,0]};return l!=="only"&&(p.environment=c),l&&(p.background=c),kn(p,f),()=>{l!=="only"&&(p.environment=S),l&&(p.background=v),kn(p,I)}}function Na({scene:l,background:i=!1,map:a,...c}){const f=un(m=>m.scene);return P.useLayoutEffect(()=>{if(a)return Ta(i,l,f,a,c)}),null}function Fc({background:l=!1,scene:i,blur:a,backgroundBlurriness:c,backgroundIntensity:f,backgroundRotation:m,environmentIntensity:d,environmentRotation:w,...g}){const x=Sl(g),p=un(v=>v.scene);return P.useLayoutEffect(()=>Ta(l,i,p,x,{blur:a,backgroundBlurriness:c,backgroundIntensity:f,backgroundRotation:m,environmentIntensity:d,environmentRotation:w})),null}function hh({children:l,near:i=1,far:a=1e3,resolution:c=256,frames:f=1,map:m,background:d=!1,blur:w,backgroundBlurriness:g,backgroundIntensity:x,backgroundRotation:p,environmentIntensity:v,environmentRotation:S,scene:I,files:C,path:O,preset:k=void 0,extensions:E}){const z=un(U=>U.gl),H=un(U=>U.scene),ne=P.useRef(null),[W]=P.useState(()=>new ml),Q=P.useMemo(()=>{const U=new ad(c);return U.texture.type=At,U},[c]);P.useLayoutEffect(()=>(f===1&&ne.current.update(z,W),Ta(d,I,H,Q.texture,{blur:w,backgroundBlurriness:g,backgroundIntensity:x,backgroundRotation:p,environmentIntensity:v,environmentRotation:S})),[l,W,Q.texture,I,H,d,f,z]);let X=1;return gn(()=>{(f===1/0||X<f)&&(ne.current.update(z,W),X++)}),P.createElement(P.Fragment,null,Kd(P.createElement(P.Fragment,null,l,P.createElement("cubeCamera",{ref:ne,args:[i,a,Q]}),C||k?P.createElement(Fc,{background:!0,files:C,preset:k,path:O,extensions:E}):m?P.createElement(Na,{background:!0,map:m,extensions:E}):null),W))}function mh(l){var i,a,c,f;const m=Sl(l),d=l.map||m;P.useMemo(()=>xa({GroundProjectedEnvImpl:Bp}),[]);const w=P.useMemo(()=>[d],[d]),g=(i=l.ground)==null?void 0:i.height,x=(a=l.ground)==null?void 0:a.radius,p=(c=(f=l.ground)==null?void 0:f.scale)!==null&&c!==void 0?c:1e3;return P.createElement(P.Fragment,null,P.createElement(Na,Jn({},l,{map:d})),P.createElement("groundProjectedEnvImpl",{args:w,scale:p,height:g,radius:x}))}function vh(l){return l.ground?P.createElement(mh,l):l.map?P.createElement(Na,l):l.children?P.createElement(hh,l):P.createElement(Fc,l)}class gh extends ti{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${kc>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const yh=l=>new Xe().setFromSpherical(new sd(l,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),Uu=P.forwardRef(({radius:l=100,depth:i=50,count:a=5e3,saturation:c=0,factor:f=4,fade:m=!1,speed:d=1},w)=>{const g=P.useRef(),[x,p,v]=P.useMemo(()=>{const I=[],C=[],O=Array.from({length:a},()=>(.5+.5*Math.random())*f),k=new gl;let E=l+i;const z=i/a;for(let H=0;H<a;H++)E-=z*Math.random(),I.push(...yh(E).toArray()),k.setHSL(H/a,c,.9),C.push(k.r,k.g,k.b);return[new Float32Array(I),new Float32Array(C),new Float32Array(O)]},[a,i,f,l,c]);gn(I=>g.current&&(g.current.uniforms.time.value=I.clock.getElapsedTime()*d));const[S]=P.useState(()=>new gh);return P.createElement("points",{ref:w},P.createElement("bufferGeometry",null,P.createElement("bufferAttribute",{attach:"attributes-position",args:[x,3]}),P.createElement("bufferAttribute",{attach:"attributes-color",args:[p,3]}),P.createElement("bufferAttribute",{attach:"attributes-size",args:[v,1]})),P.createElement("primitive",{ref:g,object:S,attach:"material",blending:Jr,"uniforms-fade-value":m,depthWrite:!1,transparent:!0,vertexColors:!0}))}),wh=l=>{const i=new ud,a=l/1.8;return i.moveTo(0,a),i.quadraticCurveTo(0,0,a,0),i.quadraticCurveTo(0,0,0,-a),i.quadraticCurveTo(0,0,-a,0),i.quadraticCurveTo(0,0,0,a),i},Bu=wh(an),fa={depth:an*.4,bevelEnabled:!0,bevelThickness:.05,bevelSize:.05,bevelSegments:3},Sh=({data:l,timeSinceHit:i,color:a})=>{const c=P.useRef(null),f=P.useRef(null),m=6,d=10,w=m*i;gn(()=>{if(c.current&&c.current.scale.setScalar(Math.max(.01,1-i*1.5)),f.current)if(i<.15){const p=i/.15;f.current.visible=!0,f.current.scale.setScalar(1+p*4),f.current.material.opacity=1-p}else f.current.visible=!1});const g=({offsetDir:x,moveDir:p,scale:v=1})=>{const S=P.useRef(null);return gn(()=>{S.current&&(S.current.position.x=x[0]+p[0]*w,S.current.position.y=x[1]+p[1]*w,S.current.position.z=x[2]+p[2]*w,S.current.rotation.x+=p[1]*.1*d,S.current.rotation.y+=p[0]*.1*d)}),T.jsx(bp,{ref:S,args:[an*.3*v],position:[x[0],x[1],x[2]],children:T.jsx("meshStandardMaterial",{color:a,roughness:.1,metalness:.9,emissive:a,emissiveIntensity:.5})})};return T.jsxs("group",{ref:c,children:[T.jsxs("mesh",{ref:f,children:[T.jsx("sphereGeometry",{args:[an*1.2,16,16]}),T.jsx("meshBasicMaterial",{color:"white",transparent:!0,toneMapped:!1})]}),T.jsx(g,{offsetDir:[0,.2,0],moveDir:[0,1.5,-.5],scale:.8}),T.jsx(g,{offsetDir:[.2,0,0],moveDir:[1.5,0,-.5],scale:.8}),T.jsx(g,{offsetDir:[0,-.2,0],moveDir:[0,-1.5,-.5],scale:.8}),T.jsx(g,{offsetDir:[-.2,0,0],moveDir:[-1.5,0,-.5],scale:.8}),T.jsx(g,{offsetDir:[.1,.1,.1],moveDir:[1,1,1],scale:.5}),T.jsx(g,{offsetDir:[-.1,-.1,-.1],moveDir:[-1,-1,1],scale:.5})]})},xh=({data:l,zPos:i,currentTime:a})=>{const c=l.type==="left"?Kn.left:Kn.right,f=P.useMemo(()=>[wc[l.lineIndex],Sc[l.lineLayer],i],[l.lineIndex,l.lineLayer,i]);return l.missed?null:l.hit&&l.hitTime?T.jsx("group",{position:f,children:T.jsx(Sh,{data:l,timeSinceHit:a-l.hitTime,color:c})}):l.requiresGrip?T.jsxs("group",{position:f,children:[T.jsxs("mesh",{castShadow:!0,receiveShadow:!0,children:[T.jsx("sphereGeometry",{args:[an*.7,32,32]}),T.jsx("meshPhysicalMaterial",{color:"#ffffff",emissive:c,emissiveIntensity:2,roughness:.1,metalness:.8,transmission:.5,thickness:1})]}),T.jsxs("mesh",{rotation:[Math.PI/2,0,0],children:[T.jsx("torusGeometry",{args:[an*.9,.05,16,64]}),T.jsx("meshStandardMaterial",{color:c,emissive:c,emissiveIntensity:5,toneMapped:!1})]}),T.jsx("pointLight",{color:c,intensity:2,distance:2})]}):T.jsxs("group",{position:f,children:[T.jsx("group",{rotation:[0,0,0],children:T.jsx("group",{position:[0,0,-an*.2],children:T.jsx($p,{args:[Bu,fa],castShadow:!0,receiveShadow:!0,children:T.jsx("meshPhysicalMaterial",{color:c,roughness:.2,metalness:.1,transmission:.1,thickness:.5,emissive:c,emissiveIntensity:.8})})})}),T.jsxs("mesh",{position:[0,0,an*.1],children:[T.jsx("octahedronGeometry",{args:[an*.2,0]}),T.jsx("meshBasicMaterial",{color:"white",toneMapped:!1,transparent:!0,opacity:.8})]}),T.jsx("group",{position:[0,0,-an*.2],children:T.jsxs("mesh",{children:[T.jsx("extrudeGeometry",{args:[Bu,{...fa,depth:fa.depth*1.1}]}),T.jsx("meshBasicMaterial",{color:c,wireframe:!0,transparent:!0,opacity:.3})]})})]})},_h=bu.memo(xh,(l,i)=>i.data.hit?!1:l.zPos===i.zPos&&l.data.hit===i.data.hit&&l.data.missed===i.data.missed),Hu=({type:l,positionRef:i,velocityRef:a,isGrippingRef:c})=>{const f=P.useRef(null),m=P.useRef(null),d=P.useRef(null),w=P.useRef(null),g=P.useRef(null),x=P.useRef(null),p=1,v=P.useRef(new cd);gn((C,O)=>{if(!f.current)return;const k=i.current,E=a.current,z=c.current,H=C.clock.elapsedTime;if(k){f.current.visible=!0,f.current.position.lerp(k,.5);const ne=-Math.PI/3.5,W=0,Q=l==="left"?.2:-.2;let X=0,U=0,G=0;E&&(X=E.y*.05,G=-E.x*.05,X+=E.z*.02),v.current.set(ne+X,W+U,Q+G),f.current.rotation.x=Zt.lerp(f.current.rotation.x,v.current.x,.2),f.current.rotation.y=Zt.lerp(f.current.rotation.y,v.current.y,.2),f.current.rotation.z=Zt.lerp(f.current.rotation.z,v.current.z,.2);const J=10*O,B=z?8:2,re=z?6:3;g.current&&(g.current.intensity=Zt.lerp(g.current.intensity,B,J),g.current.distance=Zt.lerp(g.current.distance,re,J));const ce=z?(Math.random()-.5)*.05:0,fe=z?Math.sin(H*30)*.2:0,xe=z?1.8:1;if(m.current){const ie=Zt.lerp(m.current.scale.x,xe+fe,J);m.current.scale.set(ie,1,ie),m.current.position.x=ce,m.current.position.z=ce,m.current.material.color.set(z?"#ffffff":"white")}if(d.current){const ie=z?1.5:1,Se=Zt.lerp(d.current.scale.x,ie,J);d.current.scale.set(Se,1,Se)}if(x.current){const ie=z?1.2:0,Se=x.current.scale.x,V=Zt.lerp(Se,ie,J);x.current.scale.setScalar(V),x.current.rotation.x+=O,x.current.rotation.z-=O*2}if(w.current){const ie=z?.5+Math.random()*.2:.05,Se=z?3:1.2,V=Zt.lerp(w.current.scale.x,Se,J);w.current.scale.set(V,1,V),w.current.material.opacity=Zt.lerp(w.current.material.opacity,ie,J)}}else f.current.visible=!1});const S=l==="left"?Kn.left:Kn.right,I=l==="left"?"#93c5fd":"#fca5a5";return T.jsxs("group",{ref:f,children:[T.jsxs("mesh",{position:[0,-.06,0],children:[T.jsx("cylinderGeometry",{args:[.02,.02,.12,16]}),T.jsx("meshStandardMaterial",{color:"#1a1a1a",roughness:.6,metalness:.8})]}),T.jsxs("mesh",{position:[0,-.13,0],children:[T.jsx("cylinderGeometry",{args:[.025,.025,.02,16]}),T.jsx("meshStandardMaterial",{color:"#888",roughness:.3,metalness:1})]}),T.jsxs("mesh",{position:[0,-.08,0],children:[T.jsx("torusGeometry",{args:[.021,.002,8,24]}),T.jsx("meshStandardMaterial",{color:"#aaa",roughness:.2,metalness:1})]}),T.jsxs("mesh",{position:[0,-.04,0],children:[T.jsx("torusGeometry",{args:[.021,.002,8,24]}),T.jsx("meshStandardMaterial",{color:"#aaa",roughness:.2,metalness:1})]}),T.jsxs("mesh",{position:[0,.01,0],children:[T.jsx("cylinderGeometry",{args:[.035,.025,.05,16]}),T.jsx("meshStandardMaterial",{color:"#C0C0C0",roughness:.2,metalness:1})]}),T.jsxs("mesh",{position:[0,.036,0],rotation:[Math.PI/2,0,0],children:[T.jsx("ringGeometry",{args:[.015,.03,32]}),T.jsx("meshBasicMaterial",{color:S,toneMapped:!1,side:qu})]}),T.jsxs("mesh",{ref:m,position:[0,.05+p/2,0],children:[T.jsx("cylinderGeometry",{args:[.008,.008,p,12]}),T.jsx("meshBasicMaterial",{color:"white",toneMapped:!1})]}),T.jsxs("mesh",{ref:d,position:[0,.05+p/2,0],children:[T.jsx("capsuleGeometry",{args:[.02,p,16,32]}),T.jsx("meshBasicMaterial",{color:S,toneMapped:!1,transparent:!0,opacity:.6,blending:Jr,depthWrite:!1})]}),T.jsxs("mesh",{ref:w,position:[0,.05+p/2,0],children:[T.jsx("capsuleGeometry",{args:[.035,p*1.05,16,32]}),T.jsx("meshBasicMaterial",{color:S,toneMapped:!1,transparent:!0,opacity:.1,blending:Jr,depthWrite:!1})]}),T.jsxs("group",{ref:x,position:[0,.05+p/2,0],children:[T.jsxs("mesh",{position:[0,0,0],scale:[.5,2,.5],children:[T.jsx("icosahedronGeometry",{args:[.08,0]}),T.jsx("meshBasicMaterial",{color:I,toneMapped:!1,transparent:!0,opacity:.4,blending:Jr,wireframe:!0})]}),T.jsxs("mesh",{position:[0,-.2,0],scale:[.6,1,.6],children:[T.jsx("icosahedronGeometry",{args:[.1,0]}),T.jsx("meshBasicMaterial",{color:I,toneMapped:!1,transparent:!0,opacity:.2,blending:Jr})]})]}),T.jsx("pointLight",{ref:g,color:S,intensity:2,distance:3,decay:2,position:[0,.5,0]})]})},Gu=60/xc,Eh=({gameStatus:l,audioRef:i,handPositionsRef:a,chart:c,onNoteHit:f,onNoteMiss:m,onSongEnd:d})=>{const[w,g]=P.useState(c),[x,p]=P.useState(0),v=P.useRef([]),S=P.useRef(0),I=P.useRef(0),C=P.useRef(null),O=P.useRef(null),k=P.useRef(null),E=P.useMemo(()=>new Xe,[]),z=P.useMemo(()=>new Xe,[]),H=(B,re)=>{I.current=re?.3:.15,f(B,re)};gn((B,re)=>{if(i.current&&l===mt.PLAYING){const Se=i.current.currentTime%Gu/Gu,V=Math.pow(1-Se,4);O.current&&(O.current.intensity=.1+V*.3),k.current&&(k.current.intensity=.5+V*1.5)}if(I.current>0&&C.current){const ie=I.current;C.current.position.x=(Math.random()-.5)*ie,C.current.position.y=1.8+(Math.random()-.5)*ie,C.current.position.z=4+(Math.random()-.5)*ie,I.current=Zt.lerp(I.current,0,10*re),I.current<.01&&(I.current=0,C.current.position.set(0,1.8,4))}if(l!==mt.PLAYING||!i.current)return;const ce=i.current.currentTime;if(p(ce),i.current.ended){d();return}const fe=Math.abs(gp-Xr)/sa;for(;S.current<w.length;){const ie=w[S.current];if(ie.time-fe<=ce)v.current.push(ie),S.current++;else break}const xe=a.current;for(let ie=v.current.length-1;ie>=0;ie--){const Se=v.current[ie];if(Se.hit||Se.missed)continue;const V=Se.time-ce,ae=Xr-V*sa;if(ae>yp){Se.missed=!0,m(Se),v.current.splice(ie,1);continue}if(ae>Xr-1.5&&ae<Xr+1){const Y=Se.type==="left"?xe.left:xe.right,pe=Se.type==="left"?xe.leftVelocity:xe.rightVelocity;if(Y){const me=E.set(wc[Se.lineIndex],Sc[Se.lineLayer],ae);if(Y.distanceTo(me)<.8){let we=!0;if(pe.length()<.1)continue;const tt=Se.type==="left"?xe.leftGripping:xe.rightGripping;if(Se.requiresGrip){if(!tt)continue}else tt&&(we=!1);if(Se.cutDirection!==Tn.ANY){const Ie=_p[Se.cutDirection];z.copy(pe).normalize(),z.dot(Ie)<.3&&(we=!1)}Se.hit=!0,Se.hitTime=ce,H(Se,we),v.current.splice(ie,1)}}}}});const ne=P.useMemo(()=>w.filter(B=>!B.missed&&(!B.hit||x-(B.hitTime||0)<.5)&&B.time-x<5&&B.time-x>-2),[w,x]),W=P.useRef(null),Q=P.useRef(null),X=P.useRef(null),U=P.useRef(null),G=P.useRef(!1),J=P.useRef(!1);return gn(()=>{W.current=a.current.left,Q.current=a.current.right,X.current=a.current.leftVelocity,U.current=a.current.rightVelocity,G.current=a.current.leftGripping,J.current=a.current.rightGripping}),T.jsxs(T.Fragment,{children:[T.jsx(Yp,{ref:C,makeDefault:!0,position:[0,1.8,4],fov:60}),T.jsx("color",{attach:"background",args:["#050505"]}),T.jsx("fog",{attach:"fog",args:["#050505",10,50]}),T.jsx("ambientLight",{ref:O,intensity:.2}),T.jsx("spotLight",{ref:k,position:[0,10,5],angle:.5,penumbra:1,intensity:1,castShadow:!0}),T.jsx(vh,{preset:"night"}),T.jsx(qp,{position:[0,0,0],args:[6,100],cellThickness:.1,cellColor:"#333",sectionSize:5,sectionThickness:1.5,sectionColor:Kn.right,fadeDistance:60,infiniteGrid:!0}),T.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-.01,0],children:[T.jsx("planeGeometry",{args:[4,100]}),T.jsx("meshStandardMaterial",{color:"#111",roughness:.8,metalness:.5})]}),T.jsx(Uu,{radius:100,depth:20,count:5e3,factor:4,saturation:1,fade:!0,speed:2}),T.jsx("group",{rotation:[0,0,Math.PI/4],children:T.jsx(Uu,{radius:150,depth:50,count:2e3,factor:2,saturation:0,fade:!0,speed:.5})}),T.jsx(Hu,{type:"left",positionRef:W,velocityRef:X,isGrippingRef:G}),T.jsx(Hu,{type:"right",positionRef:Q,velocityRef:U,isGrippingRef:J}),ne.map(B=>T.jsx(_h,{data:B,zPos:Xr-(B.time-x)*sa,currentTime:x},B.id))]})},Mh=[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[0,9],[9,10],[10,11],[11,12],[0,13],[13,14],[14,15],[15,16],[0,17],[17,18],[18,19],[19,20],[5,9],[9,13],[13,17],[0,5],[0,17]],Rh=l=>{const i=l[0];let a=0;const c=[{tip:8,pip:6},{tip:12,pip:10},{tip:16,pip:14},{tip:20,pip:18}];for(const f of c){const m=l[f.tip],d=l[f.pip],w=Math.pow(m.x-i.x,2)+Math.pow(m.y-i.y,2)+Math.pow(m.z-i.z,2),g=Math.pow(d.x-i.x,2)+Math.pow(d.y-i.y,2)+Math.pow(d.z-i.z,2);w<g&&a++}return a>=3},Ch=({videoRef:l,resultsRef:i,isCameraReady:a})=>{const c=P.useRef(null);return P.useEffect(()=>{if(!a)return;let f;const m=()=>{const d=c.current,w=l.current;if(d&&w&&w.readyState>=2){const g=d.getContext("2d");if(g&&(d.width!==w.videoWidth&&(d.width=w.videoWidth),d.height!==w.videoHeight&&(d.height=w.videoHeight),g.clearRect(0,0,d.width,d.height),g.save(),g.scale(-1,1),g.translate(-d.width,0),g.globalAlpha=.8,g.drawImage(w,0,0,d.width,d.height),g.restore(),g.globalAlpha=1,i.current&&i.current.landmarks))for(let x=0;x<i.current.landmarks.length;x++){const p=i.current.landmarks[x];if(!i.current.handedness||!i.current.handedness[x]||!i.current.handedness[x][0])continue;const C=i.current.handedness[x][0].categoryName==="Right"?Kn.right:Kn.left,O=Rh(p);g.strokeStyle=C,g.fillStyle=C,g.lineWidth=O?6:3,g.beginPath();for(const[E,z]of Mh){const H=p[E],ne=p[z];g.moveTo((1-H.x)*d.width,H.y*d.height),g.lineTo((1-ne.x)*d.width,ne.y*d.height)}g.stroke();for(const E of p)g.beginPath(),g.arc((1-E.x)*d.width,E.y*d.height,4,0,2*Math.PI),g.fill();const k=p[8];if(g.beginPath(),g.fillStyle="white",g.arc((1-k.x)*d.width,k.y*d.height,7,0,2*Math.PI),g.fill(),O){g.font="bold 24px monospace",g.fillStyle="white",g.strokeStyle="black",g.lineWidth=4;const E=(1-p[0].x)*d.width,z=p[0].y*d.height;g.strokeText("GRIP",E-30,z-20),g.fillText("GRIP",E-30,z-20)}}}f=requestAnimationFrame(m)};return m(),()=>{f&&cancelAnimationFrame(f)}},[a,l,i]),a?T.jsxs("div",{className:"fixed bottom-4 right-4 w-64 h-48 bg-black/60 border-2 border-blue-500/30 rounded-xl overflow-hidden backdrop-blur-md z-50 shadow-[0_0_20px_rgba(0,0,0,0.5)] pointer-events-none transition-opacity duration-500",children:[T.jsx("div",{className:"absolute top-0 left-0 right-0 bg-black/40 text-[10px] text-blue-300/70 px-2 py-1 font-mono uppercase tracking-widest",children:""}),T.jsx("canvas",{ref:c,className:"w-full h-full object-cover mt-4"})]}):null};/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ph=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jc=(...l)=>l.filter((i,a,c)=>!!i&&c.indexOf(i)===a).join(" ");/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ih={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=P.forwardRef(({color:l="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:c,className:f="",children:m,iconNode:d,...w},g)=>P.createElement("svg",{ref:g,...Ih,width:i,height:i,stroke:l,strokeWidth:c?Number(a)*24/Number(i):a,className:jc("lucide",f),...w},[...d.map(([x,p])=>P.createElement(x,p)),...Array.isArray(m)?m:[m]]));/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=(l,i)=>{const a=P.forwardRef(({className:c,...f},m)=>P.createElement(kh,{ref:m,iconNode:i,className:jc(`lucide-${Ph(l)}`,c),...f}));return a.displayName=`${l}`,a};/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=_r("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=_r("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=_r("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=_r("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=_r("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=_r("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),Fh=()=>{const[l,i]=P.useState(mt.LOADING),[a,c]=P.useState(0),[f,m]=P.useState(0),[d,w]=P.useState(1),[g,x]=P.useState(100),[p,v]=P.useState(null),S=P.useRef(new Audio(wp)),I=P.useRef(null),{isCameraReady:C,handPositionsRef:O,lastResultsRef:k,error:E}=Rp(I);P.useEffect(()=>{const X=U=>{U.preventDefault(),v(U)};return window.addEventListener("beforeinstallprompt",X),()=>window.removeEventListener("beforeinstallprompt",X)},[]);const z=async()=>{if(!p)return;p.prompt();const{outcome:X}=await p.userChoice;X==="accepted"&&v(null)},H=P.useCallback((X,U)=>{if(U){let G=150;navigator.vibrate&&navigator.vibrate(40),m(J=>{const B=J+1;return B>30?w(8):B>20?w(4):B>10?w(2):w(1),B}),c(J=>J+G*d),x(J=>Math.min(100,J+2))}else m(0),w(1),c(G=>Math.max(0,G-50)),x(G=>Math.max(0,G-5)),navigator.vibrate&&navigator.vibrate(20)},[d]),ne=P.useCallback(X=>{m(0),w(1),c(U=>Math.max(0,U-50)),x(U=>{const G=U-15;return G<=0?(setTimeout(()=>Q(!1),0),0):G})},[]),W=async()=>{if(C){c(0),m(0),w(1),x(100),ju.forEach(X=>{X.hit=!1,X.missed=!1});try{S.current&&(S.current.currentTime=0,await S.current.play(),i(mt.PLAYING))}catch(X){console.error("Audio play failed",X),alert("")}}},Q=X=>{i(X?mt.VICTORY:mt.GAME_OVER),S.current&&S.current.pause()};return P.useEffect(()=>{l===mt.LOADING&&C&&i(mt.IDLE)},[C,l]),T.jsxs("div",{className:"relative w-full h-screen bg-black overflow-hidden font-sans",children:[T.jsx("video",{ref:I,className:"absolute opacity-0 pointer-events-none",playsInline:!0,muted:!0,autoPlay:!0,style:{width:"640px",height:"480px"}}),T.jsx(vp,{shadows:!0,dpr:[1,2],children:l!==mt.LOADING&&T.jsx(Eh,{gameStatus:l,audioRef:S,handPositionsRef:O,chart:ju,onNoteHit:H,onNoteMiss:ne,onSongEnd:()=>Q(!0)})}),T.jsx(Ch,{videoRef:I,resultsRef:k,isCameraReady:C}),T.jsxs("div",{className:"absolute inset-0 pointer-events-none flex flex-col justify-between p-6 z-10",children:[T.jsxs("div",{className:"flex items-start text-white w-full",children:[T.jsx("div",{className:"w-1/3",children:T.jsxs("div",{className:"max-w-xs",children:[T.jsx("div",{className:"h-4 bg-gray-800 rounded-full overflow-hidden border-2 border-gray-700",children:T.jsx("div",{className:`h-full transition-all duration-300 ease-out ${g>50?"bg-green-500":g>20?"bg-yellow-500":"bg-red-600"}`,style:{width:`${g}%`}})}),T.jsx("p",{className:"text-xs mt-1 opacity-70",children:" (HP)"})]})}),T.jsxs("div",{className:"w-1/3 flex flex-col items-center",children:[T.jsx("h1",{className:"text-5xl font-bold tracking-wider drop-shadow-[0_0_10px_rgba(59,130,246,0.8)]",children:a.toLocaleString()}),T.jsxs("div",{className:"mt-2 flex flex-col items-center",children:[T.jsxs("p",{className:`text-2xl font-bold ${f>10?"text-blue-400 scale-110":"text-gray-300"} transition-all`,children:[f,"  (COMBO)"]}),d>1&&T.jsxs("span",{className:"text-sm px-2 py-1 bg-blue-900 rounded-full mt-1 animate-pulse",children:[d,"x "]})]})]}),T.jsx("div",{className:"w-1/3"})]}),T.jsxs("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-auto",children:[l===mt.LOADING&&T.jsxs("div",{className:"bg-black/80 p-10 rounded-2xl flex flex-col items-center border border-blue-900/50 backdrop-blur-md",children:[T.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500 mb-6"}),T.jsx("h2",{className:"text-2xl text-white font-bold mb-2",children:""}),T.jsx("p",{className:"text-blue-300",children:C?"...":"..."}),E&&T.jsx("p",{className:"text-red-500 mt-4 max-w-xs text-center",children:E})]}),l===mt.IDLE&&T.jsxs("div",{className:"bg-black/80 p-12 rounded-3xl text-center border-2 border-blue-500/30 backdrop-blur-xl max-w-lg",children:[T.jsx("div",{className:"mb-6 flex justify-center",children:T.jsx(Oh,{className:"w-16 h-16 text-blue-400"})}),T.jsxs("h1",{className:"text-7xl font-black text-white mb-6 tracking-tighter italic drop-shadow-[0_0_30px_rgba(59,130,246,0.6)]",children:["TEMPO ",T.jsx("span",{className:"text-blue-500",children:"STRIKE"})]}),T.jsxs("div",{className:"space-y-4 text-gray-300 mb-8",children:[T.jsxs("p",{className:"flex items-center justify-center gap-2",children:[T.jsx(Nh,{className:"w-5 h-5 text-blue-400"}),T.jsx("span",{children:" 1.5 "})]}),T.jsxs("p",{children:[" ",T.jsx("span",{className:"text-blue-500 font-bold",children:""}),"  ",T.jsx("span",{className:"text-red-500 font-bold",children:""})," "]}),T.jsx("p",{className:"text-yellow-400 font-bold",children:""}),T.jsx("p",{children:""})]}),T.jsxs("div",{className:"flex flex-col gap-4 items-center",children:[C?T.jsxs("button",{onClick:W,className:"bg-blue-600 hover:bg-blue-500 text-white text-xl font-bold py-4 px-12 rounded-full transition-all transform hover:scale-105 hover:shadow-[0_0_30px_rgba(59,130,246,0.6)] flex items-center justify-center gap-3",children:[T.jsx(zh,{fill:"currentColor"})," "]}):T.jsxs("div",{className:"flex items-center justify-center text-red-400 gap-2 bg-red-900/20 p-4 rounded-lg",children:[T.jsx(Ah,{})," "]}),p&&T.jsxs("button",{onClick:z,className:"text-blue-300 hover:text-white hover:bg-white/10 text-sm py-2 px-6 rounded-full transition-colors flex items-center gap-2",children:[T.jsx(Th,{size:16})," "]})]}),T.jsx("div",{className:"text-white/30 text-sm text-center mt-8",children:" v1.0.0"})]}),(l===mt.GAME_OVER||l===mt.VICTORY)&&T.jsxs("div",{className:"bg-black/90 p-12 rounded-3xl text-center border-2 border-white/10 backdrop-blur-xl",children:[T.jsx("h2",{className:`text-6xl font-bold mb-4 ${l===mt.VICTORY?"text-green-400":"text-red-500"}`,children:l===mt.VICTORY?"":""}),T.jsxs("p",{className:"text-white text-3xl mb-8",children:[": ",a.toLocaleString()]}),T.jsxs("button",{onClick:()=>i(mt.IDLE),className:"bg-white/10 hover:bg-white/20 text-white text-xl py-3 px-8 rounded-full flex items-center justify-center mx-auto gap-2 transition-colors",children:[T.jsx(Lh,{})," "]})]})]})]})]})},Dc=document.getElementById("root");if(!Dc)throw new Error("Could not find root element to mount to");const Wu=document.getElementById("loading-text");Wu&&(Wu.style.display="none");gd.createRoot(Dc).render(T.jsx(bu.StrictMode,{children:T.jsx(Fh,{})}));
