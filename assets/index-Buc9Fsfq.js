var Pf=Object.defineProperty;var kf=(l,i,a)=>i in l?Pf(l,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[i]=a;var et=(l,i,a)=>kf(l,typeof i!="symbol"?i+"":i,a);import{r as ga,g as wl,a as Tf}from"./vendor-react-CRB3T2We.js";import{R as Zu,O as Vu,P as Nf,S as ml,a as Vo,V as zf,b as Lf,B as Of,N as Af,A as Ff,W as Qu,C as jf,c as Xe,d as Yu,e as Df,f as Uf,M as Bf,L as Qo,T as Yr,g as Sn,U as vl,h as gl,i as Hf,j as Xu,k as ya,I as Gf,l as ti,D as qu,m as Ku,H as At,F as ar,n as gn,o as Qt,p as Wf,q as Zt,r as Zf,s as wa,t as Vf,u as Qf,v as Yf,w as Tr,x as Ju,y as yl,z as Xf,E as da,G as qf,J as Kf,K as Jf,Q as bf,X as $f,Y as ed,Z as td,_ as uu,$ as rd,a0 as pl,a1 as nd,a2 as id,a3 as ld,a4 as od,a5 as ad,a6 as Jn,a7 as sd,a8 as ud,a9 as cd}from"./vendor-three-Bf9Xd_Ux.js";import{X as fd,k as dd}from"./vendor-mediapipe-BJf9tSCR.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))c(f);new MutationObserver(f=>{for(const m of f)if(m.type==="childList")for(const d of m.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&c(d)}).observe(document,{childList:!0,subtree:!0});function a(f){const m={};return f.integrity&&(m.integrity=f.integrity),f.referrerPolicy&&(m.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?m.credentials="include":f.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function c(f){if(f.ep)return;f.ep=!0;const m=a(f);fetch(f.href,m)}})();var Yo={exports:{}},Vn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cu;function pd(){if(cu)return Vn;cu=1;var l=ga(),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,f=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,m={key:!0,ref:!0,__self:!0,__source:!0};function d(w,g,x){var p,v={},S=null,I=null;x!==void 0&&(S=""+x),g.key!==void 0&&(S=""+g.key),g.ref!==void 0&&(I=g.ref);for(p in g)c.call(g,p)&&!m.hasOwnProperty(p)&&(v[p]=g[p]);if(w&&w.defaultProps)for(p in g=w.defaultProps,g)v[p]===void 0&&(v[p]=g[p]);return{$$typeof:i,type:w,key:S,ref:I,props:v,_owner:f.current}}return Vn.Fragment=a,Vn.jsx=d,Vn.jsxs=d,Vn}var fu;function hd(){return fu||(fu=1,Yo.exports=pd()),Yo.exports}var T=hd(),C=ga();const bu=wl(C);var al={},du;function md(){if(du)return al;du=1;var l=Tf();return al.createRoot=l.createRoot,al.hydrateRoot=l.hydrateRoot,al}var vd=md();const gd=wl(vd);var Xo={exports:{}},Cr={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pu;function yd(){return pu||(pu=1,Cr.ConcurrentRoot=1,Cr.ContinuousEventPriority=4,Cr.DefaultEventPriority=16,Cr.DiscreteEventPriority=1,Cr.IdleEventPriority=536870912,Cr.LegacyRoot=0),Cr}var hu;function wd(){return hu||(hu=1,Xo.exports=yd()),Xo.exports}var yn=wd();function Sd(l){let i;const a=new Set,c=(x,p)=>{const v=typeof x=="function"?x(i):x;if(v!==i){const S=i;i=p?v:Object.assign({},i,v),a.forEach(I=>I(i,S))}},f=()=>i,m=(x,p=f,v=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let S=p(i);function I(){const N=p(i);if(!v(S,N)){const F=S;x(S=N,F)}}return a.add(I),()=>a.delete(I)},g={setState:c,getState:f,subscribe:(x,p,v)=>p||v?m(x,p,v):(a.add(x),()=>a.delete(x)),destroy:()=>a.clear()};return i=l(c,f,g),g}const xd=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),mu=xd?C.useEffect:C.useLayoutEffect;function $u(l){const i=typeof l=="function"?Sd(l):l,a=(c=i.getState,f=Object.is)=>{const[,m]=C.useReducer(P=>P+1,0),d=i.getState(),w=C.useRef(d),g=C.useRef(c),x=C.useRef(f),p=C.useRef(!1),v=C.useRef();v.current===void 0&&(v.current=c(d));let S,I=!1;(w.current!==d||g.current!==c||x.current!==f||p.current)&&(S=c(d),I=!f(v.current,S)),mu(()=>{I&&(v.current=S),w.current=d,g.current=c,x.current=f,p.current=!1});const N=C.useRef(d);mu(()=>{const P=()=>{try{const k=i.getState(),B=g.current(k);x.current(v.current,B)||(w.current=k,v.current=B,m())}catch{p.current=!0,m()}},M=i.subscribe(P);return i.getState()!==N.current&&P(),M},[]);const F=I?S:v.current;return C.useDebugValue(F),F};return Object.assign(a,i),a[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const c=[a,i];return{next(){const f=c.length<=0;return{value:c.shift(),done:f}}}},a}const _d=l=>typeof l=="object"&&typeof l.then=="function",Xr=[];function ec(l,i,a=(c,f)=>c===f){if(l===i)return!0;if(!l||!i)return!1;const c=l.length;if(i.length!==c)return!1;for(let f=0;f<c;f++)if(!a(l[f],i[f]))return!1;return!0}function tc(l,i=null,a=!1,c={}){i===null&&(i=[l]);for(const m of Xr)if(ec(i,m.keys,m.equal)){if(a)return;if(Object.prototype.hasOwnProperty.call(m,"error"))throw m.error;if(Object.prototype.hasOwnProperty.call(m,"response"))return c.lifespan&&c.lifespan>0&&(m.timeout&&clearTimeout(m.timeout),m.timeout=setTimeout(m.remove,c.lifespan)),m.response;if(!a)throw m.promise}const f={keys:i,equal:c.equal,remove:()=>{const m=Xr.indexOf(f);m!==-1&&Xr.splice(m,1)},promise:(_d(l)?l:l(...i)).then(m=>{f.response=m,c.lifespan&&c.lifespan>0&&(f.timeout=setTimeout(f.remove,c.lifespan))}).catch(m=>f.error=m)};if(Xr.push(f),!a)throw f.promise}const Ed=(l,i,a)=>tc(l,i,!1,a),Md=(l,i,a)=>void tc(l,i,!0,a),Rd=l=>{if(l===void 0||l.length===0)Xr.splice(0,Xr.length);else{const i=Xr.find(a=>ec(l,a.keys,a.equal));i&&i.remove()}};var qo={exports:{}},Ko={exports:{}},Jo={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vu;function Cd(){return vu||(vu=1,(function(l){function i(Q,ae){var X=Q.length;Q.push(ae);e:for(;0<X;){var pe=X-1>>>1,me=Q[pe];if(0<f(me,ae))Q[pe]=ae,Q[X]=me,X=pe;else break e}}function a(Q){return Q.length===0?null:Q[0]}function c(Q){if(Q.length===0)return null;var ae=Q[0],X=Q.pop();if(X!==ae){Q[0]=X;e:for(var pe=0,me=Q.length,Se=me>>>1;pe<Se;){var Ve=2*(pe+1)-1,tt=Q[Ve],Pe=Ve+1,st=Q[Pe];if(0>f(tt,X))Pe<me&&0>f(st,tt)?(Q[pe]=st,Q[Pe]=X,pe=Pe):(Q[pe]=tt,Q[Ve]=X,pe=Ve);else if(Pe<me&&0>f(st,X))Q[pe]=st,Q[Pe]=X,pe=Pe;else break e}}return ae}function f(Q,ae){var X=Q.sortIndex-ae.sortIndex;return X!==0?X:Q.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var m=performance;l.unstable_now=function(){return m.now()}}else{var d=Date,w=d.now();l.unstable_now=function(){return d.now()-w}}var g=[],x=[],p=1,v=null,S=3,I=!1,N=!1,F=!1,P=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B(Q){for(var ae=a(x);ae!==null;){if(ae.callback===null)c(x);else if(ae.startTime<=Q)c(x),ae.sortIndex=ae.expirationTime,i(g,ae);else break;ae=a(x)}}function J(Q){if(F=!1,B(Q),!N)if(a(g)!==null)N=!0,ne(Y);else{var ae=a(x);ae!==null&&we(J,ae.startTime-Q)}}function Y(Q,ae){N=!1,F&&(F=!1,M(G),G=-1),I=!0;var X=S;try{for(B(ae),v=a(g);v!==null&&(!(v.expirationTime>ae)||Q&&!H());){var pe=v.callback;if(typeof pe=="function"){v.callback=null,S=v.priorityLevel;var me=pe(v.expirationTime<=ae);ae=l.unstable_now(),typeof me=="function"?v.callback=me:v===a(g)&&c(g),B(ae)}else c(g);v=a(g)}if(v!==null)var Se=!0;else{var Ve=a(x);Ve!==null&&we(J,Ve.startTime-ae),Se=!1}return Se}finally{v=null,S=X,I=!1}}var Z=!1,le=null,G=-1,U=5,W=-1;function H(){return!(l.unstable_now()-W<U)}function $(){if(le!==null){var Q=l.unstable_now();W=Q;var ae=!0;try{ae=le(!0,Q)}finally{ae?ce():(Z=!1,le=null)}}else Z=!1}var ce;if(typeof k=="function")ce=function(){k($)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,xe=se.port2;se.port1.onmessage=$,ce=function(){xe.postMessage(null)}}else ce=function(){P($,0)};function ne(Q){le=Q,Z||(Z=!0,ce())}function we(Q,ae){G=P(function(){Q(l.unstable_now())},ae)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(Q){Q.callback=null},l.unstable_continueExecution=function(){N||I||(N=!0,ne(Y))},l.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<Q?Math.floor(1e3/Q):5},l.unstable_getCurrentPriorityLevel=function(){return S},l.unstable_getFirstCallbackNode=function(){return a(g)},l.unstable_next=function(Q){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var X=S;S=ae;try{return Q()}finally{S=X}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(Q,ae){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var X=S;S=Q;try{return ae()}finally{S=X}},l.unstable_scheduleCallback=function(Q,ae,X){var pe=l.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?pe+X:pe):X=pe,Q){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=X+me,Q={id:p++,callback:ae,priorityLevel:Q,startTime:X,expirationTime:me,sortIndex:-1},X>pe?(Q.sortIndex=X,i(x,Q),a(g)===null&&Q===a(x)&&(F?(M(G),G=-1):F=!0,we(J,X-pe))):(Q.sortIndex=me,i(g,Q),N||I||(N=!0,ne(Y))),Q},l.unstable_shouldYield=H,l.unstable_wrapCallback=function(Q){var ae=S;return function(){var X=S;S=ae;try{return Q.apply(this,arguments)}finally{S=X}}}})(Jo)),Jo}var gu;function rc(){return gu||(gu=1,Ko.exports=Cd()),Ko.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bo,yu;function Id(){return yu||(yu=1,bo=function(i){var a={},c=ga(),f=rc(),m=Object.assign;function d(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,g=Symbol.for("react.element"),x=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),N=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),B=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),Y=Symbol.iterator;function Z(e){return e===null||typeof e!="object"?null:(e=Y&&e[Y]||e["@@iterator"],typeof e=="function"?e:null)}function le(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case p:return"Fragment";case x:return"Portal";case S:return"Profiler";case v:return"StrictMode";case P:return"Suspense";case M:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case F:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case k:return t=e.displayName||null,t!==null?t:le(e.type)||"Memo";case B:t=e._payload,e=e._init;try{return le(e(t))}catch{}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return le(t);case 8:return t===v?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function U(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function W(e){if(U(e)!==e)throw Error(d(188))}function H(e){var t=e.alternate;if(!t){if(t=U(e),t===null)throw Error(d(188));return t!==e?null:e}for(var r=e,n=t;;){var o=r.return;if(o===null)break;var s=o.alternate;if(s===null){if(n=o.return,n!==null){r=n;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===r)return W(o),e;if(s===n)return W(o),t;s=s.sibling}throw Error(d(188))}if(r.return!==n.return)r=o,n=s;else{for(var y=!1,E=o.child;E;){if(E===r){y=!0,r=o,n=s;break}if(E===n){y=!0,n=o,r=s;break}E=E.sibling}if(!y){for(E=s.child;E;){if(E===r){y=!0,r=s,n=o;break}if(E===n){y=!0,n=s,r=o;break}E=E.sibling}if(!y)throw Error(d(189))}}if(r.alternate!==n)throw Error(d(190))}if(r.tag!==3)throw Error(d(188));return r.stateNode.current===r?e:t}function $(e){return e=H(e),e!==null?ce(e):null}function ce(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ce(e);if(t!==null)return t;e=e.sibling}return null}function se(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){if(e.tag!==4){var t=se(e);if(t!==null)return t}e=e.sibling}return null}var xe=Array.isArray,ne=i.getPublicInstance,we=i.getRootHostContext,Q=i.getChildHostContext,ae=i.prepareForCommit,X=i.resetAfterCommit,pe=i.createInstance,me=i.appendInitialChild,Se=i.finalizeInitialChildren,Ve=i.prepareUpdate,tt=i.shouldSetTextContent,Pe=i.createTextInstance,st=i.scheduleTimeout,Yt=i.cancelTimeout,En=i.noTimeout,br=i.isPrimaryRenderer,It=i.supportsMutation,$r=i.supportsPersistence,vt=i.supportsHydration,ii=i.getInstanceFromNode,li=i.preparePortalMount,xl=i.getCurrentEventPriority,_l=i.detachDeletedInstance,El=i.supportsMicrotasks,Ml=i.scheduleMicrotask,zr=i.supportsTestSelectors,Rl=i.findFiberRoot,Cl=i.getBoundingRect,oi=i.getTextContent,Lr=i.isHiddenSubtree,Mn=i.matchAccessibilityRole,Il=i.setFocusIfFocusable,Pl=i.setupIntersectionObserver,ai=i.appendChild,en=i.appendChildToContainer,kl=i.commitTextUpdate,Tl=i.commitMount,Nl=i.commitUpdate,Or=i.insertBefore,gt=i.insertInContainerBefore,si=i.removeChild,gr=i.removeChildFromContainer,Et=i.resetTextContent,ut=i.hideInstance,zl=i.hideTextInstance,ue=i.unhideInstance,Ar=i.unhideTextInstance,Ll=i.clearContainer,Ol=i.cloneInstance,ui=i.createContainerChildSet,ci=i.appendChildToContainerChildSet,Al=i.finalizeContainerChildren,fi=i.replaceContainerChildren,di=i.cloneHiddenInstance,pi=i.cloneHiddenTextInstance,Fl=i.canHydrateInstance,jl=i.canHydrateTextInstance,Dl=i.canHydrateSuspenseInstance,Fr=i.isSuspenseInstancePending,Rn=i.isSuspenseInstanceFallback,jr=i.registerSuspenseInstanceRetry,Xt=i.getNextHydratableSibling,ze=i.getFirstHydratableChild,hi=i.getFirstHydratableChildWithinContainer,Ul=i.getFirstHydratableChildWithinSuspenseInstance,u=i.hydrateInstance,h=i.hydrateTextInstance,_=i.hydrateSuspenseInstance,L=i.getNextHydratableInstanceAfterSuspenseInstance,A=i.commitHydratedContainer,j=i.commitHydratedSuspenseInstance,q=i.clearSuspenseBoundary,V=i.clearSuspenseBoundaryFromContainer,te=i.shouldDeleteUnhydratedTailInstances,ee=i.didNotMatchHydratedContainerTextInstance,re=i.didNotMatchHydratedTextInstance,b;function He(e){if(b===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);b=t&&t[1]||""}return`
`+b+e}var de=!1;function ve(e,t){if(!e||de)return"";de=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(K){var n=K}Reflect.construct(e,[],t)}else{try{t.call()}catch(K){n=K}e.call(t.prototype)}else{try{throw Error()}catch(K){n=K}e()}}catch(K){if(K&&n&&typeof K.stack=="string"){for(var o=K.stack.split(`
`),s=n.stack.split(`
`),y=o.length-1,E=s.length-1;1<=y&&0<=E&&o[y]!==s[E];)E--;for(;1<=y&&0<=E;y--,E--)if(o[y]!==s[E]){if(y!==1||E!==1)do if(y--,E--,0>E||o[y]!==s[E]){var D=`
`+o[y].replace(" at new "," at ");return e.displayName&&D.includes("<anonymous>")&&(D=D.replace("<anonymous>",e.displayName)),D}while(1<=y&&0<=E);break}}}finally{de=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?He(e):""}var Ee=Object.prototype.hasOwnProperty,Ce=[],Ae=-1;function Le(e){return{current:e}}function _e(e){0>Ae||(e.current=Ce[Ae],Ce[Ae]=null,Ae--)}function Ie(e,t){Ae++,Ce[Ae]=e.current,e.current=t}var Oe={},We=Le(Oe),ke=Le(!1),Qe=Oe;function yt(e,t){var r=e.type.contextTypes;if(!r)return Oe;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o={},s;for(s in r)o[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function nt(e){return e=e.childContextTypes,e!=null}function pt(){_e(ke),_e(We)}function Be(e,t,r){if(We.current!==Oe)throw Error(d(168));Ie(We,t),Ie(ke,r)}function ot(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var o in n)if(!(o in t))throw Error(d(108,G(e)||"Unknown",o));return m({},r,n)}function Ge(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Oe,Qe=We.current,Ie(We,e),Ie(ke,ke.current),!0}function Fe(e,t,r){var n=e.stateNode;if(!n)throw Error(d(169));r?(e=ot(e,t,Qe),n.__reactInternalMemoizedMergedChildContext=e,_e(ke),_e(We),Ie(We,e)):_e(ke),Ie(ke,r)}var Ke=Math.clz32?Math.clz32:bt,ur=Math.log,Mt=Math.LN2;function bt(e){return e>>>=0,e===0?32:31-(ur(e)/Mt|0)|0}var mi=64,vi=4194304;function Cn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gi(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,o=e.suspendedLanes,s=e.pingedLanes,y=r&268435455;if(y!==0){var E=y&~o;E!==0?n=Cn(E):(s&=y,s!==0&&(n=Cn(s)))}else y=r&~o,y!==0?n=Cn(y):s!==0&&(n=Cn(s));if(n===0)return 0;if(t!==0&&t!==n&&(t&o)===0&&(o=n&-n,s=t&-t,o>=s||o===16&&(s&4194240)!==0))return t;if((n&4)!==0&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Ke(t),o=1<<r,n|=e[r],t&=~o;return n}function Uc(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bc(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,o=e.expirationTimes,s=e.pendingLanes;0<s;){var y=31-Ke(s),E=1<<y,D=o[y];D===-1?((E&r)===0||(E&n)!==0)&&(o[y]=Uc(E,t)):D<=t&&(e.expiredLanes|=E),s&=~E}}function Bl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Hl(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function In(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ke(t),e[t]=r}function Hc(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-Ke(r),s=1<<o;t[o]=0,n[o]=-1,e[o]=-1,r&=~s}}function Gl(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Ke(r),o=1<<n;o&t|e[n]&t&&(e[n]|=t),r&=~o}}var je=0;function za(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Wl=f.unstable_scheduleCallback,La=f.unstable_cancelCallback,Gc=f.unstable_shouldYield,Wc=f.unstable_requestPaint,ct=f.unstable_now,Zl=f.unstable_ImmediatePriority,Zc=f.unstable_UserBlockingPriority,Vl=f.unstable_NormalPriority,Vc=f.unstable_IdlePriority,yi=null,$t=null;function Qc(e){if($t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(yi,e,void 0,(e.current.flags&128)===128)}catch{}}function Yc(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var er=typeof Object.is=="function"?Object.is:Yc,cr=null,wi=!1,Ql=!1;function Oa(e){cr===null?cr=[e]:cr.push(e)}function Xc(e){wi=!0,Oa(e)}function tr(){if(!Ql&&cr!==null){Ql=!0;var e=0,t=je;try{var r=cr;for(je=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}cr=null,wi=!1}catch(o){throw cr!==null&&(cr=cr.slice(e+1)),Wl(Zl,tr),o}finally{je=t,Ql=!1}}return null}var qc=w.ReactCurrentBatchConfig;function Si(e,t){if(er(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var o=r[n];if(!Ee.call(t,o)||!er(e[o],t[o]))return!1}return!0}function Kc(e){switch(e.tag){case 5:return He(e.type);case 16:return He("Lazy");case 13:return He("Suspense");case 19:return He("SuspenseList");case 0:case 2:case 15:return e=ve(e.type,!1),e;case 11:return e=ve(e.type.render,!1),e;case 1:return e=ve(e.type,!0),e;default:return""}}function qt(e,t){if(e&&e.defaultProps){t=m({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var xi=Le(null),_i=null,tn=null,Yl=null;function Xl(){Yl=tn=_i=null}function Aa(e,t,r){br?(Ie(xi,t._currentValue),t._currentValue=r):(Ie(xi,t._currentValue2),t._currentValue2=r)}function ql(e){var t=xi.current;_e(xi),br?e._currentValue=t:e._currentValue2=t}function Kl(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function rn(e,t){_i=e,Yl=tn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Lt=!0),e.firstContext=null)}function Ft(e){var t=br?e._currentValue:e._currentValue2;if(Yl!==e)if(e={context:e,memoizedValue:t,next:null},tn===null){if(_i===null)throw Error(d(308));tn=e,_i.dependencies={lanes:0,firstContext:e}}else tn=tn.next=e;return t}var rr=null,yr=!1;function Jl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function fr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function wr(e,t){var r=e.updateQueue;r!==null&&(r=r.shared,it!==null&&(e.mode&1)!==0&&(Ne&2)===0?(e=r.interleaved,e===null?(t.next=t,rr===null?rr=[r]:rr.push(r)):(t.next=e.next,e.next=t),r.interleaved=t):(e=r.pending,e===null?t.next=t:(t.next=e.next,e.next=t),r.pending=t))}function Ei(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Gl(e,r)}}function ja(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var o=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var y={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?o=s=y:s=s.next=y,r=r.next}while(r!==null);s===null?o=s=t:s=s.next=t}else o=s=t;r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Mi(e,t,r,n){var o=e.updateQueue;yr=!1;var s=o.firstBaseUpdate,y=o.lastBaseUpdate,E=o.shared.pending;if(E!==null){o.shared.pending=null;var D=E,K=D.next;D.next=null,y===null?s=K:y.next=K,y=D;var fe=e.alternate;fe!==null&&(fe=fe.updateQueue,E=fe.lastBaseUpdate,E!==y&&(E===null?fe.firstBaseUpdate=K:E.next=K,fe.lastBaseUpdate=D))}if(s!==null){var Me=o.baseState;y=0,fe=K=D=null,E=s;do{var ye=E.lane,Ze=E.eventTime;if((n&ye)===ye){fe!==null&&(fe=fe.next={eventTime:Ze,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var ge=e,_t=E;switch(ye=t,Ze=r,_t.tag){case 1:if(ge=_t.payload,typeof ge=="function"){Me=ge.call(Ze,Me,ye);break e}Me=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=_t.payload,ye=typeof ge=="function"?ge.call(Ze,Me,ye):ge,ye==null)break e;Me=m({},Me,ye);break e;case 2:yr=!0}}E.callback!==null&&E.lane!==0&&(e.flags|=64,ye=o.effects,ye===null?o.effects=[E]:ye.push(E))}else Ze={eventTime:Ze,lane:ye,tag:E.tag,payload:E.payload,callback:E.callback,next:null},fe===null?(K=fe=Ze,D=Me):fe=fe.next=Ze,y|=ye;if(E=E.next,E===null){if(E=o.shared.pending,E===null)break;ye=E,E=ye.next,ye.next=null,o.lastBaseUpdate=ye,o.shared.pending=null}}while(!0);if(fe===null&&(D=Me),o.baseState=D,o.firstBaseUpdate=K,o.lastBaseUpdate=fe,t=o.shared.interleaved,t!==null){o=t;do y|=o.lane,o=o.next;while(o!==t)}else s===null&&(o.shared.lanes=0);dn|=y,e.lanes=y,e.memoizedState=Me}}function Da(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],o=n.callback;if(o!==null){if(n.callback=null,n=r,typeof o!="function")throw Error(d(191,o));o.call(n)}}}var Ua=new c.Component().refs;function bl(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:m({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ri={isMounted:function(e){return(e=e._reactInternals)?U(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ct(),o=_r(e),s=fr(n,o);s.payload=t,r!=null&&(s.callback=r),wr(e,s),t=Ht(e,o,n),t!==null&&Ei(t,e,o)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ct(),o=_r(e),s=fr(n,o);s.tag=1,s.payload=t,r!=null&&(s.callback=r),wr(e,s),t=Ht(e,o,n),t!==null&&Ei(t,e,o)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ct(),n=_r(e),o=fr(r,n);o.tag=2,t!=null&&(o.callback=t),wr(e,o),t=Ht(e,n,r),t!==null&&Ei(t,e,n)}};function Ba(e,t,r,n,o,s,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,y):t.prototype&&t.prototype.isPureReactComponent?!Si(r,n)||!Si(o,s):!0}function Ha(e,t,r){var n=!1,o=Oe,s=t.contextType;return typeof s=="object"&&s!==null?s=Ft(s):(o=nt(t)?Qe:We.current,n=t.contextTypes,s=(n=n!=null)?yt(e,o):Oe),t=new t(r,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ri,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ga(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Ri.enqueueReplaceState(t,t.state,null)}function $l(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs=Ua,Jl(e);var s=t.contextType;typeof s=="object"&&s!==null?o.context=Ft(s):(s=nt(t)?Qe:We.current,o.context=yt(e,s)),o.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(bl(e,t,s,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Ri.enqueueReplaceState(o,o.state,null),Mi(e,r,o,n),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}var nn=[],ln=0,Ci=null,Ii=0,jt=[],Dt=0,Dr=null,dr=1,pr="";function Ur(e,t){nn[ln++]=Ii,nn[ln++]=Ci,Ci=e,Ii=t}function Wa(e,t,r){jt[Dt++]=dr,jt[Dt++]=pr,jt[Dt++]=Dr,Dr=e;var n=dr;e=pr;var o=32-Ke(n)-1;n&=~(1<<o),r+=1;var s=32-Ke(t)+o;if(30<s){var y=o-o%5;s=(n&(1<<y)-1).toString(32),n>>=y,o-=y,dr=1<<32-Ke(t)+o|r<<o|n,pr=s+e}else dr=1<<s|r<<o|n,pr=e}function eo(e){e.return!==null&&(Ur(e,1),Wa(e,1,0))}function to(e){for(;e===Ci;)Ci=nn[--ln],nn[ln]=null,Ii=nn[--ln],nn[ln]=null;for(;e===Dr;)Dr=jt[--Dt],jt[Dt]=null,pr=jt[--Dt],jt[Dt]=null,dr=jt[--Dt],jt[Dt]=null}var Nt=null,zt=null,Je=!1,Pn=!1,Kt=null;function Za(e,t){var r=Gt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Va(e,t){switch(e.tag){case 5:return t=Fl(t,e.type,e.pendingProps),t!==null?(e.stateNode=t,Nt=e,zt=ze(t),!0):!1;case 6:return t=jl(t,e.pendingProps),t!==null?(e.stateNode=t,Nt=e,zt=null,!0):!1;case 13:if(t=Dl(t),t!==null){var r=Dr!==null?{id:dr,overflow:pr}:null;return e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Gt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Nt=e,zt=null,!0}return!1;default:return!1}}function ro(e){return(e.mode&1)!==0&&(e.flags&128)===0}function no(e){if(Je){var t=zt;if(t){var r=t;if(!Va(e,t)){if(ro(e))throw Error(d(418));t=Xt(r);var n=Nt;t&&Va(e,t)?Za(n,r):(e.flags=e.flags&-4097|2,Je=!1,Nt=e)}}else{if(ro(e))throw Error(d(418));e.flags=e.flags&-4097|2,Je=!1,Nt=e}}}function Qa(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Nt=e}function kn(e){if(!vt||e!==Nt)return!1;if(!Je)return Qa(e),Je=!0,!1;if(e.tag!==3&&(e.tag!==5||te(e.type)&&!tt(e.type,e.memoizedProps))){var t=zt;if(t){if(ro(e)){for(e=zt;e;)e=Xt(e);throw Error(d(418))}for(;t;)Za(e,t),t=Xt(t)}}if(Qa(e),e.tag===13){if(!vt)throw Error(d(316));if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));zt=L(e)}else zt=Nt?Xt(e.stateNode):null;return!0}function on(){vt&&(zt=Nt=null,Pn=Je=!1)}function io(e){Kt===null?Kt=[e]:Kt.push(e)}function Tn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(d(309));var n=r.stateNode}if(!n)throw Error(d(147,e));var o=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(y){var E=o.refs;E===Ua&&(E=o.refs={}),y===null?delete E[s]:E[s]=y},t._stringRef=s,t)}if(typeof e!="string")throw Error(d(284));if(!r._owner)throw Error(d(290,e))}return e}function Pi(e,t){throw e=Object.prototype.toString.call(t),Error(d(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ya(e){var t=e._init;return t(e._payload)}function Xa(e){function t(z,R){if(e){var O=z.deletions;O===null?(z.deletions=[R],z.flags|=16):O.push(R)}}function r(z,R){if(!e)return null;for(;R!==null;)t(z,R),R=R.sibling;return null}function n(z,R){for(z=new Map;R!==null;)R.key!==null?z.set(R.key,R):z.set(R.index,R),R=R.sibling;return z}function o(z,R){return z=Mr(z,R),z.index=0,z.sibling=null,z}function s(z,R,O){return z.index=O,e?(O=z.alternate,O!==null?(O=O.index,O<R?(z.flags|=2,R):O):(z.flags|=2,R)):(z.flags|=1048576,R)}function y(z){return e&&z.alternate===null&&(z.flags|=2),z}function E(z,R,O,oe){return R===null||R.tag!==6?(R=Go(O,z.mode,oe),R.return=z,R):(R=o(R,O),R.return=z,R)}function D(z,R,O,oe){var he=O.type;return he===p?fe(z,R,O.props.children,oe,O.key):R!==null&&(R.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===B&&Ya(he)===R.type)?(oe=o(R,O.props),oe.ref=Tn(z,R,O),oe.return=z,oe):(oe=ll(O.type,O.key,O.props,null,z.mode,oe),oe.ref=Tn(z,R,O),oe.return=z,oe)}function K(z,R,O,oe){return R===null||R.tag!==4||R.stateNode.containerInfo!==O.containerInfo||R.stateNode.implementation!==O.implementation?(R=Wo(O,z.mode,oe),R.return=z,R):(R=o(R,O.children||[]),R.return=z,R)}function fe(z,R,O,oe,he){return R===null||R.tag!==7?(R=Qr(O,z.mode,oe,he),R.return=z,R):(R=o(R,O),R.return=z,R)}function Me(z,R,O){if(typeof R=="string"&&R!==""||typeof R=="number")return R=Go(""+R,z.mode,O),R.return=z,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case g:return O=ll(R.type,R.key,R.props,null,z.mode,O),O.ref=Tn(z,null,R),O.return=z,O;case x:return R=Wo(R,z.mode,O),R.return=z,R;case B:var oe=R._init;return Me(z,oe(R._payload),O)}if(xe(R)||Z(R))return R=Qr(R,z.mode,O,null),R.return=z,R;Pi(z,R)}return null}function ye(z,R,O,oe){var he=R!==null?R.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return he!==null?null:E(z,R,""+O,oe);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case g:return O.key===he?D(z,R,O,oe):null;case x:return O.key===he?K(z,R,O,oe):null;case B:return he=O._init,ye(z,R,he(O._payload),oe)}if(xe(O)||Z(O))return he!==null?null:fe(z,R,O,oe,null);Pi(z,O)}return null}function Ze(z,R,O,oe,he){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return z=z.get(O)||null,E(R,z,""+oe,he);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case g:return z=z.get(oe.key===null?O:oe.key)||null,D(R,z,oe,he);case x:return z=z.get(oe.key===null?O:oe.key)||null,K(R,z,oe,he);case B:var Te=oe._init;return Ze(z,R,O,Te(oe._payload),he)}if(xe(oe)||Z(oe))return z=z.get(O)||null,fe(R,z,oe,he,null);Pi(R,oe)}return null}function ge(z,R,O,oe){for(var he=null,Te=null,Re=R,De=R=0,dt=null;Re!==null&&De<O.length;De++){Re.index>De?(dt=Re,Re=null):dt=Re.sibling;var Ue=ye(z,Re,O[De],oe);if(Ue===null){Re===null&&(Re=dt);break}e&&Re&&Ue.alternate===null&&t(z,Re),R=s(Ue,R,De),Te===null?he=Ue:Te.sibling=Ue,Te=Ue,Re=dt}if(De===O.length)return r(z,Re),Je&&Ur(z,De),he;if(Re===null){for(;De<O.length;De++)Re=Me(z,O[De],oe),Re!==null&&(R=s(Re,R,De),Te===null?he=Re:Te.sibling=Re,Te=Re);return Je&&Ur(z,De),he}for(Re=n(z,Re);De<O.length;De++)dt=Ze(Re,z,De,O[De],oe),dt!==null&&(e&&dt.alternate!==null&&Re.delete(dt.key===null?De:dt.key),R=s(dt,R,De),Te===null?he=dt:Te.sibling=dt,Te=dt);return e&&Re.forEach(function(Rr){return t(z,Rr)}),Je&&Ur(z,De),he}function _t(z,R,O,oe){var he=Z(O);if(typeof he!="function")throw Error(d(150));if(O=he.call(O),O==null)throw Error(d(151));for(var Te=he=null,Re=R,De=R=0,dt=null,Ue=O.next();Re!==null&&!Ue.done;De++,Ue=O.next()){Re.index>De?(dt=Re,Re=null):dt=Re.sibling;var Rr=ye(z,Re,Ue.value,oe);if(Rr===null){Re===null&&(Re=dt);break}e&&Re&&Rr.alternate===null&&t(z,Re),R=s(Rr,R,De),Te===null?he=Rr:Te.sibling=Rr,Te=Rr,Re=dt}if(Ue.done)return r(z,Re),Je&&Ur(z,De),he;if(Re===null){for(;!Ue.done;De++,Ue=O.next())Ue=Me(z,Ue.value,oe),Ue!==null&&(R=s(Ue,R,De),Te===null?he=Ue:Te.sibling=Ue,Te=Ue);return Je&&Ur(z,De),he}for(Re=n(z,Re);!Ue.done;De++,Ue=O.next())Ue=Ze(Re,z,De,Ue.value,oe),Ue!==null&&(e&&Ue.alternate!==null&&Re.delete(Ue.key===null?De:Ue.key),R=s(Ue,R,De),Te===null?he=Ue:Te.sibling=Ue,Te=Ue);return e&&Re.forEach(function(If){return t(z,If)}),Je&&Ur(z,De),he}function Wt(z,R,O,oe){if(typeof O=="object"&&O!==null&&O.type===p&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case g:e:{for(var he=O.key,Te=R;Te!==null;){if(Te.key===he){if(he=O.type,he===p){if(Te.tag===7){r(z,Te.sibling),R=o(Te,O.props.children),R.return=z,z=R;break e}}else if(Te.elementType===he||typeof he=="object"&&he!==null&&he.$$typeof===B&&Ya(he)===Te.type){r(z,Te.sibling),R=o(Te,O.props),R.ref=Tn(z,Te,O),R.return=z,z=R;break e}r(z,Te);break}else t(z,Te);Te=Te.sibling}O.type===p?(R=Qr(O.props.children,z.mode,oe,O.key),R.return=z,z=R):(oe=ll(O.type,O.key,O.props,null,z.mode,oe),oe.ref=Tn(z,R,O),oe.return=z,z=oe)}return y(z);case x:e:{for(Te=O.key;R!==null;){if(R.key===Te)if(R.tag===4&&R.stateNode.containerInfo===O.containerInfo&&R.stateNode.implementation===O.implementation){r(z,R.sibling),R=o(R,O.children||[]),R.return=z,z=R;break e}else{r(z,R);break}else t(z,R);R=R.sibling}R=Wo(O,z.mode,oe),R.return=z,z=R}return y(z);case B:return Te=O._init,Wt(z,R,Te(O._payload),oe)}if(xe(O))return ge(z,R,O,oe);if(Z(O))return _t(z,R,O,oe);Pi(z,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,R!==null&&R.tag===6?(r(z,R.sibling),R=o(R,O),R.return=z,z=R):(r(z,R),R=Go(O,z.mode,oe),R.return=z,z=R),y(z)):r(z,R)}return Wt}var an=Xa(!0),qa=Xa(!1),Nn={},Ut=Le(Nn),zn=Le(Nn),sn=Le(Nn);function nr(e){if(e===Nn)throw Error(d(174));return e}function lo(e,t){Ie(sn,t),Ie(zn,e),Ie(Ut,Nn),e=we(t),_e(Ut),Ie(Ut,e)}function un(){_e(Ut),_e(zn),_e(sn)}function Ka(e){var t=nr(sn.current),r=nr(Ut.current);t=Q(r,e.type,t),r!==t&&(Ie(zn,e),Ie(Ut,t))}function oo(e){zn.current===e&&(_e(Ut),_e(zn))}var be=Le(0);function ki(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Fr(r)||Rn(r)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function so(){for(var e=0;e<ao.length;e++){var t=ao[e];br?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}ao.length=0}var Ti=w.ReactCurrentDispatcher,Bt=w.ReactCurrentBatchConfig,cn=0,$e=null,wt=null,ft=null,Ni=!1,Ln=!1,On=0,Jc=0;function St(){throw Error(d(321))}function uo(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!er(e[r],t[r]))return!1;return!0}function co(e,t,r,n,o,s){if(cn=s,$e=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ti.current=e===null||e.memoizedState===null?tf:rf,e=r(n,o),Ln){s=0;do{if(Ln=!1,On=0,25<=s)throw Error(d(301));s+=1,ft=wt=null,t.updateQueue=null,Ti.current=nf,e=r(n,o)}while(Ln)}if(Ti.current=Fi,t=wt!==null&&wt.next!==null,cn=0,ft=wt=$e=null,Ni=!1,t)throw Error(d(300));return e}function fo(){var e=On!==0;return On=0,e}function hr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?$e.memoizedState=ft=e:ft=ft.next=e,ft}function ir(){if(wt===null){var e=$e.alternate;e=e!==null?e.memoizedState:null}else e=wt.next;var t=ft===null?$e.memoizedState:ft.next;if(t!==null)ft=t,wt=e;else{if(e===null)throw Error(d(310));wt=e,e={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},ft===null?$e.memoizedState=ft=e:ft=ft.next=e}return ft}function Br(e,t){return typeof t=="function"?t(e):t}function zi(e){var t=ir(),r=t.queue;if(r===null)throw Error(d(311));r.lastRenderedReducer=e;var n=wt,o=n.baseQueue,s=r.pending;if(s!==null){if(o!==null){var y=o.next;o.next=s.next,s.next=y}n.baseQueue=o=s,r.pending=null}if(o!==null){s=o.next,n=n.baseState;var E=y=null,D=null,K=s;do{var fe=K.lane;if((cn&fe)===fe)D!==null&&(D=D.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),n=K.hasEagerState?K.eagerState:e(n,K.action);else{var Me={lane:fe,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};D===null?(E=D=Me,y=n):D=D.next=Me,$e.lanes|=fe,dn|=fe}K=K.next}while(K!==null&&K!==s);D===null?y=n:D.next=E,er(n,t.memoizedState)||(Lt=!0),t.memoizedState=n,t.baseState=y,t.baseQueue=D,r.lastRenderedState=n}if(e=r.interleaved,e!==null){o=e;do s=o.lane,$e.lanes|=s,dn|=s,o=o.next;while(o!==e)}else o===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Li(e){var t=ir(),r=t.queue;if(r===null)throw Error(d(311));r.lastRenderedReducer=e;var n=r.dispatch,o=r.pending,s=t.memoizedState;if(o!==null){r.pending=null;var y=o=o.next;do s=e(s,y.action),y=y.next;while(y!==o);er(s,t.memoizedState)||(Lt=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function Ja(){}function ba(e,t){var r=$e,n=ir(),o=t(),s=!er(n.memoizedState,o);if(s&&(n.memoizedState=o,Lt=!0),n=n.queue,Fn(ts.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||ft!==null&&ft.memoizedState.tag&1){if(r.flags|=2048,An(9,es.bind(null,r,n,o,t),void 0,null),it===null)throw Error(d(349));(cn&30)!==0||$a(r,t,o)}return o}function $a(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=$e.updateQueue,t===null?(t={lastEffect:null,stores:null},$e.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function es(e,t,r,n){t.value=r,t.getSnapshot=n,rs(t)&&Ht(e,1,-1)}function ts(e,t,r){return r(function(){rs(t)&&Ht(e,1,-1)})}function rs(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!er(e,r)}catch{return!0}}function po(e){var t=hr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Br,lastRenderedState:e},t.queue=e,e=e.dispatch=ef.bind(null,$e,e),[t.memoizedState,e]}function An(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=$e.updateQueue,t===null?(t={lastEffect:null,stores:null},$e.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function ns(){return ir().memoizedState}function Oi(e,t,r,n){var o=hr();$e.flags|=e,o.memoizedState=An(1|t,r,void 0,n===void 0?null:n)}function Ai(e,t,r,n){var o=ir();n=n===void 0?null:n;var s=void 0;if(wt!==null){var y=wt.memoizedState;if(s=y.destroy,n!==null&&uo(n,y.deps)){o.memoizedState=An(t,r,s,n);return}}$e.flags|=e,o.memoizedState=An(1|t,r,s,n)}function ho(e,t){return Oi(8390656,8,e,t)}function Fn(e,t){return Ai(2048,8,e,t)}function is(e,t){return Ai(4,2,e,t)}function ls(e,t){return Ai(4,4,e,t)}function os(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function as(e,t,r){return r=r!=null?r.concat([e]):null,Ai(4,4,os.bind(null,t,e),r)}function mo(){}function ss(e,t){var r=ir();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&uo(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function us(e,t){var r=ir();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&uo(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function bc(e,t){var r=je;je=r!==0&&4>r?r:4,e(!0);var n=Bt.transition;Bt.transition={};try{e(!1),t()}finally{je=r,Bt.transition=n}}function cs(){return ir().memoizedState}function $c(e,t,r){var n=_r(e);r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},fs(e)?ds(t,r):(ps(e,t,r),r=Ct(),e=Ht(e,n,r),e!==null&&hs(e,t,n))}function ef(e,t,r){var n=_r(e),o={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(fs(e))ds(t,o);else{ps(e,t,o);var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var y=t.lastRenderedState,E=s(y,r);if(o.hasEagerState=!0,o.eagerState=E,er(E,y))return}catch{}finally{}r=Ct(),e=Ht(e,n,r),e!==null&&hs(e,t,n)}}function fs(e){var t=e.alternate;return e===$e||t!==null&&t===$e}function ds(e,t){Ln=Ni=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function ps(e,t,r){it!==null&&(e.mode&1)!==0&&(Ne&2)===0?(e=t.interleaved,e===null?(r.next=r,rr===null?rr=[t]:rr.push(t)):(r.next=e.next,e.next=r),t.interleaved=r):(e=t.pending,e===null?r.next=r:(r.next=e.next,e.next=r),t.pending=r)}function hs(e,t,r){if((r&4194240)!==0){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Gl(e,r)}}var Fi={readContext:Ft,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useInsertionEffect:St,useLayoutEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useMutableSource:St,useSyncExternalStore:St,useId:St,unstable_isNewReconciler:!1},tf={readContext:Ft,useCallback:function(e,t){return hr().memoizedState=[e,t===void 0?null:t],e},useContext:Ft,useEffect:ho,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Oi(4194308,4,os.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Oi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oi(4,2,e,t)},useMemo:function(e,t){var r=hr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=hr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=$c.bind(null,$e,e),[n.memoizedState,e]},useRef:function(e){var t=hr();return e={current:e},t.memoizedState=e},useState:po,useDebugValue:mo,useDeferredValue:function(e){var t=po(e),r=t[0],n=t[1];return ho(function(){var o=Bt.transition;Bt.transition={};try{n(e)}finally{Bt.transition=o}},[e]),r},useTransition:function(){var e=po(!1),t=e[0];return e=bc.bind(null,e[1]),hr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=$e,o=hr();if(Je){if(r===void 0)throw Error(d(407));r=r()}else{if(r=t(),it===null)throw Error(d(349));(cn&30)!==0||$a(n,t,r)}o.memoizedState=r;var s={value:r,getSnapshot:t};return o.queue=s,ho(ts.bind(null,n,s,e),[e]),n.flags|=2048,An(9,es.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=hr(),t=it.identifierPrefix;if(Je){var r=pr,n=dr;r=(n&~(1<<32-Ke(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=On++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Jc++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rf={readContext:Ft,useCallback:ss,useContext:Ft,useEffect:Fn,useImperativeHandle:as,useInsertionEffect:is,useLayoutEffect:ls,useMemo:us,useReducer:zi,useRef:ns,useState:function(){return zi(Br)},useDebugValue:mo,useDeferredValue:function(e){var t=zi(Br),r=t[0],n=t[1];return Fn(function(){var o=Bt.transition;Bt.transition={};try{n(e)}finally{Bt.transition=o}},[e]),r},useTransition:function(){var e=zi(Br)[0],t=ir().memoizedState;return[e,t]},useMutableSource:Ja,useSyncExternalStore:ba,useId:cs,unstable_isNewReconciler:!1},nf={readContext:Ft,useCallback:ss,useContext:Ft,useEffect:Fn,useImperativeHandle:as,useInsertionEffect:is,useLayoutEffect:ls,useMemo:us,useReducer:Li,useRef:ns,useState:function(){return Li(Br)},useDebugValue:mo,useDeferredValue:function(e){var t=Li(Br),r=t[0],n=t[1];return Fn(function(){var o=Bt.transition;Bt.transition={};try{n(e)}finally{Bt.transition=o}},[e]),r},useTransition:function(){var e=Li(Br)[0],t=ir().memoizedState;return[e,t]},useMutableSource:Ja,useSyncExternalStore:ba,useId:cs,unstable_isNewReconciler:!1};function vo(e,t){try{var r="",n=t;do r+=Kc(n),n=n.return;while(n);var o=r}catch(s){o=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:o}}function go(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var lf=typeof WeakMap=="function"?WeakMap:Map;function ms(e,t,r){r=fr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){bi||(bi=!0,Ao=n),go(e,t)},r}function vs(e,t,r){r=fr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var o=t.value;r.payload=function(){return n(o)},r.callback=function(){go(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){go(e,t),typeof n!="function"&&(Sr===null?Sr=new Set([this]):Sr.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),r}function gs(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new lf;var o=new Set;n.set(t,o)}else o=n.get(t),o===void 0&&(o=new Set,n.set(t,o));o.has(r)||(o.add(r),e=wf.bind(null,e,t,r),t.then(e,e))}function ys(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ws(e,t,r,n,o){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=fr(-1,1),t.tag=2,wr(r,t))),r.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}function lr(e){e.flags|=4}function Ss(e,t){if(e!==null&&e.child===t.child)return!0;if((t.flags&16)!==0)return!1;for(e=t.child;e!==null;){if((e.flags&12854)!==0||(e.subtreeFlags&12854)!==0)return!1;e=e.sibling}return!0}var jn,Dn,ji,Di;if(It)jn=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)me(e,r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Dn=function(){},ji=function(e,t,r,n,o){if(e=e.memoizedProps,e!==n){var s=t.stateNode,y=nr(Ut.current);r=Ve(s,r,e,n,o,y),(t.updateQueue=r)&&lr(t)}},Di=function(e,t,r,n){r!==n&&lr(t)};else if($r){jn=function(e,t,r,n){for(var o=t.child;o!==null;){if(o.tag===5){var s=o.stateNode;r&&n&&(s=di(s,o.type,o.memoizedProps,o)),me(e,s)}else if(o.tag===6)s=o.stateNode,r&&n&&(s=pi(s,o.memoizedProps,o)),me(e,s);else if(o.tag!==4){if(o.tag===22&&o.memoizedState!==null)s=o.child,s!==null&&(s.return=o),jn(e,o,!0,!0);else if(o.child!==null){o.child.return=o,o=o.child;continue}}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};var xs=function(e,t,r,n){for(var o=t.child;o!==null;){if(o.tag===5){var s=o.stateNode;r&&n&&(s=di(s,o.type,o.memoizedProps,o)),ci(e,s)}else if(o.tag===6)s=o.stateNode,r&&n&&(s=pi(s,o.memoizedProps,o)),ci(e,s);else if(o.tag!==4){if(o.tag===22&&o.memoizedState!==null)s=o.child,s!==null&&(s.return=o),xs(e,o,!0,!0);else if(o.child!==null){o.child.return=o,o=o.child;continue}}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return;o=o.return}o.sibling.return=o.return,o=o.sibling}};Dn=function(e,t){var r=t.stateNode;if(!Ss(e,t)){e=r.containerInfo;var n=ui(e);xs(n,t,!1,!1),r.pendingChildren=n,lr(t),Al(e,n)}},ji=function(e,t,r,n,o){var s=e.stateNode,y=e.memoizedProps;if((e=Ss(e,t))&&y===n)t.stateNode=s;else{var E=t.stateNode,D=nr(Ut.current),K=null;y!==n&&(K=Ve(E,r,y,n,o,D)),e&&K===null?t.stateNode=s:(s=Ol(s,K,r,y,n,t,e,E),Se(s,r,n,o,D)&&lr(t),t.stateNode=s,e?lr(t):jn(s,t,!1,!1))}},Di=function(e,t,r,n){r!==n?(e=nr(sn.current),r=nr(Ut.current),t.stateNode=Pe(n,e,r,t),lr(t)):t.stateNode=e.stateNode}}else Dn=function(){},ji=function(){},Di=function(){};function Un(e,t){if(!Je)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function xt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var o=e.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags&14680064,n|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function of(e,t,r){var n=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(t),null;case 1:return nt(t.type)&&pt(),xt(t),null;case 3:return n=t.stateNode,un(),_e(ke),_e(We),so(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(kn(t)?lr(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Kt!==null&&(Do(Kt),Kt=null))),Dn(e,t),xt(t),null;case 5:oo(t),r=nr(sn.current);var o=t.type;if(e!==null&&t.stateNode!=null)ji(e,t,o,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(d(166));return xt(t),null}if(e=nr(Ut.current),kn(t)){if(!vt)throw Error(d(175));e=u(t.stateNode,t.type,t.memoizedProps,r,e,t,!Pn),t.updateQueue=e,e!==null&&lr(t)}else{var s=pe(o,n,r,e,t);jn(s,t,!1,!1),t.stateNode=s,Se(s,o,n,r,e)&&lr(t)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return xt(t),null;case 6:if(e&&t.stateNode!=null)Di(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(d(166));if(e=nr(sn.current),r=nr(Ut.current),kn(t)){if(!vt)throw Error(d(176));if(e=t.stateNode,n=t.memoizedProps,(r=h(e,n,t,!Pn))&&(o=Nt,o!==null))switch(s=(o.mode&1)!==0,o.tag){case 3:ee(o.stateNode.containerInfo,e,n,s);break;case 5:re(o.type,o.memoizedProps,o.stateNode,e,n,s)}r&&lr(t)}else t.stateNode=Pe(n,e,r,t)}return xt(t),null;case 13:if(_e(be),n=t.memoizedState,Je&&zt!==null&&(t.mode&1)!==0&&(t.flags&128)===0){for(e=zt;e;)e=Xt(e);return on(),t.flags|=98560,t}if(n!==null&&n.dehydrated!==null){if(n=kn(t),e===null){if(!n)throw Error(d(318));if(!vt)throw Error(d(344));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));_(e,t)}else on(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;return xt(t),null}return Kt!==null&&(Do(Kt),Kt=null),(t.flags&128)!==0?(t.lanes=r,t):(n=n!==null,r=!1,e===null?kn(t):r=e.memoizedState!==null,n&&!r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(be.current&1)!==0?at===0&&(at=3):Bo())),t.updateQueue!==null&&(t.flags|=4),xt(t),null);case 4:return un(),Dn(e,t),e===null&&li(t.stateNode.containerInfo),xt(t),null;case 10:return ql(t.type._context),xt(t),null;case 17:return nt(t.type)&&pt(),xt(t),null;case 19:if(_e(be),o=t.memoizedState,o===null)return xt(t),null;if(n=(t.flags&128)!==0,s=o.rendering,s===null)if(n)Un(o,!1);else{if(at!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(s=ki(e),s!==null){for(t.flags|=128,Un(o,!1),e=s.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=r,n=t.child;n!==null;)r=n,o=e,r.flags&=14680066,s=r.alternate,s===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=s.childLanes,r.lanes=s.lanes,r.child=s.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=s.memoizedProps,r.memoizedState=s.memoizedState,r.updateQueue=s.updateQueue,r.type=s.type,o=s.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),n=n.sibling;return Ie(be,be.current&1|2),t.child}e=e.sibling}o.tail!==null&&ct()>Oo&&(t.flags|=128,n=!0,Un(o,!1),t.lanes=4194304)}else{if(!n)if(e=ki(s),e!==null){if(t.flags|=128,n=!0,e=e.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),Un(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Je)return xt(t),null}else 2*ct()-o.renderingStartTime>Oo&&r!==1073741824&&(t.flags|=128,n=!0,Un(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(e=o.last,e!==null?e.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ct(),t.sibling=null,e=be.current,Ie(be,n?e&1|2:e&1),t):(xt(t),null);case 22:case 23:return Uo(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&(t.mode&1)!==0?(Ot&1073741824)!==0&&(xt(t),It&&t.subtreeFlags&6&&(t.flags|=8192)):xt(t),null;case 24:return null;case 25:return null}throw Error(d(156,t.tag))}var af=w.ReactCurrentOwner,Lt=!1;function Rt(e,t,r,n){t.child=e===null?qa(t,null,r,n):an(t,e.child,r,n)}function _s(e,t,r,n,o){r=r.render;var s=t.ref;return rn(t,o),n=co(e,t,r,n,s,o),r=fo(),e!==null&&!Lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,mr(e,t,o)):(Je&&r&&eo(t),t.flags|=1,Rt(e,t,n,o),t.child)}function Es(e,t,r,n,o){if(e===null){var s=r.type;return typeof s=="function"&&!Ho(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=s,Ms(e,t,s,n,o)):(e=ll(r.type,null,n,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,(e.lanes&o)===0){var y=s.memoizedProps;if(r=r.compare,r=r!==null?r:Si,r(y,n)&&e.ref===t.ref)return mr(e,t,o)}return t.flags|=1,e=Mr(s,n),e.ref=t.ref,e.return=t,t.child=e}function Ms(e,t,r,n,o){if(e!==null&&Si(e.memoizedProps,n)&&e.ref===t.ref)if(Lt=!1,(e.lanes&o)!==0)(e.flags&131072)!==0&&(Lt=!0);else return t.lanes=e.lanes,mr(e,t,o);return yo(e,t,r,n,o)}function Rs(e,t,r){var n=t.pendingProps,o=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null},Ie(fn,Ot),Ot|=r;else if((r&1073741824)!==0)t.memoizedState={baseLanes:0,cachePool:null},n=s!==null?s.baseLanes:r,Ie(fn,Ot),Ot|=n;else return e=s!==null?s.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,Ie(fn,Ot),Ot|=e,null;else s!==null?(n=s.baseLanes|r,t.memoizedState=null):n=r,Ie(fn,Ot),Ot|=n;return Rt(e,t,o,r),t.child}function Cs(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function yo(e,t,r,n,o){var s=nt(r)?Qe:We.current;return s=yt(t,s),rn(t,o),r=co(e,t,r,n,s,o),n=fo(),e!==null&&!Lt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,mr(e,t,o)):(Je&&n&&eo(t),t.flags|=1,Rt(e,t,r,o),t.child)}function Is(e,t,r,n,o){if(nt(r)){var s=!0;Ge(t)}else s=!1;if(rn(t,o),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),Ha(t,r,n),$l(t,r,n,o),n=!0;else if(e===null){var y=t.stateNode,E=t.memoizedProps;y.props=E;var D=y.context,K=r.contextType;typeof K=="object"&&K!==null?K=Ft(K):(K=nt(r)?Qe:We.current,K=yt(t,K));var fe=r.getDerivedStateFromProps,Me=typeof fe=="function"||typeof y.getSnapshotBeforeUpdate=="function";Me||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==n||D!==K)&&Ga(t,y,n,K),yr=!1;var ye=t.memoizedState;y.state=ye,Mi(t,n,y,o),D=t.memoizedState,E!==n||ye!==D||ke.current||yr?(typeof fe=="function"&&(bl(t,r,fe,n),D=t.memoizedState),(E=yr||Ba(t,r,E,n,ye,D,K))?(Me||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=D),y.props=n,y.state=D,y.context=K,n=E):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{y=t.stateNode,Fa(e,t),E=t.memoizedProps,K=t.type===t.elementType?E:qt(t.type,E),y.props=K,Me=t.pendingProps,ye=y.context,D=r.contextType,typeof D=="object"&&D!==null?D=Ft(D):(D=nt(r)?Qe:We.current,D=yt(t,D));var Ze=r.getDerivedStateFromProps;(fe=typeof Ze=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==Me||ye!==D)&&Ga(t,y,n,D),yr=!1,ye=t.memoizedState,y.state=ye,Mi(t,n,y,o);var ge=t.memoizedState;E!==Me||ye!==ge||ke.current||yr?(typeof Ze=="function"&&(bl(t,r,Ze,n),ge=t.memoizedState),(K=yr||Ba(t,r,K,n,ye,ge,D)||!1)?(fe||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(n,ge,D),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(n,ge,D)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===e.memoizedProps&&ye===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&ye===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=ge),y.props=n,y.state=ge,y.context=D,n=K):(typeof y.componentDidUpdate!="function"||E===e.memoizedProps&&ye===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&ye===e.memoizedState||(t.flags|=1024),n=!1)}return wo(e,t,r,n,s,o)}function wo(e,t,r,n,o,s){Cs(e,t);var y=(t.flags&128)!==0;if(!n&&!y)return o&&Fe(t,r,!1),mr(e,t,s);n=t.stateNode,af.current=t;var E=y&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&y?(t.child=an(t,e.child,null,s),t.child=an(t,null,E,s)):Rt(e,t,E,s),t.memoizedState=n.state,o&&Fe(t,r,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Be(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Be(e,t.context,!1),lo(e,t.containerInfo)}function ks(e,t,r,n,o){return on(),io(o),t.flags|=256,Rt(e,t,r,n),t.child}var Ui={dehydrated:null,treeContext:null,retryLane:0};function Bi(e){return{baseLanes:e,cachePool:null}}function Ts(e,t,r){var n=t.pendingProps,o=be.current,s=!1,y=(t.flags&128)!==0,E;if((E=y)||(E=e!==null&&e.memoizedState===null?!1:(o&2)!==0),E?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Ie(be,o&1),e===null)return no(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:Rn(e)?t.lanes=8:t.lanes=1073741824,null):(o=n.children,e=n.fallback,s?(n=t.mode,s=t.child,o={mode:"hidden",children:o},(n&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ol(o,n,0,null),e=Qr(e,n,r,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Bi(r),t.memoizedState=Ui,e):So(t,o));if(o=e.memoizedState,o!==null){if(E=o.dehydrated,E!==null){if(y)return t.flags&256?(t.flags&=-257,Hi(e,t,r,Error(d(422)))):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,o=t.mode,n=ol({mode:"visible",children:n.children},o,0,null),s=Qr(s,o,r,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,(t.mode&1)!==0&&an(t,e.child,null,r),t.child.memoizedState=Bi(r),t.memoizedState=Ui,s);if((t.mode&1)===0)t=Hi(e,t,r,null);else if(Rn(E))t=Hi(e,t,r,Error(d(419)));else if(n=(r&e.childLanes)!==0,Lt||n){if(n=it,n!==null){switch(r&-r){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}n=(s&(n.suspendedLanes|r))!==0?0:s,n!==0&&n!==o.retryLane&&(o.retryLane=n,Ht(e,n,-1))}Bo(),t=Hi(e,t,r,Error(d(421)))}else Fr(E)?(t.flags|=128,t.child=e.child,t=Sf.bind(null,e),jr(E,t),t=null):(r=o.treeContext,vt&&(zt=Ul(E),Nt=t,Je=!0,Kt=null,Pn=!1,r!==null&&(jt[Dt++]=dr,jt[Dt++]=pr,jt[Dt++]=Dr,dr=r.id,pr=r.overflow,Dr=t)),t=So(t,t.pendingProps.children),t.flags|=4096);return t}return s?(n=zs(e,t,n.children,n.fallback,r),s=t.child,o=e.child.memoizedState,s.memoizedState=o===null?Bi(r):{baseLanes:o.baseLanes|r,cachePool:null},s.childLanes=e.childLanes&~r,t.memoizedState=Ui,n):(r=Ns(e,t,n.children,r),t.memoizedState=null,r)}return s?(n=zs(e,t,n.children,n.fallback,r),s=t.child,o=e.child.memoizedState,s.memoizedState=o===null?Bi(r):{baseLanes:o.baseLanes|r,cachePool:null},s.childLanes=e.childLanes&~r,t.memoizedState=Ui,n):(r=Ns(e,t,n.children,r),t.memoizedState=null,r)}function So(e,t){return t=ol({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ns(e,t,r,n){var o=e.child;return e=o.sibling,r=Mr(o,{mode:"visible",children:r}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r}function zs(e,t,r,n,o){var s=t.mode;e=e.child;var y=e.sibling,E={mode:"hidden",children:r};return(s&1)===0&&t.child!==e?(r=t.child,r.childLanes=0,r.pendingProps=E,t.deletions=null):(r=Mr(e,E),r.subtreeFlags=e.subtreeFlags&14680064),y!==null?n=Mr(y,n):(n=Qr(n,s,o,null),n.flags|=2),n.return=t,r.return=t,r.sibling=n,t.child=r,n}function Hi(e,t,r,n){return n!==null&&io(n),an(t,e.child,null,r),e=So(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ls(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Kl(e.return,t,r)}function xo(e,t,r,n,o){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=o)}function Os(e,t,r){var n=t.pendingProps,o=n.revealOrder,s=n.tail;if(Rt(e,t,n.children,r),n=be.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ls(e,r,t);else if(e.tag===19)Ls(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ie(be,n),(t.mode&1)===0)t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&ki(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),xo(t,!1,o,r,s);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&ki(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}xo(t,!0,r,null,s);break;case"together":xo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function mr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),dn|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(d(153));if(t.child!==null){for(e=t.child,r=Mr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Mr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function sf(e,t,r){switch(t.tag){case 3:Ps(t),on();break;case 5:Ka(t);break;case 1:nt(t.type)&&Ge(t);break;case 4:lo(t,t.stateNode.containerInfo);break;case 10:Aa(t,t.type._context,t.memoizedProps.value);break;case 13:var n=t.memoizedState;if(n!==null)return n.dehydrated!==null?(Ie(be,be.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?Ts(e,t,r):(Ie(be,be.current&1),e=mr(e,t,r),e!==null?e.sibling:null);Ie(be,be.current&1);break;case 19:if(n=(r&t.childLanes)!==0,(e.flags&128)!==0){if(n)return Os(e,t,r);t.flags|=128}var o=t.memoizedState;if(o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ie(be,be.current),n)break;return null;case 22:case 23:return t.lanes=0,Rs(e,t,r)}return mr(e,t,r)}function uf(e,t){switch(to(t),t.tag){case 1:return nt(t.type)&&pt(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return un(),_e(ke),_e(We),so(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return oo(t),null;case 13:if(_e(be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(d(340));on()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return _e(be),null;case 4:return un(),null;case 10:return ql(t.type._context),null;case 22:case 23:return Uo(),null;case 24:return null;default:return null}}var Gi=!1,Hr=!1,cf=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Wi(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Tt(e,t,n)}else r.current=null}function _o(e,t,r){try{r()}catch(n){Tt(e,t,n)}}var As=!1;function ff(e,t){for(ae(e.containerInfo),ie=t;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var r=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(r!==null){var n=r.memoizedProps,o=r.memoizedState,s=e.stateNode,y=s.getSnapshotBeforeUpdate(e.elementType===e.type?n:qt(e.type,n),o);s.__reactInternalSnapshotBeforeUpdate=y}break;case 3:It&&Ll(e.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(d(163))}}catch(E){Tt(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return r=As,As=!1,r}function Gr(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&e)===e){var s=o.destroy;o.destroy=void 0,s!==void 0&&_o(t,r,s)}o=o.next}while(o!==n)}}function Bn(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Eo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=ne(r);break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Fs(e,t,r){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(yi,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var n=e=e.next;do{var o=n,s=o.destroy;o=o.tag,s!==void 0&&((o&2)!==0||(o&4)!==0)&&_o(t,r,s),n=n.next}while(n!==e)}break;case 1:if(Wi(t,r),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(y){Tt(t,r,y)}break;case 5:Wi(t,r);break;case 4:It?Gs(e,t,r):$r&&$r&&(t=t.stateNode.containerInfo,r=ui(t),fi(t,r))}}function js(e,t,r){for(var n=t;;)if(Fs(e,n,r),n.child===null||It&&n.tag===4){if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}else n.child.return=n,n=n.child}function Ds(e){var t=e.alternate;t!==null&&(e.alternate=null,Ds(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&_l(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Us(e){return e.tag===5||e.tag===3||e.tag===4}function Bs(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hs(e){if(It){e:{for(var t=e.return;t!==null;){if(Us(t))break e;t=t.return}throw Error(d(160))}var r=t;switch(r.tag){case 5:t=r.stateNode,r.flags&32&&(Et(t),r.flags&=-33),r=Bs(e),Ro(e,r,t);break;case 3:case 4:t=r.stateNode.containerInfo,r=Bs(e),Mo(e,r,t);break;default:throw Error(d(161))}}}function Mo(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?gt(r,e,t):en(r,e);else if(n!==4&&(e=e.child,e!==null))for(Mo(e,t,r),e=e.sibling;e!==null;)Mo(e,t,r),e=e.sibling}function Ro(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?Or(r,e,t):ai(r,e);else if(n!==4&&(e=e.child,e!==null))for(Ro(e,t,r),e=e.sibling;e!==null;)Ro(e,t,r),e=e.sibling}function Gs(e,t,r){for(var n=t,o=!1,s,y;;){if(!o){o=n.return;e:for(;;){if(o===null)throw Error(d(160));switch(s=o.stateNode,o.tag){case 5:y=!1;break e;case 3:s=s.containerInfo,y=!0;break e;case 4:s=s.containerInfo,y=!0;break e}o=o.return}o=!0}if(n.tag===5||n.tag===6)js(e,n,r),y?gr(s,n.stateNode):si(s,n.stateNode);else if(n.tag===18)y?V(s,n.stateNode):q(s,n.stateNode);else if(n.tag===4){if(n.child!==null){s=n.stateNode.containerInfo,y=!0,n.child.return=n,n=n.child;continue}}else if(Fs(e,n,r),n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return,n.tag===4&&(o=!1)}n.sibling.return=n.return,n=n.sibling}}function Co(e,t){if(It){switch(t.tag){case 0:case 11:case 14:case 15:Gr(3,t,t.return),Bn(3,t),Gr(5,t,t.return);return;case 1:return;case 5:var r=t.stateNode;if(r!=null){var n=t.memoizedProps;e=e!==null?e.memoizedProps:n;var o=t.type,s=t.updateQueue;t.updateQueue=null,s!==null&&Nl(r,s,o,e,n,t)}return;case 6:if(t.stateNode===null)throw Error(d(162));r=t.memoizedProps,kl(t.stateNode,e!==null?e.memoizedProps:r,r);return;case 3:vt&&e!==null&&e.memoizedState.isDehydrated&&A(t.stateNode.containerInfo);return;case 12:return;case 13:Zi(t);return;case 19:Zi(t);return;case 17:return}throw Error(d(163))}switch(t.tag){case 0:case 11:case 14:case 15:Gr(3,t,t.return),Bn(3,t),Gr(5,t,t.return);return;case 12:return;case 13:Zi(t);return;case 19:Zi(t);return;case 3:vt&&e!==null&&e.memoizedState.isDehydrated&&A(t.stateNode.containerInfo);break;case 22:case 23:return}e:if($r){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,fi(t.containerInfo,t.pendingChildren);break e}throw Error(d(163))}}function Zi(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new cf),t.forEach(function(n){var o=xf.bind(null,e,n);r.has(n)||(r.add(n),n.then(o,o))})}}function df(e,t){for(ie=t;ie!==null;){t=ie;var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var o=r[n];try{var s=e;It?Gs(s,o,t):js(s,o,t);var y=o.alternate;y!==null&&(y.return=null),o.return=null}catch(he){Tt(o,t,he)}}if(r=t.child,(t.subtreeFlags&12854)!==0&&r!==null)r.return=t,ie=r;else for(;ie!==null;){t=ie;try{var E=t.flags;if(E&32&&It&&Et(t.stateNode),E&512){var D=t.alternate;if(D!==null){var K=D.ref;K!==null&&(typeof K=="function"?K(null):K.current=null)}}if(E&8192)switch(t.tag){case 13:if(t.memoizedState!==null){var fe=t.alternate;(fe===null||fe.memoizedState===null)&&(Lo=ct())}break;case 22:var Me=t.memoizedState!==null,ye=t.alternate,Ze=ye!==null&&ye.memoizedState!==null;if(r=t,It){e:if(n=r,o=Me,s=null,It)for(var ge=n;;){if(ge.tag===5){if(s===null){s=ge;var _t=ge.stateNode;o?ut(_t):ue(ge.stateNode,ge.memoizedProps)}}else if(ge.tag===6){if(s===null){var Wt=ge.stateNode;o?zl(Wt):Ar(Wt,ge.memoizedProps)}}else if((ge.tag!==22&&ge.tag!==23||ge.memoizedState===null||ge===n)&&ge.child!==null){ge.child.return=ge,ge=ge.child;continue}if(ge===n)break;for(;ge.sibling===null;){if(ge.return===null||ge.return===n)break e;s===ge&&(s=null),ge=ge.return}s===ge&&(s=null),ge.sibling.return=ge.return,ge=ge.sibling}}if(Me&&!Ze&&(r.mode&1)!==0){ie=r;for(var z=r.child;z!==null;){for(r=ie=z;ie!==null;){n=ie;var R=n.child;switch(n.tag){case 0:case 11:case 14:case 15:Gr(4,n,n.return);break;case 1:Wi(n,n.return);var O=n.stateNode;if(typeof O.componentWillUnmount=="function"){var oe=n.return;try{O.props=n.memoizedProps,O.state=n.memoizedState,O.componentWillUnmount()}catch(he){Tt(n,oe,he)}}break;case 5:Wi(n,n.return);break;case 22:if(n.memoizedState!==null){Vs(r);continue}}R!==null?(R.return=n,ie=R):Vs(r)}z=z.sibling}}}switch(E&4102){case 2:Hs(t),t.flags&=-3;break;case 6:Hs(t),t.flags&=-3,Co(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Co(t.alternate,t);break;case 4:Co(t.alternate,t)}}catch(he){Tt(t,t.return,he)}if(r=t.sibling,r!==null){r.return=t.return,ie=r;break}ie=t.return}}}function pf(e,t,r){ie=e,Ws(e)}function Ws(e,t,r){for(var n=(e.mode&1)!==0;ie!==null;){var o=ie,s=o.child;if(o.tag===22&&n){var y=o.memoizedState!==null||Gi;if(!y){var E=o.alternate,D=E!==null&&E.memoizedState!==null||Hr;E=Gi;var K=Hr;if(Gi=y,(Hr=D)&&!K)for(ie=o;ie!==null;)y=ie,D=y.child,y.tag===22&&y.memoizedState!==null?Qs(o):D!==null?(D.return=y,ie=D):Qs(o);for(;s!==null;)ie=s,Ws(s),s=s.sibling;ie=o,Gi=E,Hr=K}Zs(e)}else(o.subtreeFlags&8772)!==0&&s!==null?(s.return=o,ie=s):Zs(e)}}function Zs(e){for(;ie!==null;){var t=ie;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Hr||Bn(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Hr)if(r===null)n.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:qt(t.type,r.memoizedProps);n.componentDidUpdate(o,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Da(t,s,n);break;case 3:var y=t.updateQueue;if(y!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=ne(t.child.stateNode);break;case 1:r=t.child.stateNode}Da(t,y,r)}break;case 5:var E=t.stateNode;r===null&&t.flags&4&&Tl(E,t.type,t.memoizedProps,t);break;case 6:break;case 4:break;case 12:break;case 13:if(vt&&t.memoizedState===null){var D=t.alternate;if(D!==null){var K=D.memoizedState;if(K!==null){var fe=K.dehydrated;fe!==null&&j(fe)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(d(163))}Hr||t.flags&512&&Eo(t)}catch(Me){Tt(t,t.return,Me)}}if(t===e){ie=null;break}if(r=t.sibling,r!==null){r.return=t.return,ie=r;break}ie=t.return}}function Vs(e){for(;ie!==null;){var t=ie;if(t===e){ie=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ie=r;break}ie=t.return}}function Qs(e){for(;ie!==null;){var t=ie;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Bn(4,t)}catch(D){Tt(t,r,D)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var o=t.return;try{n.componentDidMount()}catch(D){Tt(t,o,D)}}var s=t.return;try{Eo(t)}catch(D){Tt(t,s,D)}break;case 5:var y=t.return;try{Eo(t)}catch(D){Tt(t,y,D)}}}catch(D){Tt(t,t.return,D)}if(t===e){ie=null;break}var E=t.sibling;if(E!==null){E.return=t.return,ie=E;break}ie=t.return}}var Vi=0,Qi=1,Yi=2,Xi=3,qi=4;if(typeof Symbol=="function"&&Symbol.for){var Hn=Symbol.for;Vi=Hn("selector.component"),Qi=Hn("selector.has_pseudo_class"),Yi=Hn("selector.role"),Xi=Hn("selector.test_id"),qi=Hn("selector.text")}function Io(e){var t=ii(e);if(t!=null){if(typeof t.memoizedProps["data-testname"]!="string")throw Error(d(364));return t}if(e=Rl(e),e===null)throw Error(d(362));return e.stateNode.current}function Po(e,t){switch(t.$$typeof){case Vi:if(e.type===t.value)return!0;break;case Qi:e:{t=t.value,e=[e,0];for(var r=0;r<e.length;){var n=e[r++],o=e[r++],s=t[o];if(n.tag!==5||!Lr(n)){for(;s!=null&&Po(n,s);)o++,s=t[o];if(o===t.length){t=!0;break e}else for(n=n.child;n!==null;)e.push(n,o),n=n.sibling}}t=!1}return t;case Yi:if(e.tag===5&&Mn(e.stateNode,t.value))return!0;break;case qi:if((e.tag===5||e.tag===6)&&(e=oi(e),e!==null&&0<=e.indexOf(t.value)))return!0;break;case Xi:if(e.tag===5&&(e=e.memoizedProps["data-testname"],typeof e=="string"&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(d(365))}return!1}function ko(e){switch(e.$$typeof){case Vi:return"<"+(le(e.value)||"Unknown")+">";case Qi:return":has("+(ko(e)||"")+")";case Yi:return'[role="'+e.value+'"]';case qi:return'"'+e.value+'"';case Xi:return'[data-testname="'+e.value+'"]';default:throw Error(d(365))}}function Ys(e,t){var r=[];e=[e,0];for(var n=0;n<e.length;){var o=e[n++],s=e[n++],y=t[s];if(o.tag!==5||!Lr(o)){for(;y!=null&&Po(o,y);)s++,y=t[s];if(s===t.length)r.push(o);else for(o=o.child;o!==null;)e.push(o,s),o=o.sibling}}return r}function To(e,t){if(!zr)throw Error(d(363));e=Io(e),e=Ys(e,t),t=[],e=Array.from(e);for(var r=0;r<e.length;){var n=e[r++];if(n.tag===5)Lr(n)||t.push(n.stateNode);else for(n=n.child;n!==null;)e.push(n),n=n.sibling}return t}var hf=Math.ceil,Ki=w.ReactCurrentDispatcher,No=w.ReactCurrentOwner,rt=w.ReactCurrentBatchConfig,Ne=0,it=null,lt=null,ht=0,Ot=0,fn=Le(0),at=0,Gn=null,dn=0,Ji=0,zo=0,Wn=null,Pt=null,Lo=0,Oo=1/0;function pn(){Oo=ct()+500}var bi=!1,Ao=null,Sr=null,$i=!1,xr=null,el=0,Zn=0,Fo=null,tl=-1,rl=0;function Ct(){return(Ne&6)!==0?ct():tl!==-1?tl:tl=ct()}function _r(e){return(e.mode&1)===0?1:(Ne&2)!==0&&ht!==0?ht&-ht:qc.transition!==null?(rl===0&&(e=mi,mi<<=1,(mi&4194240)===0&&(mi=64),rl=e),rl):(e=je,e!==0?e:xl())}function Ht(e,t,r){if(50<Zn)throw Zn=0,Fo=null,Error(d(185));var n=nl(e,t);return n===null?null:(In(n,t,r),((Ne&2)===0||n!==it)&&(n===it&&((Ne&2)===0&&(Ji|=t),at===4&&Er(n,ht)),kt(n,r),t===1&&Ne===0&&(e.mode&1)===0&&(pn(),wi&&tr())),n)}function nl(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function kt(e,t){var r=e.callbackNode;Bc(e,t);var n=gi(e,e===it?ht:0);if(n===0)r!==null&&La(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&La(r),t===1)e.tag===0?Xc(qs.bind(null,e)):Oa(qs.bind(null,e)),El?Ml(function(){Ne===0&&tr()}):Wl(Zl,tr),r=null;else{switch(za(n)){case 1:r=Zl;break;case 4:r=Zc;break;case 16:r=Vl;break;case 536870912:r=Vc;break;default:r=Vl}r=iu(r,Xs.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Xs(e,t){if(tl=-1,rl=0,(Ne&6)!==0)throw Error(d(327));var r=e.callbackNode;if(Vr()&&e.callbackNode!==r)return null;var n=gi(e,e===it?ht:0);if(n===0)return null;if((n&30)!==0||(n&e.expiredLanes)!==0||t)t=il(e,n);else{t=n;var o=Ne;Ne|=2;var s=bs();(it!==e||ht!==t)&&(pn(),Wr(e,t));do try{gf();break}catch(E){Js(e,E)}while(!0);Xl(),Ki.current=s,Ne=o,lt!==null?t=0:(it=null,ht=0,t=at)}if(t!==0){if(t===2&&(o=Bl(e),o!==0&&(n=o,t=jo(e,o))),t===1)throw r=Gn,Wr(e,0),Er(e,n),kt(e,ct()),r;if(t===6)Er(e,n);else{if(o=e.current.alternate,(n&30)===0&&!mf(o)&&(t=il(e,n),t===2&&(s=Bl(e),s!==0&&(n=s,t=jo(e,s))),t===1))throw r=Gn,Wr(e,0),Er(e,n),kt(e,ct()),r;switch(e.finishedWork=o,e.finishedLanes=n,t){case 0:case 1:throw Error(d(345));case 2:Zr(e,Pt);break;case 3:if(Er(e,n),(n&130023424)===n&&(t=Lo+500-ct(),10<t)){if(gi(e,0)!==0)break;if(o=e.suspendedLanes,(o&n)!==n){Ct(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=st(Zr.bind(null,e,Pt),t);break}Zr(e,Pt);break;case 4:if(Er(e,n),(n&4194240)===n)break;for(t=e.eventTimes,o=-1;0<n;){var y=31-Ke(n);s=1<<y,y=t[y],y>o&&(o=y),n&=~s}if(n=o,n=ct()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*hf(n/1960))-n,10<n){e.timeoutHandle=st(Zr.bind(null,e,Pt),n);break}Zr(e,Pt);break;case 5:Zr(e,Pt);break;default:throw Error(d(329))}}}return kt(e,ct()),e.callbackNode===r?Xs.bind(null,e):null}function jo(e,t){var r=Wn;return e.current.memoizedState.isDehydrated&&(Wr(e,t).flags|=256),e=il(e,t),e!==2&&(t=Pt,Pt=r,t!==null&&Do(t)),e}function Do(e){Pt===null?Pt=e:Pt.push.apply(Pt,e)}function mf(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var o=r[n],s=o.getSnapshot;o=o.value;try{if(!er(s(),o))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Er(e,t){for(t&=~zo,t&=~Ji,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ke(t),n=1<<r;e[r]=-1,t&=~n}}function qs(e){if((Ne&6)!==0)throw Error(d(327));Vr();var t=gi(e,0);if((t&1)===0)return kt(e,ct()),null;var r=il(e,t);if(e.tag!==0&&r===2){var n=Bl(e);n!==0&&(t=n,r=jo(e,n))}if(r===1)throw r=Gn,Wr(e,0),Er(e,t),kt(e,ct()),r;if(r===6)throw Error(d(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Zr(e,Pt),kt(e,ct()),null}function Ks(e){xr!==null&&xr.tag===0&&(Ne&6)===0&&Vr();var t=Ne;Ne|=1;var r=rt.transition,n=je;try{if(rt.transition=null,je=1,e)return e()}finally{je=n,rt.transition=r,Ne=t,(Ne&6)===0&&tr()}}function Uo(){Ot=fn.current,_e(fn)}function Wr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==En&&(e.timeoutHandle=En,Yt(r)),lt!==null)for(r=lt.return;r!==null;){var n=r;switch(to(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&pt();break;case 3:un(),_e(ke),_e(We),so();break;case 5:oo(n);break;case 4:un();break;case 13:_e(be);break;case 19:_e(be);break;case 10:ql(n.type._context);break;case 22:case 23:Uo()}r=r.return}if(it=e,lt=e=Mr(e.current,null),ht=Ot=t,at=0,Gn=null,zo=Ji=dn=0,Pt=Wn=null,rr!==null){for(t=0;t<rr.length;t++)if(r=rr[t],n=r.interleaved,n!==null){r.interleaved=null;var o=n.next,s=r.pending;if(s!==null){var y=s.next;s.next=o,n.next=y}r.pending=n}rr=null}return e}function Js(e,t){do{var r=lt;try{if(Xl(),Ti.current=Fi,Ni){for(var n=$e.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}Ni=!1}if(cn=0,ft=wt=$e=null,Ln=!1,On=0,No.current=null,r===null||r.return===null){at=1,Gn=t,lt=null;break}e:{var s=e,y=r.return,E=r,D=t;if(t=ht,E.flags|=32768,D!==null&&typeof D=="object"&&typeof D.then=="function"){var K=D,fe=E,Me=fe.tag;if((fe.mode&1)===0&&(Me===0||Me===11||Me===15)){var ye=fe.alternate;ye?(fe.updateQueue=ye.updateQueue,fe.memoizedState=ye.memoizedState,fe.lanes=ye.lanes):(fe.updateQueue=null,fe.memoizedState=null)}var Ze=ys(y);if(Ze!==null){Ze.flags&=-257,ws(Ze,y,E,s,t),Ze.mode&1&&gs(s,K,t),t=Ze,D=K;var ge=t.updateQueue;if(ge===null){var _t=new Set;_t.add(D),t.updateQueue=_t}else ge.add(D);break e}else{if((t&1)===0){gs(s,K,t),Bo();break e}D=Error(d(426))}}else if(Je&&E.mode&1){var Wt=ys(y);if(Wt!==null){(Wt.flags&65536)===0&&(Wt.flags|=256),ws(Wt,y,E,s,t),io(D);break e}}s=D,at!==4&&(at=2),Wn===null?Wn=[s]:Wn.push(s),D=vo(D,E),E=y;do{switch(E.tag){case 3:E.flags|=65536,t&=-t,E.lanes|=t;var z=ms(E,D,t);ja(E,z);break e;case 1:s=D;var R=E.type,O=E.stateNode;if((E.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Sr===null||!Sr.has(O)))){E.flags|=65536,t&=-t,E.lanes|=t;var oe=vs(E,s,t);ja(E,oe);break e}}E=E.return}while(E!==null)}eu(r)}catch(he){t=he,lt===r&&r!==null&&(lt=r=r.return);continue}break}while(!0)}function bs(){var e=Ki.current;return Ki.current=Fi,e===null?Fi:e}function Bo(){(at===0||at===3||at===2)&&(at=4),it===null||(dn&268435455)===0&&(Ji&268435455)===0||Er(it,ht)}function il(e,t){var r=Ne;Ne|=2;var n=bs();it===e&&ht===t||Wr(e,t);do try{vf();break}catch(o){Js(e,o)}while(!0);if(Xl(),Ne=r,Ki.current=n,lt!==null)throw Error(d(261));return it=null,ht=0,at}function vf(){for(;lt!==null;)$s(lt)}function gf(){for(;lt!==null&&!Gc();)$s(lt)}function $s(e){var t=nu(e.alternate,e,Ot);e.memoizedProps=e.pendingProps,t===null?eu(e):lt=t,No.current=null}function eu(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=of(r,t,Ot),r!==null){lt=r;return}}else{if(r=uf(r,t),r!==null){r.flags&=32767,lt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{at=6,lt=null;return}}if(t=t.sibling,t!==null){lt=t;return}lt=t=e}while(t!==null);at===0&&(at=5)}function Zr(e,t){var r=je,n=rt.transition;try{rt.transition=null,je=1,yf(e,t,r)}finally{rt.transition=n,je=r}return null}function yf(e,t,r){do Vr();while(xr!==null);if((Ne&6)!==0)throw Error(d(327));var n=e.finishedWork,o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(d(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Hc(e,s),e===it&&(lt=it=null,ht=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||$i||($i=!0,iu(Vl,function(){return Vr(),null})),s=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||s){s=rt.transition,rt.transition=null;var y=je;je=1;var E=Ne;Ne|=4,No.current=null,ff(e,n),df(e,n),X(e.containerInfo),e.current=n,pf(n),Wc(),Ne=E,je=y,rt.transition=s}else e.current=n;if($i&&($i=!1,xr=e,el=o),s=e.pendingLanes,s===0&&(Sr=null),Qc(n.stateNode),kt(e,ct()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(bi)throw bi=!1,e=Ao,Ao=null,e;return(el&1)!==0&&e.tag!==0&&Vr(),s=e.pendingLanes,(s&1)!==0?e===Fo?Zn++:(Zn=0,Fo=e):Zn=0,tr(),null}function Vr(){if(xr!==null){var e=za(el),t=rt.transition,r=je;try{if(rt.transition=null,je=16>e?16:e,xr===null)var n=!1;else{if(e=xr,xr=null,el=0,(Ne&6)!==0)throw Error(d(331));var o=Ne;for(Ne|=4,ie=e.current;ie!==null;){var s=ie,y=s.child;if((ie.flags&16)!==0){var E=s.deletions;if(E!==null){for(var D=0;D<E.length;D++){var K=E[D];for(ie=K;ie!==null;){var fe=ie;switch(fe.tag){case 0:case 11:case 15:Gr(8,fe,s)}var Me=fe.child;if(Me!==null)Me.return=fe,ie=Me;else for(;ie!==null;){fe=ie;var ye=fe.sibling,Ze=fe.return;if(Ds(fe),fe===K){ie=null;break}if(ye!==null){ye.return=Ze,ie=ye;break}ie=Ze}}}var ge=s.alternate;if(ge!==null){var _t=ge.child;if(_t!==null){ge.child=null;do{var Wt=_t.sibling;_t.sibling=null,_t=Wt}while(_t!==null)}}ie=s}}if((s.subtreeFlags&2064)!==0&&y!==null)y.return=s,ie=y;else e:for(;ie!==null;){if(s=ie,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Gr(9,s,s.return)}var z=s.sibling;if(z!==null){z.return=s.return,ie=z;break e}ie=s.return}}var R=e.current;for(ie=R;ie!==null;){y=ie;var O=y.child;if((y.subtreeFlags&2064)!==0&&O!==null)O.return=y,ie=O;else e:for(y=R;ie!==null;){if(E=ie,(E.flags&2048)!==0)try{switch(E.tag){case 0:case 11:case 15:Bn(9,E)}}catch(he){Tt(E,E.return,he)}if(E===y){ie=null;break e}var oe=E.sibling;if(oe!==null){oe.return=E.return,ie=oe;break e}ie=E.return}}if(Ne=o,tr(),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(yi,e)}catch{}n=!0}return n}finally{je=r,rt.transition=t}}return!1}function tu(e,t,r){t=vo(r,t),t=ms(e,t,1),wr(e,t),t=Ct(),e=nl(e,1),e!==null&&(In(e,1,t),kt(e,t))}function Tt(e,t,r){if(e.tag===3)tu(e,e,r);else for(;t!==null;){if(t.tag===3){tu(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Sr===null||!Sr.has(n))){e=vo(r,e),e=vs(t,e,1),wr(t,e),e=Ct(),t=nl(t,1),t!==null&&(In(t,1,e),kt(t,e));break}}t=t.return}}function wf(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ct(),e.pingedLanes|=e.suspendedLanes&r,it===e&&(ht&r)===r&&(at===4||at===3&&(ht&130023424)===ht&&500>ct()-Lo?Wr(e,0):zo|=r),kt(e,t)}function ru(e,t){t===0&&((e.mode&1)===0?t=1:(t=vi,vi<<=1,(vi&130023424)===0&&(vi=4194304)));var r=Ct();e=nl(e,t),e!==null&&(In(e,t,r),kt(e,r))}function Sf(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),ru(e,r)}function xf(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,o=e.memoizedState;o!==null&&(r=o.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(d(314))}n!==null&&n.delete(t),ru(e,r)}var nu;nu=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ke.current)Lt=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return Lt=!1,sf(e,t,r);Lt=(e.flags&131072)!==0}else Lt=!1,Je&&(t.flags&1048576)!==0&&Wa(t,Ii,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var o=yt(t,We.current);rn(t,r),o=co(null,t,n,e,o,r);var s=fo();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,nt(n)?(s=!0,Ge(t)):s=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Jl(t),o.updater=Ri,t.stateNode=o,o._reactInternals=t,$l(t,n,e,r),t=wo(null,t,n,!0,s,r)):(t.tag=0,Je&&s&&eo(t),Rt(null,t,o,r),t=t.child),t;case 16:n=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=n._init,n=o(n._payload),t.type=n,o=t.tag=Ef(n),e=qt(n,e),o){case 0:t=yo(null,t,n,e,r);break e;case 1:t=Is(null,t,n,e,r);break e;case 11:t=_s(null,t,n,e,r);break e;case 14:t=Es(null,t,n,qt(n.type,e),r);break e}throw Error(d(306,n,""))}return t;case 0:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:qt(n,o),yo(e,t,n,o,r);case 1:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:qt(n,o),Is(e,t,n,o,r);case 3:e:{if(Ps(t),e===null)throw Error(d(387));n=t.pendingProps,s=t.memoizedState,o=s.element,Fa(e,t),Mi(t,n,null,r);var y=t.memoizedState;if(n=y.element,vt&&s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:y.cache,transitions:y.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){o=Error(d(423)),t=ks(e,t,n,r,o);break e}else if(n!==o){o=Error(d(424)),t=ks(e,t,n,r,o);break e}else for(vt&&(zt=hi(t.stateNode.containerInfo),Nt=t,Je=!0,Kt=null,Pn=!1),r=qa(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(on(),n===o){t=mr(e,t,r);break e}Rt(e,t,n,r)}t=t.child}return t;case 5:return Ka(t),e===null&&no(t),n=t.type,o=t.pendingProps,s=e!==null?e.memoizedProps:null,y=o.children,tt(n,o)?y=null:s!==null&&tt(n,s)&&(t.flags|=32),Cs(e,t),Rt(e,t,y,r),t.child;case 6:return e===null&&no(t),null;case 13:return Ts(e,t,r);case 4:return lo(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=an(t,null,n,r):Rt(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:qt(n,o),_s(e,t,n,o,r);case 7:return Rt(e,t,t.pendingProps,r),t.child;case 8:return Rt(e,t,t.pendingProps.children,r),t.child;case 12:return Rt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,o=t.pendingProps,s=t.memoizedProps,y=o.value,Aa(t,n,y),s!==null)if(er(s.value,y)){if(s.children===o.children&&!ke.current){t=mr(e,t,r);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var E=s.dependencies;if(E!==null){y=s.child;for(var D=E.firstContext;D!==null;){if(D.context===n){if(s.tag===1){D=fr(-1,r&-r),D.tag=2;var K=s.updateQueue;if(K!==null){K=K.shared;var fe=K.pending;fe===null?D.next=D:(D.next=fe.next,fe.next=D),K.pending=D}}s.lanes|=r,D=s.alternate,D!==null&&(D.lanes|=r),Kl(s.return,r,t),E.lanes|=r;break}D=D.next}}else if(s.tag===10)y=s.type===t.type?null:s.child;else if(s.tag===18){if(y=s.return,y===null)throw Error(d(341));y.lanes|=r,E=y.alternate,E!==null&&(E.lanes|=r),Kl(y,r,t),y=s.sibling}else y=s.child;if(y!==null)y.return=s;else for(y=s;y!==null;){if(y===t){y=null;break}if(s=y.sibling,s!==null){s.return=y.return,y=s;break}y=y.return}s=y}Rt(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,n=t.pendingProps.children,rn(t,r),o=Ft(o),n=n(o),t.flags|=1,Rt(e,t,n,r),t.child;case 14:return n=t.type,o=qt(n,t.pendingProps),o=qt(n.type,o),Es(e,t,n,o,r);case 15:return Ms(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:qt(n,o),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,nt(n)?(e=!0,Ge(t)):e=!1,rn(t,r),Ha(t,n,o),$l(t,n,o,r),wo(null,t,n,!0,e,r);case 19:return Os(e,t,r);case 22:return Rs(e,t,r)}throw Error(d(156,t.tag))};function iu(e,t){return Wl(e,t)}function _f(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gt(e,t,r,n){return new _f(e,t,r,n)}function Ho(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ef(e){if(typeof e=="function")return Ho(e)?1:0;if(e!=null){if(e=e.$$typeof,e===F)return 11;if(e===k)return 14}return 2}function Mr(e,t){var r=e.alternate;return r===null?(r=Gt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ll(e,t,r,n,o,s){var y=2;if(n=e,typeof e=="function")Ho(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case p:return Qr(r.children,o,s,t);case v:y=8,o|=8;break;case S:return e=Gt(12,r,t,o|2),e.elementType=S,e.lanes=s,e;case P:return e=Gt(13,r,t,o),e.elementType=P,e.lanes=s,e;case M:return e=Gt(19,r,t,o),e.elementType=M,e.lanes=s,e;case J:return ol(r,o,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case I:y=10;break e;case N:y=9;break e;case F:y=11;break e;case k:y=14;break e;case B:y=16,n=null;break e}throw Error(d(130,e==null?e:typeof e,""))}return t=Gt(y,r,t,o),t.elementType=e,t.type=n,t.lanes=s,t}function Qr(e,t,r,n){return e=Gt(7,e,n,t),e.lanes=r,e}function ol(e,t,r,n){return e=Gt(22,e,n,t),e.elementType=J,e.lanes=r,e.stateNode={},e}function Go(e,t,r){return e=Gt(6,e,null,t),e.lanes=r,e}function Wo(e,t,r){return t=Gt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Mf(e,t,r,n,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=En,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hl(0),this.expirationTimes=Hl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hl(0),this.identifierPrefix=n,this.onRecoverableError=o,vt&&(this.mutableSourceEagerHydrationData=null)}function lu(e,t,r,n,o,s,y,E,D){return e=new Mf(e,t,r,E,D),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Gt(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null},Jl(s),e}function ou(e){if(!e)return Oe;e=e._reactInternals;e:{if(U(e)!==e||e.tag!==1)throw Error(d(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(nt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(d(171))}if(e.tag===1){var r=e.type;if(nt(r))return ot(e,r,t)}return t}function au(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(d(188)):(e=Object.keys(e).join(","),Error(d(268,e)));return e=$(t),e===null?null:e.stateNode}function su(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Zo(e,t){su(e,t),(e=e.alternate)&&su(e,t)}function Rf(e){return e=$(e),e===null?null:e.stateNode}function Cf(){return null}return a.attemptContinuousHydration=function(e){if(e.tag===13){var t=Ct();Ht(e,134217728,t),Zo(e,134217728)}},a.attemptHydrationAtCurrentPriority=function(e){if(e.tag===13){var t=Ct(),r=_r(e);Ht(e,r,t),Zo(e,r)}},a.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Cn(t.pendingLanes);r!==0&&(Gl(t,r|1),kt(t,ct()),(Ne&6)===0&&(pn(),tr()))}break;case 13:var n=Ct();Ks(function(){return Ht(e,1,n)}),Zo(e,1)}},a.batchedUpdates=function(e,t){var r=Ne;Ne|=1;try{return e(t)}finally{Ne=r,Ne===0&&(pn(),wi&&tr())}},a.createComponentSelector=function(e){return{$$typeof:Vi,value:e}},a.createContainer=function(e,t,r,n,o,s,y){return lu(e,t,!1,null,r,n,o,s,y)},a.createHasPseudoClassSelector=function(e){return{$$typeof:Qi,value:e}},a.createHydrationContainer=function(e,t,r,n,o,s,y,E,D){return e=lu(r,n,!0,e,o,s,y,E,D),e.context=ou(null),r=e.current,n=Ct(),o=_r(r),s=fr(n,o),s.callback=t??null,wr(r,s),e.current.lanes=o,In(e,o,n),kt(e,n),e},a.createPortal=function(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:x,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}},a.createRoleSelector=function(e){return{$$typeof:Yi,value:e}},a.createTestNameSelector=function(e){return{$$typeof:Xi,value:e}},a.createTextSelector=function(e){return{$$typeof:qi,value:e}},a.deferredUpdates=function(e){var t=je,r=rt.transition;try{return rt.transition=null,je=16,e()}finally{je=t,rt.transition=r}},a.discreteUpdates=function(e,t,r,n,o){var s=je,y=rt.transition;try{return rt.transition=null,je=1,e(t,r,n,o)}finally{je=s,rt.transition=y,Ne===0&&pn()}},a.findAllNodes=To,a.findBoundingRects=function(e,t){if(!zr)throw Error(d(363));t=To(e,t),e=[];for(var r=0;r<t.length;r++)e.push(Cl(t[r]));for(t=e.length-1;0<t;t--){r=e[t];for(var n=r.x,o=n+r.width,s=r.y,y=s+r.height,E=t-1;0<=E;E--)if(t!==E){var D=e[E],K=D.x,fe=K+D.width,Me=D.y,ye=Me+D.height;if(n>=K&&s>=Me&&o<=fe&&y<=ye){e.splice(t,1);break}else if(n!==K||r.width!==D.width||ye<s||Me>y){if(!(s!==Me||r.height!==D.height||fe<n||K>o)){K>n&&(D.width+=K-n,D.x=n),fe<o&&(D.width=o-K),e.splice(t,1);break}}else{Me>s&&(D.height+=Me-s,D.y=s),ye<y&&(D.height=y-Me),e.splice(t,1);break}}}return e},a.findHostInstance=au,a.findHostInstanceWithNoPortals=function(e){return e=H(e),e=e!==null?se(e):null,e===null?null:e.stateNode},a.findHostInstanceWithWarning=function(e){return au(e)},a.flushControlled=function(e){var t=Ne;Ne|=1;var r=rt.transition,n=je;try{rt.transition=null,je=1,e()}finally{je=n,rt.transition=r,Ne=t,Ne===0&&(pn(),tr())}},a.flushPassiveEffects=Vr,a.flushSync=Ks,a.focusWithin=function(e,t){if(!zr)throw Error(d(363));for(e=Io(e),t=Ys(e,t),t=Array.from(t),e=0;e<t.length;){var r=t[e++];if(!Lr(r)){if(r.tag===5&&Il(r.stateNode))return!0;for(r=r.child;r!==null;)t.push(r),r=r.sibling}}return!1},a.getCurrentUpdatePriority=function(){return je},a.getFindAllNodesFailureDescription=function(e,t){if(!zr)throw Error(d(363));var r=0,n=[];e=[Io(e),0];for(var o=0;o<e.length;){var s=e[o++],y=e[o++],E=t[y];if((s.tag!==5||!Lr(s))&&(Po(s,E)&&(n.push(ko(E)),y++,y>r&&(r=y)),y<t.length))for(s=s.child;s!==null;)e.push(s,y),s=s.sibling}if(r<t.length){for(e=[];r<t.length;r++)e.push(ko(t[r]));return`findAllNodes was able to match part of the selector:
  `+(n.join(" > ")+`

No matching component was found for:
  `)+e.join(" > ")}return null},a.getPublicRootInstance=function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return ne(e.child.stateNode);default:return e.child.stateNode}},a.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:Rf,findFiberByHostInstance:e.findFiberByHostInstance||Cf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{yi=t.inject(e),$t=t}catch{}e=!!t.checkDCE}}return e},a.isAlreadyRendering=function(){return!1},a.observeVisibleRects=function(e,t,r,n){if(!zr)throw Error(d(363));e=To(e,t);var o=Pl(e,r,n).disconnect;return{disconnect:function(){o()}}},a.registerMutableSourceForHydration=function(e,t){var r=t._getVersion;r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r)},a.runWithPriority=function(e,t){var r=je;try{return je=e,t()}finally{je=r}},a.shouldError=function(){return null},a.shouldSuspend=function(){return!1},a.updateContainer=function(e,t,r,n){var o=t.current,s=Ct(),y=_r(o);return r=ou(r),t.context===null?t.context=r:t.pendingContext=r,t=fr(s,y),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),wr(o,t),e=Ht(o,y,s),e!==null&&Ei(e,o,y),y},a}),bo}var wu;function Pd(){return wu||(wu=1,qo.exports=Id()),qo.exports}var kd=Pd();const Td=wl(kd);var Su=rc();const Sa={},xa=l=>void Object.assign(Sa,l);function Nd(l,i){function a(p,{args:v=[],attach:S,...I},N){let F=`${p[0].toUpperCase()}${p.slice(1)}`,P;if(p==="primitive"){if(I.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const M=I.object;P=mn(M,{type:p,root:N,attach:S,primitive:!0})}else{const M=Sa[F];if(!M)throw new Error(`R3F: ${F} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(v))throw new Error("R3F: The args prop must be an array!");P=mn(new M(...v),{type:p,root:N,attach:S,memoizedProps:{args:v}})}return P.__r3f.attach===void 0&&(P instanceof Uf?P.__r3f.attach="geometry":P instanceof Bf&&(P.__r3f.attach="material")),F!=="inject"&&ta(P,I),P}function c(p,v){let S=!1;if(v){var I,N;(I=v.__r3f)!=null&&I.attach?ea(p,v,v.__r3f.attach):v.isObject3D&&p.isObject3D&&(p.add(v),S=!0),S||(N=p.__r3f)==null||N.objects.push(v),v.__r3f||mn(v,{}),v.__r3f.parent=p,ha(v),vn(v)}}function f(p,v,S){let I=!1;if(v){var N,F;if((N=v.__r3f)!=null&&N.attach)ea(p,v,v.__r3f.attach);else if(v.isObject3D&&p.isObject3D){v.parent=p,v.dispatchEvent({type:"added"}),p.dispatchEvent({type:"childadded",child:v});const P=p.children.filter(k=>k!==v),M=P.indexOf(S);p.children=[...P.slice(0,M),v,...P.slice(M)],I=!0}I||(F=p.__r3f)==null||F.objects.push(v),v.__r3f||mn(v,{}),v.__r3f.parent=p,ha(v),vn(v)}}function m(p,v,S=!1){p&&[...p].forEach(I=>d(v,I,S))}function d(p,v,S){if(v){var I,N,F;if(v.__r3f&&(v.__r3f.parent=null),(I=p.__r3f)!=null&&I.objects&&(p.__r3f.objects=p.__r3f.objects.filter(J=>J!==v)),(N=v.__r3f)!=null&&N.attach)Ru(p,v,v.__r3f.attach);else if(v.isObject3D&&p.isObject3D){var P;p.remove(v),(P=v.__r3f)!=null&&P.root&&Dd(hl(v),v)}const k=(F=v.__r3f)==null?void 0:F.primitive,B=!k&&(S===void 0?v.dispose!==null:S);if(!k){var M;m((M=v.__r3f)==null?void 0:M.objects,v,B),m(v.children,v,B)}if(delete v.__r3f,B&&v.dispose&&v.type!=="Scene"){const J=()=>{try{v.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?Su.unstable_scheduleCallback(Su.unstable_IdlePriority,J):J()}vn(p)}}function w(p,v,S,I){var N;const F=(N=p.__r3f)==null?void 0:N.parent;if(!F)return;const P=a(v,S,p.__r3f.root);if(p.children){for(const M of p.children)M.__r3f&&c(P,M);p.children=p.children.filter(M=>!M.__r3f)}p.__r3f.objects.forEach(M=>c(P,M)),p.__r3f.objects=[],p.__r3f.autoRemovedBeforeAppend||d(F,p),P.parent&&(P.__r3f.autoRemovedBeforeAppend=!0),c(F,P),P.raycast&&P.__r3f.eventCount&&hl(P).getState().internal.interaction.push(P),[I,I.alternate].forEach(M=>{M!==null&&(M.stateNode=P,M.ref&&(typeof M.ref=="function"?M.ref(P):M.ref.current=P))})}const g=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Td({createInstance:a,removeChild:d,appendChild:c,appendInitialChild:c,insertBefore:f,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(p,v)=>{if(!v)return;const S=p.getState().scene;S.__r3f&&(S.__r3f.root=p,c(S,v))},removeChildFromContainer:(p,v)=>{v&&d(p.getState().scene,v)},insertInContainerBefore:(p,v,S)=>{if(!v||!S)return;const I=p.getState().scene;I.__r3f&&f(I,v,S)},getRootHostContext:()=>null,getChildHostContext:p=>p,finalizeInitialChildren(p){var v;return!!((v=p==null?void 0:p.__r3f)!=null?v:{}).handlers},prepareUpdate(p,v,S,I){var N;if(((N=p==null?void 0:p.__r3f)!=null?N:{}).primitive&&I.object&&I.object!==p)return[!0];{const{args:P=[],children:M,...k}=I,{args:B=[],children:J,...Y}=S;if(!Array.isArray(P))throw new Error("R3F: the args prop must be an array!");if(P.some((le,G)=>le!==B[G]))return[!0];const Z=uc(p,k,Y,!0);return Z.changes.length?[!1,Z]:null}},commitUpdate(p,[v,S],I,N,F,P){v?w(p,I,F,P):ta(p,S)},commitMount(p,v,S,I){var N;const F=(N=p.__r3f)!=null?N:{};p.raycast&&F.handlers&&F.eventCount&&hl(p).getState().internal.interaction.push(p)},getPublicInstance:p=>p,prepareForCommit:()=>null,preparePortalMount:p=>mn(p.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(p){var v;const{attach:S,parent:I}=(v=p.__r3f)!=null?v:{};S&&I&&Ru(I,p,S),p.isObject3D&&(p.visible=!1),vn(p)},unhideInstance(p,v){var S;const{attach:I,parent:N}=(S=p.__r3f)!=null?S:{};I&&N&&ea(N,p,I),(p.isObject3D&&v.visible==null||v.visible)&&(p.visible=!0),vn(p)},createTextInstance:g,hideTextInstance:g,unhideTextInstance:g,getCurrentEventPriority:()=>i?i():yn.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Ye.fun(performance.now)?performance.now:Ye.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Ye.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Ye.fun(clearTimeout)?clearTimeout:void 0}),applyProps:ta}}var xu,_u;const $o=l=>"colorSpace"in l||"outputColorSpace"in l,nc=()=>{var l;return(l=Sa.ColorManagement)!=null?l:null},ic=l=>l&&l.isOrthographicCamera,zd=l=>l&&l.hasOwnProperty("current"),ri=typeof window<"u"&&((xu=window.document)!=null&&xu.createElement||((_u=window.navigator)==null?void 0:_u.product)==="ReactNative")?C.useLayoutEffect:C.useEffect;function lc(l){const i=C.useRef(l);return ri(()=>void(i.current=l),[l]),i}function Ld({set:l}){return ri(()=>(l(new Promise(()=>null)),()=>l(!1)),[l]),null}class oc extends C.Component{constructor(...i){super(...i),this.state={error:!1}}componentDidCatch(i){this.props.set(i)}render(){return this.state.error?null:this.props.children}}oc.getDerivedStateFromError=()=>({error:!0});const ac="__default",Eu=new Map,Od=l=>l&&!!l.memoized&&!!l.changes;function sc(l){var i;const a=typeof window<"u"?(i=window.devicePixelRatio)!=null?i:2:1;return Array.isArray(l)?Math.min(Math.max(l[0],a),l[1]):l}const Qn=l=>{var i;return(i=l.__r3f)==null?void 0:i.root.getState()};function hl(l){let i=l.__r3f.root;for(;i.getState().previousRoot;)i=i.getState().previousRoot;return i}const Ye={obj:l=>l===Object(l)&&!Ye.arr(l)&&typeof l!="function",fun:l=>typeof l=="function",str:l=>typeof l=="string",num:l=>typeof l=="number",boo:l=>typeof l=="boolean",und:l=>l===void 0,arr:l=>Array.isArray(l),equ(l,i,{arrays:a="shallow",objects:c="reference",strict:f=!0}={}){if(typeof l!=typeof i||!!l!=!!i)return!1;if(Ye.str(l)||Ye.num(l)||Ye.boo(l))return l===i;const m=Ye.obj(l);if(m&&c==="reference")return l===i;const d=Ye.arr(l);if(d&&a==="reference")return l===i;if((d||m)&&l===i)return!0;let w;for(w in l)if(!(w in i))return!1;if(m&&a==="shallow"&&c==="shallow"){for(w in f?i:l)if(!Ye.equ(l[w],i[w],{strict:f,objects:"reference"}))return!1}else for(w in f?i:l)if(l[w]!==i[w])return!1;if(Ye.und(w)){if(d&&l.length===0&&i.length===0||m&&Object.keys(l).length===0&&Object.keys(i).length===0)return!0;if(l!==i)return!1}return!0}};function Ad(l){const i={nodes:{},materials:{}};return l&&l.traverse(a=>{a.name&&(i.nodes[a.name]=a),a.material&&!i.materials[a.material.name]&&(i.materials[a.material.name]=a.material)}),i}function Fd(l){l.dispose&&l.type!=="Scene"&&l.dispose();for(const i in l)i.dispose==null||i.dispose(),delete l[i]}function mn(l,i){const a=l;return a.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...i},l}function pa(l,i){let a=l;if(i.includes("-")){const c=i.split("-"),f=c.pop();return a=c.reduce((m,d)=>m[d],l),{target:a,key:f}}else return{target:a,key:i}}const Mu=/-\d+$/;function ea(l,i,a){if(Ye.str(a)){if(Mu.test(a)){const m=a.replace(Mu,""),{target:d,key:w}=pa(l,m);Array.isArray(d[w])||(d[w]=[])}const{target:c,key:f}=pa(l,a);i.__r3f.previousAttach=c[f],c[f]=i}else i.__r3f.previousAttach=a(l,i)}function Ru(l,i,a){var c,f;if(Ye.str(a)){const{target:m,key:d}=pa(l,a),w=i.__r3f.previousAttach;w===void 0?delete m[d]:m[d]=w}else(c=i.__r3f)==null||c.previousAttach==null||c.previousAttach(l,i);(f=i.__r3f)==null||delete f.previousAttach}function uc(l,{children:i,key:a,ref:c,...f},{children:m,key:d,ref:w,...g}={},x=!1){const p=l.__r3f,v=Object.entries(f),S=[];if(x){const N=Object.keys(g);for(let F=0;F<N.length;F++)f.hasOwnProperty(N[F])||v.unshift([N[F],ac+"remove"])}v.forEach(([N,F])=>{var P;if((P=l.__r3f)!=null&&P.primitive&&N==="object"||Ye.equ(F,g[N]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(N))return S.push([N,F,!0,[]]);let M=[];N.includes("-")&&(M=N.split("-")),S.push([N,F,!1,M]);for(const k in f){const B=f[k];k.startsWith(`${N}-`)&&S.push([k,B,!1,k.split("-")])}});const I={...f};return p!=null&&p.memoizedProps&&p!=null&&p.memoizedProps.args&&(I.args=p.memoizedProps.args),p!=null&&p.memoizedProps&&p!=null&&p.memoizedProps.attach&&(I.attach=p.memoizedProps.attach),{memoized:I,changes:S}}function ta(l,i){var a;const c=l.__r3f,f=c==null?void 0:c.root,m=f==null||f.getState==null?void 0:f.getState(),{memoized:d,changes:w}=Od(i)?i:uc(l,i),g=c==null?void 0:c.eventCount;l.__r3f&&(l.__r3f.memoizedProps=d);for(let p=0;p<w.length;p++){let[v,S,I,N]=w[p];if($o(l)){const k="srgb",B="srgb-linear";v==="encoding"?(v="colorSpace",S=S===3001?k:B):v==="outputEncoding"&&(v="outputColorSpace",S=S===3001?k:B)}let F=l,P=F[v];if(N.length&&(P=N.reduce((M,k)=>M[k],l),!(P&&P.set))){const[M,...k]=N.reverse();F=k.reverse().reduce((B,J)=>B[J],l),v=M}if(S===ac+"remove")if(F.constructor){let M=Eu.get(F.constructor);M||(M=new F.constructor,Eu.set(F.constructor,M)),S=M[v]}else S=0;if(I&&c)S?c.handlers[v]=S:delete c.handlers[v],c.eventCount=Object.keys(c.handlers).length;else if(P&&P.set&&(P.copy||P instanceof Qo)){if(Array.isArray(S))P.fromArray?P.fromArray(S):P.set(...S);else if(P.copy&&S&&S.constructor&&P.constructor===S.constructor)P.copy(S);else if(S!==void 0){const M=P instanceof gl;!M&&P.setScalar?P.setScalar(S):P instanceof Qo&&S instanceof Qo?P.mask=S.mask:P.set(S),!nc()&&m&&!m.linear&&M&&P.convertSRGBToLinear()}}else if(F[v]=S,F[v]instanceof Yr&&F[v].format===Sn&&F[v].type===vl&&m){const M=F[v];$o(M)&&$o(m.gl)?M.colorSpace=m.gl.outputColorSpace:M.encoding=m.gl.outputEncoding}vn(l)}if(c&&c.parent&&l.raycast&&g!==c.eventCount){const p=hl(l).getState().internal,v=p.interaction.indexOf(l);v>-1&&p.interaction.splice(v,1),c.eventCount&&p.interaction.push(l)}return!(w.length===1&&w[0][0]==="onUpdate")&&w.length&&(a=l.__r3f)!=null&&a.parent&&ha(l),l}function vn(l){var i,a;const c=(i=l.__r3f)==null||(a=i.root)==null||a.getState==null?void 0:a.getState();c&&c.internal.frames===0&&c.invalidate()}function ha(l){l.onUpdate==null||l.onUpdate(l)}function cc(l,i){l.manual||(ic(l)?(l.left=i.width/-2,l.right=i.width/2,l.top=i.height/2,l.bottom=i.height/-2):l.aspect=i.width/i.height,l.updateProjectionMatrix(),l.updateMatrixWorld())}function sl(l){return(l.eventObject||l.object).uuid+"/"+l.index+l.instanceId}function jd(){var l;const i=typeof self<"u"&&self||typeof window<"u"&&window;if(!i)return yn.DefaultEventPriority;switch((l=i.event)==null?void 0:l.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return yn.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return yn.ContinuousEventPriority;default:return yn.DefaultEventPriority}}function fc(l,i,a,c){const f=a.get(i);f&&(a.delete(i),a.size===0&&(l.delete(c),f.target.releasePointerCapture(c)))}function Dd(l,i){const{internal:a}=l.getState();a.interaction=a.interaction.filter(c=>c!==i),a.initialHits=a.initialHits.filter(c=>c!==i),a.hovered.forEach((c,f)=>{(c.eventObject===i||c.object===i)&&a.hovered.delete(f)}),a.capturedMap.forEach((c,f)=>{fc(a.capturedMap,i,c,f)})}function Ud(l){function i(g){const{internal:x}=l.getState(),p=g.offsetX-x.initialClick[0],v=g.offsetY-x.initialClick[1];return Math.round(Math.sqrt(p*p+v*v))}function a(g){return g.filter(x=>["Move","Over","Enter","Out","Leave"].some(p=>{var v;return(v=x.__r3f)==null?void 0:v.handlers["onPointer"+p]}))}function c(g,x){const p=l.getState(),v=new Set,S=[],I=x?x(p.internal.interaction):p.internal.interaction;for(let M=0;M<I.length;M++){const k=Qn(I[M]);k&&(k.raycaster.camera=void 0)}p.previousRoot||p.events.compute==null||p.events.compute(g,p);function N(M){const k=Qn(M);if(!k||!k.events.enabled||k.raycaster.camera===null)return[];if(k.raycaster.camera===void 0){var B;k.events.compute==null||k.events.compute(g,k,(B=k.previousRoot)==null?void 0:B.getState()),k.raycaster.camera===void 0&&(k.raycaster.camera=null)}return k.raycaster.camera?k.raycaster.intersectObject(M,!0):[]}let F=I.flatMap(N).sort((M,k)=>{const B=Qn(M.object),J=Qn(k.object);return!B||!J?M.distance-k.distance:J.events.priority-B.events.priority||M.distance-k.distance}).filter(M=>{const k=sl(M);return v.has(k)?!1:(v.add(k),!0)});p.events.filter&&(F=p.events.filter(F,p));for(const M of F){let k=M.object;for(;k;){var P;(P=k.__r3f)!=null&&P.eventCount&&S.push({...M,eventObject:k}),k=k.parent}}if("pointerId"in g&&p.internal.capturedMap.has(g.pointerId))for(let M of p.internal.capturedMap.get(g.pointerId).values())v.has(sl(M.intersection))||S.push(M.intersection);return S}function f(g,x,p,v){const S=l.getState();if(g.length){const I={stopped:!1};for(const N of g){const F=Qn(N.object)||S,{raycaster:P,pointer:M,camera:k,internal:B}=F,J=new Xe(M.x,M.y,0).unproject(k),Y=W=>{var H,$;return(H=($=B.capturedMap.get(W))==null?void 0:$.has(N.eventObject))!=null?H:!1},Z=W=>{const H={intersection:N,target:x.target};B.capturedMap.has(W)?B.capturedMap.get(W).set(N.eventObject,H):B.capturedMap.set(W,new Map([[N.eventObject,H]])),x.target.setPointerCapture(W)},le=W=>{const H=B.capturedMap.get(W);H&&fc(B.capturedMap,N.eventObject,H,W)};let G={};for(let W in x){let H=x[W];typeof H!="function"&&(G[W]=H)}let U={...N,...G,pointer:M,intersections:g,stopped:I.stopped,delta:p,unprojectedPoint:J,ray:P.ray,camera:k,stopPropagation(){const W="pointerId"in x&&B.capturedMap.get(x.pointerId);if((!W||W.has(N.eventObject))&&(U.stopped=I.stopped=!0,B.hovered.size&&Array.from(B.hovered.values()).find(H=>H.eventObject===N.eventObject))){const H=g.slice(0,g.indexOf(N));m([...H,N])}},target:{hasPointerCapture:Y,setPointerCapture:Z,releasePointerCapture:le},currentTarget:{hasPointerCapture:Y,setPointerCapture:Z,releasePointerCapture:le},nativeEvent:x};if(v(U),I.stopped===!0)break}}return g}function m(g){const{internal:x}=l.getState();for(const p of x.hovered.values())if(!g.length||!g.find(v=>v.object===p.object&&v.index===p.index&&v.instanceId===p.instanceId)){const S=p.eventObject.__r3f,I=S==null?void 0:S.handlers;if(x.hovered.delete(sl(p)),S!=null&&S.eventCount){const N={...p,intersections:g};I.onPointerOut==null||I.onPointerOut(N),I.onPointerLeave==null||I.onPointerLeave(N)}}}function d(g,x){for(let p=0;p<x.length;p++){const v=x[p].__r3f;v==null||v.handlers.onPointerMissed==null||v.handlers.onPointerMissed(g)}}function w(g){switch(g){case"onPointerLeave":case"onPointerCancel":return()=>m([]);case"onLostPointerCapture":return x=>{const{internal:p}=l.getState();"pointerId"in x&&p.capturedMap.has(x.pointerId)&&requestAnimationFrame(()=>{p.capturedMap.has(x.pointerId)&&(p.capturedMap.delete(x.pointerId),m([]))})}}return function(p){const{onPointerMissed:v,internal:S}=l.getState();S.lastEvent.current=p;const I=g==="onPointerMove",N=g==="onClick"||g==="onContextMenu"||g==="onDoubleClick",P=c(p,I?a:void 0),M=N?i(p):0;g==="onPointerDown"&&(S.initialClick=[p.offsetX,p.offsetY],S.initialHits=P.map(B=>B.eventObject)),N&&!P.length&&M<=2&&(d(p,S.interaction),v&&v(p)),I&&m(P);function k(B){const J=B.eventObject,Y=J.__r3f,Z=Y==null?void 0:Y.handlers;if(Y!=null&&Y.eventCount)if(I){if(Z.onPointerOver||Z.onPointerEnter||Z.onPointerOut||Z.onPointerLeave){const le=sl(B),G=S.hovered.get(le);G?G.stopped&&B.stopPropagation():(S.hovered.set(le,B),Z.onPointerOver==null||Z.onPointerOver(B),Z.onPointerEnter==null||Z.onPointerEnter(B))}Z.onPointerMove==null||Z.onPointerMove(B)}else{const le=Z[g];le?(!N||S.initialHits.includes(J))&&(d(p,S.interaction.filter(G=>!S.initialHits.includes(G))),le(B)):N&&S.initialHits.includes(J)&&d(p,S.interaction.filter(G=>!S.initialHits.includes(G)))}}f(P,p,M,k)}}return{handlePointer:w}}const Bd=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],dc=l=>!!(l!=null&&l.render),_a=C.createContext(null),Hd=(l,i)=>{const a=$u((w,g)=>{const x=new Xe,p=new Xe,v=new Xe;function S(M=g().camera,k=p,B=g().size){const{width:J,height:Y,top:Z,left:le}=B,G=J/Y;k instanceof Xe?v.copy(k):v.set(...k);const U=M.getWorldPosition(x).distanceTo(v);if(ic(M))return{width:J/M.zoom,height:Y/M.zoom,top:Z,left:le,factor:1,distance:U,aspect:G};{const W=M.fov*Math.PI/180,H=2*Math.tan(W/2)*U,$=H*(J/Y);return{width:$,height:H,top:Z,left:le,factor:J/$,distance:U,aspect:G}}}let I;const N=M=>w(k=>({performance:{...k.performance,current:M}})),F=new Yu;return{set:w,get:g,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(M=1)=>l(g(),M),advance:(M,k)=>i(M,k,g()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Df,pointer:F,mouse:F,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=g();I&&clearTimeout(I),M.performance.current!==M.performance.min&&N(M.performance.min),I=setTimeout(()=>N(g().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:S},setEvents:M=>w(k=>({...k,events:{...k.events,...M}})),setSize:(M,k,B,J,Y)=>{const Z=g().camera,le={width:M,height:k,top:J||0,left:Y||0,updateStyle:B};w(G=>({size:le,viewport:{...G.viewport,...S(Z,p,le)}}))},setDpr:M=>w(k=>{const B=sc(M);return{viewport:{...k.viewport,dpr:B,initialDpr:k.viewport.initialDpr||B}}}),setFrameloop:(M="always")=>{const k=g().clock;k.stop(),k.elapsedTime=0,M!=="never"&&(k.start(),k.elapsedTime=0),w(()=>({frameloop:M}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:C.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(M,k,B)=>{const J=g().internal;return J.priority=J.priority+(k>0?1:0),J.subscribers.push({ref:M,priority:k,store:B}),J.subscribers=J.subscribers.sort((Y,Z)=>Y.priority-Z.priority),()=>{const Y=g().internal;Y!=null&&Y.subscribers&&(Y.priority=Y.priority-(k>0?1:0),Y.subscribers=Y.subscribers.filter(Z=>Z.ref!==M))}}}}}),c=a.getState();let f=c.size,m=c.viewport.dpr,d=c.camera;return a.subscribe(()=>{const{camera:w,size:g,viewport:x,gl:p,set:v}=a.getState();if(g.width!==f.width||g.height!==f.height||x.dpr!==m){var S;f=g,m=x.dpr,cc(w,g),p.setPixelRatio(x.dpr);const I=(S=g.updateStyle)!=null?S:typeof HTMLCanvasElement<"u"&&p.domElement instanceof HTMLCanvasElement;p.setSize(g.width,g.height,I)}w!==d&&(d=w,v(I=>({viewport:{...I.viewport,...I.viewport.getCurrentViewport(w)}})))}),a.subscribe(w=>l(w)),a};let ul,Gd=new Set,Wd=new Set,Zd=new Set;function ra(l,i){if(l.size)for(const{callback:a}of l.values())a(i)}function Yn(l,i){switch(l){case"before":return ra(Gd,i);case"after":return ra(Wd,i);case"tail":return ra(Zd,i)}}let na,ia;function la(l,i,a){let c=i.clock.getDelta();for(i.frameloop==="never"&&typeof l=="number"&&(c=l-i.clock.elapsedTime,i.clock.oldTime=i.clock.elapsedTime,i.clock.elapsedTime=l),na=i.internal.subscribers,ul=0;ul<na.length;ul++)ia=na[ul],ia.ref.current(ia.store.getState(),c,a);return!i.internal.priority&&i.gl.render&&i.gl.render(i.scene,i.camera),i.internal.frames=Math.max(0,i.internal.frames-1),i.frameloop==="always"?1:i.internal.frames}function Vd(l){let i=!1,a=!1,c,f,m;function d(x){f=requestAnimationFrame(d),i=!0,c=0,Yn("before",x),a=!0;for(const v of l.values()){var p;m=v.store.getState(),m.internal.active&&(m.frameloop==="always"||m.internal.frames>0)&&!((p=m.gl.xr)!=null&&p.isPresenting)&&(c+=la(x,m))}if(a=!1,Yn("after",x),c===0)return Yn("tail",x),i=!1,cancelAnimationFrame(f)}function w(x,p=1){var v;if(!x)return l.forEach(S=>w(S.store.getState(),p));(v=x.gl.xr)!=null&&v.isPresenting||!x.internal.active||x.frameloop==="never"||(p>1?x.internal.frames=Math.min(60,x.internal.frames+p):a?x.internal.frames=2:x.internal.frames=1,i||(i=!0,requestAnimationFrame(d)))}function g(x,p=!0,v,S){if(p&&Yn("before",x),v)la(x,v,S);else for(const I of l.values())la(x,I.store.getState());p&&Yn("after",x)}return{loop:d,invalidate:w,advance:g}}function Ea(){const l=C.useContext(_a);if(!l)throw new Error("R3F: Hooks can only be used within the Canvas component!");return l}function sr(l=a=>a,i){return Ea()(l,i)}function vr(l,i=0){const a=Ea(),c=a.getState().internal.subscribe,f=lc(l);return ri(()=>c(f,i,a),[i,c,a]),null}const Cu=new WeakMap;function pc(l,i){return function(a,...c){let f=Cu.get(a);return f||(f=new a,Cu.set(a,f)),l&&l(f),Promise.all(c.map(m=>new Promise((d,w)=>f.load(m,g=>{g.scene&&Object.assign(g,Ad(g.scene)),d(g)},i,g=>w(new Error(`Could not load ${m}: ${g==null?void 0:g.message}`))))))}}function xn(l,i,a,c){const f=Array.isArray(i)?i:[i],m=Ed(pc(a,c),[l,...f],{equal:Ye.equ});return Array.isArray(i)?m:m[0]}xn.preload=function(l,i,a){const c=Array.isArray(i)?i:[i];return Md(pc(a),[l,...c])};xn.clear=function(l,i){const a=Array.isArray(i)?i:[i];return Rd([l,...a])};const _n=new Map,{invalidate:Iu,advance:Pu}=Vd(_n),{reconciler:$n,applyProps:Pr}=Nd(_n,jd),hn={objects:"shallow",strict:!1},Qd=(l,i)=>{const a=typeof l=="function"?l(i):l;return dc(a)?a:new Qu({powerPreference:"high-performance",canvas:i,antialias:!0,alpha:!0,...l})};function Yd(l,i){const a=typeof HTMLCanvasElement<"u"&&l instanceof HTMLCanvasElement;if(i){const{width:c,height:f,top:m,left:d,updateStyle:w=a}=i;return{width:c,height:f,top:m,left:d,updateStyle:w}}else if(typeof HTMLCanvasElement<"u"&&l instanceof HTMLCanvasElement&&l.parentElement){const{width:c,height:f,top:m,left:d}=l.parentElement.getBoundingClientRect();return{width:c,height:f,top:m,left:d,updateStyle:a}}else if(typeof OffscreenCanvas<"u"&&l instanceof OffscreenCanvas)return{width:l.width,height:l.height,top:0,left:0,updateStyle:a};return{width:0,height:0,top:0,left:0}}function Xd(l){const i=_n.get(l),a=i==null?void 0:i.fiber,c=i==null?void 0:i.store;i&&console.warn("R3F.createRoot should only be called once!");const f=typeof reportError=="function"?reportError:console.error,m=c||Hd(Iu,Pu),d=a||$n.createContainer(m,yn.ConcurrentRoot,null,!1,null,"",f,null);i||_n.set(l,{fiber:d,store:m});let w,g=!1,x;return{configure(p={}){let{gl:v,size:S,scene:I,events:N,onCreated:F,shadows:P=!1,linear:M=!1,flat:k=!1,legacy:B=!1,orthographic:J=!1,frameloop:Y="always",dpr:Z=[1,2],performance:le,raycaster:G,camera:U,onPointerMissed:W}=p,H=m.getState(),$=H.gl;H.gl||H.set({gl:$=Qd(v,l)});let ce=H.raycaster;ce||H.set({raycaster:ce=new Zu});const{params:se,...xe}=G||{};if(Ye.equ(xe,ce,hn)||Pr(ce,{...xe}),Ye.equ(se,ce.params,hn)||Pr(ce,{params:{...ce.params,...se}}),!H.camera||H.camera===x&&!Ye.equ(x,U,hn)){x=U;const X=U instanceof jf,pe=X?U:J?new Vu(0,0,0,0,.1,1e3):new Nf(75,0,.1,1e3);X||(pe.position.z=5,U&&(Pr(pe,U),("aspect"in U||"left"in U||"right"in U||"bottom"in U||"top"in U)&&(pe.manual=!0,pe.updateProjectionMatrix())),!H.camera&&!(U!=null&&U.rotation)&&pe.lookAt(0,0,0)),H.set({camera:pe}),ce.camera=pe}if(!H.scene){let X;I instanceof ml?X=I:(X=new ml,I&&Pr(X,I)),H.set({scene:mn(X)})}if(!H.xr){var ne;const X=(Se,Ve)=>{const tt=m.getState();tt.frameloop!=="never"&&Pu(Se,!0,tt,Ve)},pe=()=>{const Se=m.getState();Se.gl.xr.enabled=Se.gl.xr.isPresenting,Se.gl.xr.setAnimationLoop(Se.gl.xr.isPresenting?X:null),Se.gl.xr.isPresenting||Iu(Se)},me={connect(){const Se=m.getState().gl;Se.xr.addEventListener("sessionstart",pe),Se.xr.addEventListener("sessionend",pe)},disconnect(){const Se=m.getState().gl;Se.xr.removeEventListener("sessionstart",pe),Se.xr.removeEventListener("sessionend",pe)}};typeof((ne=$.xr)==null?void 0:ne.addEventListener)=="function"&&me.connect(),H.set({xr:me})}if($.shadowMap){const X=$.shadowMap.enabled,pe=$.shadowMap.type;if($.shadowMap.enabled=!!P,Ye.boo(P))$.shadowMap.type=Vo;else if(Ye.str(P)){var we;const me={basic:Of,percentage:Lf,soft:Vo,variance:zf};$.shadowMap.type=(we=me[P])!=null?we:Vo}else Ye.obj(P)&&Object.assign($.shadowMap,P);(X!==$.shadowMap.enabled||pe!==$.shadowMap.type)&&($.shadowMap.needsUpdate=!0)}const Q=nc();Q&&("enabled"in Q?Q.enabled=!B:"legacyMode"in Q&&(Q.legacyMode=B)),g||Pr($,{outputEncoding:M?3e3:3001,toneMapping:k?Af:Ff}),H.legacy!==B&&H.set(()=>({legacy:B})),H.linear!==M&&H.set(()=>({linear:M})),H.flat!==k&&H.set(()=>({flat:k})),v&&!Ye.fun(v)&&!dc(v)&&!Ye.equ(v,$,hn)&&Pr($,v),N&&!H.events.handlers&&H.set({events:N(m)});const ae=Yd(l,S);return Ye.equ(ae,H.size,hn)||H.setSize(ae.width,ae.height,ae.updateStyle,ae.top,ae.left),Z&&H.viewport.dpr!==sc(Z)&&H.setDpr(Z),H.frameloop!==Y&&H.setFrameloop(Y),H.onPointerMissed||H.set({onPointerMissed:W}),le&&!Ye.equ(le,H.performance,hn)&&H.set(X=>({performance:{...X.performance,...le}})),w=F,g=!0,this},render(p){return g||this.configure(),$n.updateContainer(T.jsx(qd,{store:m,children:p,onCreated:w,rootElement:l}),d,null,()=>{}),m},unmount(){hc(l)}}}function qd({store:l,children:i,onCreated:a,rootElement:c}){return ri(()=>{const f=l.getState();f.set(m=>({internal:{...m.internal,active:!0}})),a&&a(f),l.getState().events.connected||f.events.connect==null||f.events.connect(c)},[]),T.jsx(_a.Provider,{value:l,children:i})}function hc(l,i){const a=_n.get(l),c=a==null?void 0:a.fiber;if(c){const f=a==null?void 0:a.store.getState();f&&(f.internal.active=!1),$n.updateContainer(null,c,null,()=>{f&&setTimeout(()=>{try{var m,d,w,g;f.events.disconnect==null||f.events.disconnect(),(m=f.gl)==null||(d=m.renderLists)==null||d.dispose==null||d.dispose(),(w=f.gl)==null||w.forceContextLoss==null||w.forceContextLoss(),(g=f.gl)!=null&&g.xr&&f.xr.disconnect(),Fd(f),_n.delete(l)}catch{}},500)})}}function Kd(l,i,a){return T.jsx(Jd,{children:l,container:i,state:a},i.uuid)}function Jd({state:l={},children:i,container:a}){const{events:c,size:f,...m}=l,d=Ea(),[w]=C.useState(()=>new Zu),[g]=C.useState(()=>new Yu),x=C.useCallback((v,S)=>{const I={...v};Object.keys(v).forEach(F=>{(Bd.includes(F)||v[F]!==S[F]&&S[F])&&delete I[F]});let N;if(S&&f){const F=S.camera;N=v.viewport.getCurrentViewport(F,new Xe,f),F!==v.camera&&cc(F,f)}return{...I,scene:a,raycaster:w,pointer:g,mouse:g,previousRoot:d,events:{...v.events,...S==null?void 0:S.events,...c},size:{...v.size,...f},viewport:{...v.viewport,...N},...m}},[l]),[p]=C.useState(()=>{const v=d.getState();return $u((I,N)=>({...v,scene:a,raycaster:w,pointer:g,mouse:g,previousRoot:d,events:{...v.events,...c},size:{...v.size,...f},...m,set:I,get:N,setEvents:F=>I(P=>({...P,events:{...P.events,...F}}))}))});return C.useEffect(()=>{const v=d.subscribe(S=>p.setState(I=>x(S,I)));return()=>{v()}},[x]),C.useEffect(()=>{p.setState(v=>x(d.getState(),v))},[x]),C.useEffect(()=>()=>{p.destroy()},[]),T.jsx(T.Fragment,{children:$n.createPortal(T.jsx(_a.Provider,{value:p,children:i}),p,null)})}$n.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:C.version});const oa={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function bd(l){const{handlePointer:i}=Ud(l);return{priority:1,enabled:!0,compute(a,c,f){c.pointer.set(a.offsetX/c.size.width*2-1,-(a.offsetY/c.size.height)*2+1),c.raycaster.setFromCamera(c.pointer,c.camera)},connected:void 0,handlers:Object.keys(oa).reduce((a,c)=>({...a,[c]:i(c)}),{}),update:()=>{var a;const{events:c,internal:f}=l.getState();(a=f.lastEvent)!=null&&a.current&&c.handlers&&c.handlers.onPointerMove(f.lastEvent.current)},connect:a=>{var c;const{set:f,events:m}=l.getState();m.disconnect==null||m.disconnect(),f(d=>({events:{...d.events,connected:a}})),Object.entries((c=m.handlers)!=null?c:[]).forEach(([d,w])=>{const[g,x]=oa[d];a.addEventListener(g,w,{passive:x})})},disconnect:()=>{const{set:a,events:c}=l.getState();if(c.connected){var f;Object.entries((f=c.handlers)!=null?f:[]).forEach(([m,d])=>{if(c&&c.connected instanceof HTMLElement){const[w]=oa[m];c.connected.removeEventListener(w,d)}}),a(m=>({events:{...m.events,connected:void 0}}))}}}}var aa,ku;function $d(){if(ku)return aa;ku=1;function l(i,a,c){var f,m,d,w,g;a==null&&(a=100);function x(){var v=Date.now()-w;v<a&&v>=0?f=setTimeout(x,a-v):(f=null,c||(g=i.apply(d,m),d=m=null))}var p=function(){d=this,m=arguments,w=Date.now();var v=c&&!f;return f||(f=setTimeout(x,a)),v&&(g=i.apply(d,m),d=m=null),g};return p.clear=function(){f&&(clearTimeout(f),f=null)},p.flush=function(){f&&(g=i.apply(d,m),d=m=null,clearTimeout(f),f=null)},p}return l.debounce=l,aa=l,aa}var ep=$d();const Tu=wl(ep);var tp=Object.defineProperty,rp=Object.defineProperties,np=Object.getOwnPropertyDescriptors,Nu=Object.getOwnPropertySymbols,ip=Object.prototype.hasOwnProperty,lp=Object.prototype.propertyIsEnumerable,zu=(l,i,a)=>i in l?tp(l,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):l[i]=a,Lu=(l,i)=>{for(var a in i||(i={}))ip.call(i,a)&&zu(l,a,i[a]);if(Nu)for(var a of Nu(i))lp.call(i,a)&&zu(l,a,i[a]);return l},op=(l,i)=>rp(l,np(i)),Ou,Au;typeof window<"u"&&((Ou=window.document)!=null&&Ou.createElement||((Au=window.navigator)==null?void 0:Au.product)==="ReactNative")?C.useLayoutEffect:C.useEffect;function mc(l,i,a){if(!l)return;if(a(l)===!0)return l;let c=l.child;for(;c;){const f=mc(c,i,a);if(f)return f;c=c.sibling}}function vc(l){try{return Object.defineProperties(l,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return l}}const Fu=console.error;console.error=function(){const l=[...arguments].join("");if(l!=null&&l.startsWith("Warning:")&&l.includes("useContext")){console.error=Fu;return}return Fu.apply(this,arguments)};const Ma=vc(C.createContext(null));class gc extends C.Component{render(){return C.createElement(Ma.Provider,{value:this._reactInternals},this.props.children)}}function ap(){const l=C.useContext(Ma);if(l===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const i=C.useId();return C.useMemo(()=>{for(const c of[l,l==null?void 0:l.alternate]){if(!c)continue;const f=mc(c,!1,m=>{let d=m.memoizedState;for(;d;){if(d.memoizedState===i)return!0;d=d.next}});if(f)return f}},[l,i])}function sp(){const l=ap(),[i]=C.useState(()=>new Map);i.clear();let a=l;for(;a;){if(a.type&&typeof a.type=="object"){const f=a.type._context===void 0&&a.type.Provider===a.type?a.type:a.type._context;f&&f!==Ma&&!i.has(f)&&i.set(f,C.useContext(vc(f)))}a=a.return}return i}function up(){const l=sp();return C.useMemo(()=>Array.from(l.keys()).reduce((i,a)=>c=>C.createElement(i,null,C.createElement(a.Provider,op(Lu({},c),{value:l.get(a)}))),i=>C.createElement(gc,Lu({},i))),[l])}function cp({debounce:l,scroll:i,polyfill:a,offsetSize:c}={debounce:0,scroll:!1,offsetSize:!1}){const f=a||typeof window<"u"&&window.ResizeObserver,[m,d]=C.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!f)return m.width=1280,m.height=800,[()=>{},m,()=>{}];const w=C.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:m}),g=l?typeof l=="number"?l:l.scroll:null,x=l?typeof l=="number"?l:l.resize:null,p=C.useRef(!1);C.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[v,S,I]=C.useMemo(()=>{const M=()=>{if(!w.current.element)return;const{left:k,top:B,width:J,height:Y,bottom:Z,right:le,x:G,y:U}=w.current.element.getBoundingClientRect(),W={left:k,top:B,width:J,height:Y,bottom:Z,right:le,x:G,y:U};w.current.element instanceof HTMLElement&&c&&(W.height=w.current.element.offsetHeight,W.width=w.current.element.offsetWidth),Object.freeze(W),p.current&&!hp(w.current.lastBounds,W)&&d(w.current.lastBounds=W)};return[M,x?Tu(M,x):M,g?Tu(M,g):M]},[d,c,g,x]);function N(){w.current.scrollContainers&&(w.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",I,!0)),w.current.scrollContainers=null),w.current.resizeObserver&&(w.current.resizeObserver.disconnect(),w.current.resizeObserver=null)}function F(){w.current.element&&(w.current.resizeObserver=new f(I),w.current.resizeObserver.observe(w.current.element),i&&w.current.scrollContainers&&w.current.scrollContainers.forEach(M=>M.addEventListener("scroll",I,{capture:!0,passive:!0})))}const P=M=>{!M||M===w.current.element||(N(),w.current.element=M,w.current.scrollContainers=yc(M),F())};return dp(I,!!i),fp(S),C.useEffect(()=>{N(),F()},[i,I,S]),C.useEffect(()=>N,[]),[P,m,v]}function fp(l){C.useEffect(()=>{const i=l;return window.addEventListener("resize",i),()=>void window.removeEventListener("resize",i)},[l])}function dp(l,i){C.useEffect(()=>{if(i){const a=l;return window.addEventListener("scroll",a,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",a,!0)}},[l,i])}function yc(l){const i=[];if(!l||l===document.body)return i;const{overflow:a,overflowX:c,overflowY:f}=window.getComputedStyle(l);return[a,c,f].some(m=>m==="auto"||m==="scroll")&&i.push(l),[...i,...yc(l.parentElement)]}const pp=["x","y","top","bottom","left","right","width","height"],hp=(l,i)=>pp.every(a=>l[a]===i[a]),mp=C.forwardRef(function({children:i,fallback:a,resize:c,style:f,gl:m,events:d=bd,eventSource:w,eventPrefix:g,shadows:x,linear:p,flat:v,legacy:S,orthographic:I,frameloop:N,dpr:F,performance:P,raycaster:M,camera:k,scene:B,onPointerMissed:J,onCreated:Y,...Z},le){C.useMemo(()=>xa(Hf),[]);const G=up(),[U,W]=cp({scroll:!0,debounce:{scroll:50,resize:0},...c}),H=C.useRef(null),$=C.useRef(null);C.useImperativeHandle(le,()=>H.current);const ce=lc(J),[se,xe]=C.useState(!1),[ne,we]=C.useState(!1);if(se)throw se;if(ne)throw ne;const Q=C.useRef(null);ri(()=>{const X=H.current;W.width>0&&W.height>0&&X&&(Q.current||(Q.current=Xd(X)),Q.current.configure({gl:m,events:d,shadows:x,linear:p,flat:v,legacy:S,orthographic:I,frameloop:N,dpr:F,performance:P,raycaster:M,camera:k,scene:B,size:W,onPointerMissed:(...pe)=>ce.current==null?void 0:ce.current(...pe),onCreated:pe=>{pe.events.connect==null||pe.events.connect(w?zd(w)?w.current:w:$.current),g&&pe.setEvents({compute:(me,Se)=>{const Ve=me[g+"X"],tt=me[g+"Y"];Se.pointer.set(Ve/Se.size.width*2-1,-(tt/Se.size.height)*2+1),Se.raycaster.setFromCamera(Se.pointer,Se.camera)}}),Y==null||Y(pe)}}),Q.current.render(T.jsx(G,{children:T.jsx(oc,{set:we,children:T.jsx(C.Suspense,{fallback:T.jsx(Ld,{set:xe}),children:i})})})))}),C.useEffect(()=>{const X=H.current;if(X)return()=>hc(X)},[]);const ae=w?"none":"auto";return T.jsx("div",{ref:$,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ae,...f},...Z,children:T.jsx("div",{ref:U,style:{width:"100%",height:"100%"},children:T.jsx("canvas",{ref:H,style:{display:"block"},children:a})})})}),vp=C.forwardRef(function(i,a){return T.jsx(gc,{children:T.jsx(mp,{...i,ref:a})})});/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/var mt=(l=>(l.LOADING="LOADING",l.IDLE="IDLE",l.PLAYING="PLAYING",l.GAME_OVER="GAME_OVER",l.VICTORY="VICTORY",l))(mt||{}),kr=(l=>(l[l.UP=0]="UP",l[l.DOWN=1]="DOWN",l[l.LEFT=2]="LEFT",l[l.RIGHT=3]="RIGHT",l[l.ANY=4]="ANY",l))(kr||{});const qr={left:"#3b82f6",right:"#ef4444"};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const gp=-30,Xn=0,yp=5,sa=4,cl=.8,or=.5,wc=[-1.5*cl,-.5*cl,.5*cl,1.5*cl],Sc=[.8,1.6,2.4],wp="https://commondatastorage.googleapis.com/codeskulptor-demos/riceracer_assets/music/race2.ogg",xc=140,Sp=60/xc,xp=()=>{const l=[];let i=0;const a=400;for(let c=12;c<a;c++){const f=c*Sp;if(c%4!==0||Math.random()>.6)continue;const m=Math.random()>.5?"left":"right",d=Math.floor(Math.random()*4),w=Math.floor(Math.random()*3),g=kr.ANY;l.push({id:`note-${i++}`,time:f,lineIndex:d,lineLayer:w,type:m,cutDirection:g,requiresGrip:Math.random()>.7})}return l.sort((c,f)=>c.time-f.time)},ju=xp(),_p={[kr.UP]:new Xe(0,1,0),[kr.DOWN]:new Xe(0,-1,0),[kr.LEFT]:new Xe(-1,0,0),[kr.RIGHT]:new Xe(1,0,0),[kr.ANY]:new Xe(0,0,0)};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
*/const Ep=(l,i)=>{const m=(.5-l)*5,d=(1-i)*3.5-3.5/2+.8,w=-Math.max(0,d*.2);return new Xe(m,Math.max(.1,d),w)},Mp=l=>{let i=0;const a=[{tip:8,pip:6},{tip:12,pip:10},{tip:16,pip:14},{tip:20,pip:18}];for(const c of a){const f=l[c.tip],m=l[c.pip];f.y>m.y+.02&&i++}return i===4},Rp=(l,i)=>{const[a,c]=C.useState(!1),[f,m]=C.useState([]),[d,w]=C.useState(null),g=C.useRef({left:null,right:null,lastLeft:null,lastRight:null,leftVelocity:new Xe(0,0,0),rightVelocity:new Xe(0,0,0),leftGripping:!1,rightGripping:!1,lastTimestamp:0}),x=C.useRef(null),p=C.useRef(null),v=C.useRef(0);return C.useEffect(()=>{let S=!0;const I=async()=>{try{const k=await fd.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.14/wasm");if(!S)return;const B=await dd.createFromOptions(k,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/hand_landmarker/hand_landmarker/float16/1/hand_landmarker.task",delegate:"GPU"},runningMode:"VIDEO",numHands:2,minHandDetectionConfidence:.5,minHandPresenceConfidence:.5,minTrackingConfidence:.5});if(!S){B.close();return}p.current=B,await F(),await N()}catch(k){console.error("Error initializing MediaPipe:",k),w(`Failed to load hand tracking: ${k.message}`)}},N=async()=>{try{const B=(await navigator.mediaDevices.enumerateDevices()).filter(J=>J.kind==="videoinput");S&&m(B)}catch(k){console.warn("Could not list cameras",k)}},F=async()=>{try{l.current&&l.current.srcObject&&l.current.srcObject.getTracks().forEach(Y=>Y.stop());const k={video:{width:{ideal:640},height:{ideal:480}}};i?k.video.deviceId={exact:i}:k.video.facingMode="user";const B=await navigator.mediaDevices.getUserMedia(k);l.current&&S&&(l.current.srcObject=B,l.current.onloadeddata=()=>{S&&(c(!0),P())})}catch(k){console.error("Camera Error:",k),w("Could not access camera.")}},P=()=>{if(!l.current||!p.current||!S)return;const k=l.current;if(k.videoWidth>0&&k.videoHeight>0){let B=performance.now();try{const J=p.current.detectForVideo(k,B);x.current=J,M(J)}catch(J){console.warn("Detection failed this frame",J)}}v.current=requestAnimationFrame(P)},M=k=>{const B=performance.now(),J=(B-g.current.lastTimestamp)/1e3;g.current.lastTimestamp=B;let Y=null,Z=null,le=!1,G=!1;if(k.landmarks)for(let H=0;H<k.landmarks.length;H++){const $=k.landmarks[H];if(!k.handedness||!k.handedness[H]||!k.handedness[H][0])continue;const se=k.handedness[H][0].categoryName==="Right",xe=$[8],ne=Ep(xe.x,xe.y),we=Mp($);se?(Z=ne,G=we):(Y=ne,le=we)}const U=g.current,W=.6;Y?(U.left&&(Y.lerpVectors(U.left,Y,W),J>.001&&U.leftVelocity.subVectors(Y,U.left).divideScalar(J)),U.lastLeft=U.left?U.left.clone():Y.clone(),U.left=Y,U.leftGripping=le):(U.left=null,U.leftGripping=!1),Z?(U.right&&(Z.lerpVectors(U.right,Z,W),J>.001&&U.rightVelocity.subVectors(Z,U.right).divideScalar(J)),U.lastRight=U.right?U.right.clone():Z.clone(),U.right=Z,U.rightGripping=G):(U.right=null,U.rightGripping=!1)};return I(),()=>{S=!1,v.current&&cancelAnimationFrame(v.current),p.current&&p.current.close(),l.current&&l.current.srcObject&&l.current.srcObject.getTracks().forEach(B=>B.stop())}},[l,i]),{isCameraReady:a,cameras:f,handPositionsRef:g,lastResultsRef:x,error:d}};function Kr(){return Kr=Object.assign?Object.assign.bind():function(l){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var c in a)({}).hasOwnProperty.call(a,c)&&(l[c]=a[c])}return l},Kr.apply(null,arguments)}const _c=parseInt(Xu.replace(/\D+/g,""));var Vt=Uint8Array,Nr=Uint16Array,ma=Uint32Array,Ec=new Vt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Mc=new Vt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Cp=new Vt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Rc=function(l,i){for(var a=new Nr(31),c=0;c<31;++c)a[c]=i+=1<<l[c-1];for(var f=new ma(a[30]),c=1;c<30;++c)for(var m=a[c];m<a[c+1];++m)f[m]=m-a[c]<<5|c;return[a,f]},Cc=Rc(Ec,2),Ic=Cc[0],Ip=Cc[1];Ic[28]=258,Ip[258]=28;var Pp=Rc(Mc,0),kp=Pp[0],va=new Nr(32768);for(var qe=0;qe<32768;++qe){var Ir=(qe&43690)>>>1|(qe&21845)<<1;Ir=(Ir&52428)>>>2|(Ir&13107)<<2,Ir=(Ir&61680)>>>4|(Ir&3855)<<4,va[qe]=((Ir&65280)>>>8|(Ir&255)<<8)>>>1}var bn=(function(l,i,a){for(var c=l.length,f=0,m=new Nr(i);f<c;++f)++m[l[f]-1];var d=new Nr(i);for(f=0;f<i;++f)d[f]=d[f-1]+m[f-1]<<1;var w;if(a){w=new Nr(1<<i);var g=15-i;for(f=0;f<c;++f)if(l[f])for(var x=f<<4|l[f],p=i-l[f],v=d[l[f]-1]++<<p,S=v|(1<<p)-1;v<=S;++v)w[va[v]>>>g]=x}else for(w=new Nr(c),f=0;f<c;++f)l[f]&&(w[f]=va[d[l[f]-1]++]>>>15-l[f]);return w}),ni=new Vt(288);for(var qe=0;qe<144;++qe)ni[qe]=8;for(var qe=144;qe<256;++qe)ni[qe]=9;for(var qe=256;qe<280;++qe)ni[qe]=7;for(var qe=280;qe<288;++qe)ni[qe]=8;var Pc=new Vt(32);for(var qe=0;qe<32;++qe)Pc[qe]=5;var Tp=bn(ni,9,1),Np=bn(Pc,5,1),ua=function(l){for(var i=l[0],a=1;a<l.length;++a)l[a]>i&&(i=l[a]);return i},Jt=function(l,i,a){var c=i/8|0;return(l[c]|l[c+1]<<8)>>(i&7)&a},ca=function(l,i){var a=i/8|0;return(l[a]|l[a+1]<<8|l[a+2]<<16)>>(i&7)},zp=function(l){return(l/8|0)+(l&7&&1)},Lp=function(l,i,a){(a==null||a>l.length)&&(a=l.length);var c=new(l instanceof Nr?Nr:l instanceof ma?ma:Vt)(a-i);return c.set(l.subarray(i,a)),c},Op=function(l,i,a){var c=l.length;if(!c||a&&!a.l&&c<5)return i||new Vt(0);var f=!i||a,m=!a||a.i;a||(a={}),i||(i=new Vt(c*3));var d=function(Pe){var st=i.length;if(Pe>st){var Yt=new Vt(Math.max(st*2,Pe));Yt.set(i),i=Yt}},w=a.f||0,g=a.p||0,x=a.b||0,p=a.l,v=a.d,S=a.m,I=a.n,N=c*8;do{if(!p){a.f=w=Jt(l,g,1);var F=Jt(l,g+1,3);if(g+=3,F)if(F==1)p=Tp,v=Np,S=9,I=5;else if(F==2){var B=Jt(l,g,31)+257,J=Jt(l,g+10,15)+4,Y=B+Jt(l,g+5,31)+1;g+=14;for(var Z=new Vt(Y),le=new Vt(19),G=0;G<J;++G)le[Cp[G]]=Jt(l,g+G*3,7);g+=J*3;for(var U=ua(le),W=(1<<U)-1,H=bn(le,U,1),G=0;G<Y;){var $=H[Jt(l,g,W)];g+=$&15;var P=$>>>4;if(P<16)Z[G++]=P;else{var ce=0,se=0;for(P==16?(se=3+Jt(l,g,3),g+=2,ce=Z[G-1]):P==17?(se=3+Jt(l,g,7),g+=3):P==18&&(se=11+Jt(l,g,127),g+=7);se--;)Z[G++]=ce}}var xe=Z.subarray(0,B),ne=Z.subarray(B);S=ua(xe),I=ua(ne),p=bn(xe,S,1),v=bn(ne,I,1)}else throw"invalid block type";else{var P=zp(g)+4,M=l[P-4]|l[P-3]<<8,k=P+M;if(k>c){if(m)throw"unexpected EOF";break}f&&d(x+M),i.set(l.subarray(P,k),x),a.b=x+=M,a.p=g=k*8;continue}if(g>N){if(m)throw"unexpected EOF";break}}f&&d(x+131072);for(var we=(1<<S)-1,Q=(1<<I)-1,ae=g;;ae=g){var ce=p[ca(l,g)&we],X=ce>>>4;if(g+=ce&15,g>N){if(m)throw"unexpected EOF";break}if(!ce)throw"invalid length/literal";if(X<256)i[x++]=X;else if(X==256){ae=g,p=null;break}else{var pe=X-254;if(X>264){var G=X-257,me=Ec[G];pe=Jt(l,g,(1<<me)-1)+Ic[G],g+=me}var Se=v[ca(l,g)&Q],Ve=Se>>>4;if(!Se)throw"invalid distance";g+=Se&15;var ne=kp[Ve];if(Ve>3){var me=Mc[Ve];ne+=ca(l,g)&(1<<me)-1,g+=me}if(g>N){if(m)throw"unexpected EOF";break}f&&d(x+131072);for(var tt=x+pe;x<tt;x+=4)i[x]=i[x-ne],i[x+1]=i[x+1-ne],i[x+2]=i[x+2-ne],i[x+3]=i[x+3-ne];x=tt}}a.l=p,a.p=ae,a.b=x,p&&(w=1,a.m=S,a.d=v,a.n=I)}while(!w);return x==i.length?i:Lp(i,0,x)},Ap=new Vt(0),Fp=function(l){if((l[0]&15)!=8||l[0]>>>4>7||(l[0]<<8|l[1])%31)throw"invalid zlib data";if(l[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function fl(l,i){return Op((Fp(l),l.subarray(2,-4)),i)}var jp=typeof TextDecoder<"u"&&new TextDecoder,Dp=0;try{jp.decode(Ap,{stream:!0}),Dp=1}catch{}const Up=l=>l&&l.isCubeTexture;class Bp extends ya{constructor(i,a){var c,f;const m=Up(i),w=((f=m?(c=i.image[0])==null?void 0:c.width:i.image.width)!=null?f:1024)/4,g=Math.floor(Math.log2(w)),x=Math.pow(2,g),p=3*Math.max(x,112),v=4*x,S=[m?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/p}`,`#define CUBEUV_TEXEL_HEIGHT ${1/v}`,`#define CUBEUV_MAX_MIP ${g}.0`],I=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,N=S.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${_c>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,F={map:{value:i},height:{value:(a==null?void 0:a.height)||15},radius:{value:(a==null?void 0:a.radius)||100}},P=new Gf(1,16),M=new ti({uniforms:F,fragmentShader:N,vertexShader:I,side:qu});super(P,M)}set radius(i){this.material.uniforms.radius.value=i}get radius(){return this.material.uniforms.radius.value}set height(i){this.material.uniforms.height.value=i}get height(){return this.material.uniforms.height.value}}class Hp extends Ku{constructor(i){super(i),this.type=At}parse(i){const d=function(G,U){switch(G){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(U||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(U||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(U||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(U||""))}},v=function(G,U,W){U=U||1024;let $=G.pos,ce=-1,se=0,xe="",ne=String.fromCharCode.apply(null,new Uint16Array(G.subarray($,$+128)));for(;0>(ce=ne.indexOf(`
`))&&se<U&&$<G.byteLength;)xe+=ne,se+=ne.length,$+=128,ne+=String.fromCharCode.apply(null,new Uint16Array(G.subarray($,$+128)));return-1<ce?(G.pos+=se+ce+1,xe+ne.slice(0,ce)):!1},S=function(G){const U=/^#\?(\S+)/,W=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,H=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,$=/^\s*FORMAT=(\S+)\s*$/,ce=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,se={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let xe,ne;for((G.pos>=G.byteLength||!(xe=v(G)))&&d(1,"no header found"),(ne=xe.match(U))||d(3,"bad initial token"),se.valid|=1,se.programtype=ne[1],se.string+=xe+`
`;xe=v(G),xe!==!1;){if(se.string+=xe+`
`,xe.charAt(0)==="#"){se.comments+=xe+`
`;continue}if((ne=xe.match(W))&&(se.gamma=parseFloat(ne[1])),(ne=xe.match(H))&&(se.exposure=parseFloat(ne[1])),(ne=xe.match($))&&(se.valid|=2,se.format=ne[1]),(ne=xe.match(ce))&&(se.valid|=4,se.height=parseInt(ne[1],10),se.width=parseInt(ne[2],10)),se.valid&2&&se.valid&4)break}return se.valid&2||d(3,"missing format specifier"),se.valid&4||d(3,"missing image size specifier"),se},I=function(G,U,W){const H=U;if(H<8||H>32767||G[0]!==2||G[1]!==2||G[2]&128)return new Uint8Array(G);H!==(G[2]<<8|G[3])&&d(3,"wrong scanline width");const $=new Uint8Array(4*U*W);$.length||d(4,"unable to allocate buffer space");let ce=0,se=0;const xe=4*H,ne=new Uint8Array(4),we=new Uint8Array(xe);let Q=W;for(;Q>0&&se<G.byteLength;){se+4>G.byteLength&&d(1),ne[0]=G[se++],ne[1]=G[se++],ne[2]=G[se++],ne[3]=G[se++],(ne[0]!=2||ne[1]!=2||(ne[2]<<8|ne[3])!=H)&&d(3,"bad rgbe scanline format");let ae=0,X;for(;ae<xe&&se<G.byteLength;){X=G[se++];const me=X>128;if(me&&(X-=128),(X===0||ae+X>xe)&&d(3,"bad scanline data"),me){const Se=G[se++];for(let Ve=0;Ve<X;Ve++)we[ae++]=Se}else we.set(G.subarray(se,se+X),ae),ae+=X,se+=X}const pe=H;for(let me=0;me<pe;me++){let Se=0;$[ce]=we[me+Se],Se+=H,$[ce+1]=we[me+Se],Se+=H,$[ce+2]=we[me+Se],Se+=H,$[ce+3]=we[me+Se],ce+=4}Q--}return $},N=function(G,U,W,H){const $=G[U+3],ce=Math.pow(2,$-128)/255;W[H+0]=G[U+0]*ce,W[H+1]=G[U+1]*ce,W[H+2]=G[U+2]*ce,W[H+3]=1},F=function(G,U,W,H){const $=G[U+3],ce=Math.pow(2,$-128)/255;W[H+0]=gn.toHalfFloat(Math.min(G[U+0]*ce,65504)),W[H+1]=gn.toHalfFloat(Math.min(G[U+1]*ce,65504)),W[H+2]=gn.toHalfFloat(Math.min(G[U+2]*ce,65504)),W[H+3]=gn.toHalfFloat(1)},P=new Uint8Array(i);P.pos=0;const M=S(P),k=M.width,B=M.height,J=I(P.subarray(P.pos),k,B);let Y,Z,le;switch(this.type){case ar:le=J.length/4;const G=new Float32Array(le*4);for(let W=0;W<le;W++)N(J,W*4,G,W*4);Y=G,Z=ar;break;case At:le=J.length/4;const U=new Uint16Array(le*4);for(let W=0;W<le;W++)F(J,W*4,U,W*4);Y=U,Z=At;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:k,height:B,data:Y,header:M.string,gamma:M.gamma,exposure:M.exposure,type:Z}}setDataType(i){return this.type=i,this}load(i,a,c,f){function m(d,w){switch(d.type){case ar:case At:"colorSpace"in d?d.colorSpace="srgb-linear":d.encoding=3e3,d.minFilter=Qt,d.magFilter=Qt,d.generateMipmaps=!1,d.flipY=!0;break}a&&a(d,w)}return super.load(i,m,c,f)}}const qn=_c>=152;class Gp extends Ku{constructor(i){super(i),this.type=At}parse(i){const U=Math.pow(2.7182818,2.2);function W(u,h){for(var _=0,L=0;L<65536;++L)(L==0||u[L>>3]&1<<(L&7))&&(h[_++]=L);for(var A=_-1;_<65536;)h[_++]=0;return A}function H(u){for(var h=0;h<16384;h++)u[h]={},u[h].len=0,u[h].lit=0,u[h].p=null}const $={l:0,c:0,lc:0};function ce(u,h,_,L,A){for(;_<u;)h=h<<8|si(L,A),_+=8;_-=u,$.l=h>>_&(1<<u)-1,$.c=h,$.lc=_}const se=new Array(59);function xe(u){for(var h=0;h<=58;++h)se[h]=0;for(var h=0;h<65537;++h)se[u[h]]+=1;for(var _=0,h=58;h>0;--h){var L=_+se[h]>>1;se[h]=_,_=L}for(var h=0;h<65537;++h){var A=u[h];A>0&&(u[h]=A|se[A]++<<6)}}function ne(u,h,_,L,A,j,q){for(var V=_,te=0,ee=0;A<=j;A++){if(V.value-_.value>L)return!1;ce(6,te,ee,u,V);var re=$.l;if(te=$.c,ee=$.lc,q[A]=re,re==63){if(V.value-_.value>L)throw"Something wrong with hufUnpackEncTable";ce(8,te,ee,u,V);var b=$.l+6;if(te=$.c,ee=$.lc,A+b>j+1)throw"Something wrong with hufUnpackEncTable";for(;b--;)q[A++]=0;A--}else if(re>=59){var b=re-59+2;if(A+b>j+1)throw"Something wrong with hufUnpackEncTable";for(;b--;)q[A++]=0;A--}}xe(q)}function we(u){return u&63}function Q(u){return u>>6}function ae(u,h,_,L){for(;h<=_;h++){var A=Q(u[h]),j=we(u[h]);if(A>>j)throw"Invalid table entry";if(j>14){var q=L[A>>j-14];if(q.len)throw"Invalid table entry";if(q.lit++,q.p){var V=q.p;q.p=new Array(q.lit);for(var te=0;te<q.lit-1;++te)q.p[te]=V[te]}else q.p=new Array(1);q.p[q.lit-1]=h}else if(j)for(var ee=0,te=1<<14-j;te>0;te--){var q=L[(A<<14-j)+ee];if(q.len||q.p)throw"Invalid table entry";q.len=j,q.lit=h,ee++}}return!0}const X={c:0,lc:0};function pe(u,h,_,L){u=u<<8|si(_,L),h+=8,X.c=u,X.lc=h}const me={c:0,lc:0};function Se(u,h,_,L,A,j,q,V,te,ee){if(u==h){L<8&&(pe(_,L,A,q),_=X.c,L=X.lc),L-=8;var re=_>>L,re=new Uint8Array([re])[0];if(te.value+re>ee)return!1;for(var b=V[te.value-1];re-- >0;)V[te.value++]=b}else if(te.value<ee)V[te.value++]=u;else return!1;me.c=_,me.lc=L}function Ve(u){return u&65535}function tt(u){var h=Ve(u);return h>32767?h-65536:h}const Pe={a:0,b:0};function st(u,h){var _=tt(u),L=tt(h),A=L,j=_+(A&1)+(A>>1),q=j,V=j-A;Pe.a=q,Pe.b=V}function Yt(u,h){var _=Ve(u),L=Ve(h),A=_-(L>>1)&65535,j=L+A-32768&65535;Pe.a=j,Pe.b=A}function En(u,h,_,L,A,j,q){for(var V=q<16384,te=_>A?A:_,ee=1,re;ee<=te;)ee<<=1;for(ee>>=1,re=ee,ee>>=1;ee>=1;){for(var b=0,He=b+j*(A-re),de=j*ee,ve=j*re,Ee=L*ee,Ce=L*re,Ae,Le,_e,Ie;b<=He;b+=ve){for(var Oe=b,We=b+L*(_-re);Oe<=We;Oe+=Ce){var ke=Oe+Ee,Qe=Oe+de,yt=Qe+Ee;V?(st(u[Oe+h],u[Qe+h]),Ae=Pe.a,_e=Pe.b,st(u[ke+h],u[yt+h]),Le=Pe.a,Ie=Pe.b,st(Ae,Le),u[Oe+h]=Pe.a,u[ke+h]=Pe.b,st(_e,Ie),u[Qe+h]=Pe.a,u[yt+h]=Pe.b):(Yt(u[Oe+h],u[Qe+h]),Ae=Pe.a,_e=Pe.b,Yt(u[ke+h],u[yt+h]),Le=Pe.a,Ie=Pe.b,Yt(Ae,Le),u[Oe+h]=Pe.a,u[ke+h]=Pe.b,Yt(_e,Ie),u[Qe+h]=Pe.a,u[yt+h]=Pe.b)}if(_&ee){var Qe=Oe+de;V?st(u[Oe+h],u[Qe+h]):Yt(u[Oe+h],u[Qe+h]),Ae=Pe.a,u[Qe+h]=Pe.b,u[Oe+h]=Ae}}if(A&ee)for(var Oe=b,We=b+L*(_-re);Oe<=We;Oe+=Ce){var ke=Oe+Ee;V?st(u[Oe+h],u[ke+h]):Yt(u[Oe+h],u[ke+h]),Ae=Pe.a,u[ke+h]=Pe.b,u[Oe+h]=Ae}re=ee,ee>>=1}return b}function br(u,h,_,L,A,j,q,V,te,ee){for(var re=0,b=0,He=V,de=Math.trunc(A.value+(j+7)/8);A.value<de;)for(pe(re,b,_,A),re=X.c,b=X.lc;b>=14;){var ve=re>>b-14&16383,Ee=h[ve];if(Ee.len)b-=Ee.len,Se(Ee.lit,q,re,b,_,L,A,te,ee,He),re=me.c,b=me.lc;else{if(!Ee.p)throw"hufDecode issues";var Ce;for(Ce=0;Ce<Ee.lit;Ce++){for(var Ae=we(u[Ee.p[Ce]]);b<Ae&&A.value<de;)pe(re,b,_,A),re=X.c,b=X.lc;if(b>=Ae&&Q(u[Ee.p[Ce]])==(re>>b-Ae&(1<<Ae)-1)){b-=Ae,Se(Ee.p[Ce],q,re,b,_,L,A,te,ee,He),re=me.c,b=me.lc;break}}if(Ce==Ee.lit)throw"hufDecode issues"}}var Le=8-j&7;for(re>>=Le,b-=Le;b>0;){var Ee=h[re<<14-b&16383];if(Ee.len)b-=Ee.len,Se(Ee.lit,q,re,b,_,L,A,te,ee,He),re=me.c,b=me.lc;else throw"hufDecode issues"}return!0}function It(u,h,_,L,A,j){var q={value:0},V=_.value,te=gt(h,_),ee=gt(h,_);_.value+=4;var re=gt(h,_);if(_.value+=4,te<0||te>=65537||ee<0||ee>=65537)throw"Something wrong with HUF_ENCSIZE";var b=new Array(65537),He=new Array(16384);H(He);var de=L-(_.value-V);if(ne(u,h,_,de,te,ee,b),re>8*(L-(_.value-V)))throw"Something wrong with hufUncompress";ae(b,te,ee,He),br(b,He,u,h,_,re,ee,j,A,q)}function $r(u,h,_){for(var L=0;L<_;++L)h[L]=u[h[L]]}function vt(u){for(var h=1;h<u.length;h++){var _=u[h-1]+u[h]-128;u[h]=_}}function ii(u,h){for(var _=0,L=Math.floor((u.length+1)/2),A=0,j=u.length-1;!(A>j||(h[A++]=u[_++],A>j));)h[A++]=u[L++]}function li(u){for(var h=u.byteLength,_=new Array,L=0,A=new DataView(u);h>0;){var j=A.getInt8(L++);if(j<0){var q=-j;h-=q+1;for(var V=0;V<q;V++)_.push(A.getUint8(L++))}else{var q=j;h-=2;for(var te=A.getUint8(L++),V=0;V<q+1;V++)_.push(te)}}return _}function xl(u,h,_,L,A,j){var ke=new DataView(j.buffer),q=_[u.idx[0]].width,V=_[u.idx[0]].height,te=3,ee=Math.floor(q/8),re=Math.ceil(q/8),b=Math.ceil(V/8),He=q-(re-1)*8,de=V-(b-1)*8,ve={value:0},Ee=new Array(te),Ce=new Array(te),Ae=new Array(te),Le=new Array(te),_e=new Array(te);for(let Be=0;Be<te;++Be)_e[Be]=h[u.idx[Be]],Ee[Be]=Be<1?0:Ee[Be-1]+re*b,Ce[Be]=new Float32Array(64),Ae[Be]=new Uint16Array(64),Le[Be]=new Uint16Array(re*64);for(let Be=0;Be<b;++Be){var Ie=8;Be==b-1&&(Ie=de);var Oe=8;for(let Ge=0;Ge<re;++Ge){Ge==re-1&&(Oe=He);for(let Fe=0;Fe<te;++Fe)Ae[Fe].fill(0),Ae[Fe][0]=A[Ee[Fe]++],_l(ve,L,Ae[Fe]),El(Ae[Fe],Ce[Fe]),Ml(Ce[Fe]);zr(Ce);for(let Fe=0;Fe<te;++Fe)Rl(Ce[Fe],Le[Fe],Ge*64)}let ot=0;for(let Ge=0;Ge<te;++Ge){const Fe=_[u.idx[Ge]].type;for(let Ke=8*Be;Ke<8*Be+Ie;++Ke){ot=_e[Ge][Ke];for(let ur=0;ur<ee;++ur){const Mt=ur*64+(Ke&7)*8;ke.setUint16(ot+0*Fe,Le[Ge][Mt+0],!0),ke.setUint16(ot+2*Fe,Le[Ge][Mt+1],!0),ke.setUint16(ot+4*Fe,Le[Ge][Mt+2],!0),ke.setUint16(ot+6*Fe,Le[Ge][Mt+3],!0),ke.setUint16(ot+8*Fe,Le[Ge][Mt+4],!0),ke.setUint16(ot+10*Fe,Le[Ge][Mt+5],!0),ke.setUint16(ot+12*Fe,Le[Ge][Mt+6],!0),ke.setUint16(ot+14*Fe,Le[Ge][Mt+7],!0),ot+=16*Fe}}if(ee!=re)for(let Ke=8*Be;Ke<8*Be+Ie;++Ke){const ur=_e[Ge][Ke]+8*ee*2*Fe,Mt=ee*64+(Ke&7)*8;for(let bt=0;bt<Oe;++bt)ke.setUint16(ur+bt*2*Fe,Le[Ge][Mt+bt],!0)}}}for(var We=new Uint16Array(q),ke=new DataView(j.buffer),Qe=0;Qe<te;++Qe){_[u.idx[Qe]].decoded=!0;var yt=_[u.idx[Qe]].type;if(_[Qe].type==2)for(var nt=0;nt<V;++nt){const Be=_e[Qe][nt];for(var pt=0;pt<q;++pt)We[pt]=ke.getUint16(Be+pt*2*yt,!0);for(var pt=0;pt<q;++pt)ke.setFloat32(Be+pt*2*yt,ue(We[pt]),!0)}}}function _l(u,h,_){for(var L,A=1;A<64;)L=h[u.value],L==65280?A=64:L>>8==255?A+=L&255:(_[A]=L,A++),u.value++}function El(u,h){h[0]=ue(u[0]),h[1]=ue(u[1]),h[2]=ue(u[5]),h[3]=ue(u[6]),h[4]=ue(u[14]),h[5]=ue(u[15]),h[6]=ue(u[27]),h[7]=ue(u[28]),h[8]=ue(u[2]),h[9]=ue(u[4]),h[10]=ue(u[7]),h[11]=ue(u[13]),h[12]=ue(u[16]),h[13]=ue(u[26]),h[14]=ue(u[29]),h[15]=ue(u[42]),h[16]=ue(u[3]),h[17]=ue(u[8]),h[18]=ue(u[12]),h[19]=ue(u[17]),h[20]=ue(u[25]),h[21]=ue(u[30]),h[22]=ue(u[41]),h[23]=ue(u[43]),h[24]=ue(u[9]),h[25]=ue(u[11]),h[26]=ue(u[18]),h[27]=ue(u[24]),h[28]=ue(u[31]),h[29]=ue(u[40]),h[30]=ue(u[44]),h[31]=ue(u[53]),h[32]=ue(u[10]),h[33]=ue(u[19]),h[34]=ue(u[23]),h[35]=ue(u[32]),h[36]=ue(u[39]),h[37]=ue(u[45]),h[38]=ue(u[52]),h[39]=ue(u[54]),h[40]=ue(u[20]),h[41]=ue(u[22]),h[42]=ue(u[33]),h[43]=ue(u[38]),h[44]=ue(u[46]),h[45]=ue(u[51]),h[46]=ue(u[55]),h[47]=ue(u[60]),h[48]=ue(u[21]),h[49]=ue(u[34]),h[50]=ue(u[37]),h[51]=ue(u[47]),h[52]=ue(u[50]),h[53]=ue(u[56]),h[54]=ue(u[59]),h[55]=ue(u[61]),h[56]=ue(u[35]),h[57]=ue(u[36]),h[58]=ue(u[48]),h[59]=ue(u[49]),h[60]=ue(u[57]),h[61]=ue(u[58]),h[62]=ue(u[62]),h[63]=ue(u[63])}function Ml(u){const h=.5*Math.cos(.7853975),_=.5*Math.cos(3.14159/16),L=.5*Math.cos(3.14159/8),A=.5*Math.cos(3*3.14159/16),j=.5*Math.cos(5*3.14159/16),q=.5*Math.cos(3*3.14159/8),V=.5*Math.cos(7*3.14159/16);for(var te=new Array(4),ee=new Array(4),re=new Array(4),b=new Array(4),He=0;He<8;++He){var de=He*8;te[0]=L*u[de+2],te[1]=q*u[de+2],te[2]=L*u[de+6],te[3]=q*u[de+6],ee[0]=_*u[de+1]+A*u[de+3]+j*u[de+5]+V*u[de+7],ee[1]=A*u[de+1]-V*u[de+3]-_*u[de+5]-j*u[de+7],ee[2]=j*u[de+1]-_*u[de+3]+V*u[de+5]+A*u[de+7],ee[3]=V*u[de+1]-j*u[de+3]+A*u[de+5]-_*u[de+7],re[0]=h*(u[de+0]+u[de+4]),re[3]=h*(u[de+0]-u[de+4]),re[1]=te[0]+te[3],re[2]=te[1]-te[2],b[0]=re[0]+re[1],b[1]=re[3]+re[2],b[2]=re[3]-re[2],b[3]=re[0]-re[1],u[de+0]=b[0]+ee[0],u[de+1]=b[1]+ee[1],u[de+2]=b[2]+ee[2],u[de+3]=b[3]+ee[3],u[de+4]=b[3]-ee[3],u[de+5]=b[2]-ee[2],u[de+6]=b[1]-ee[1],u[de+7]=b[0]-ee[0]}for(var ve=0;ve<8;++ve)te[0]=L*u[16+ve],te[1]=q*u[16+ve],te[2]=L*u[48+ve],te[3]=q*u[48+ve],ee[0]=_*u[8+ve]+A*u[24+ve]+j*u[40+ve]+V*u[56+ve],ee[1]=A*u[8+ve]-V*u[24+ve]-_*u[40+ve]-j*u[56+ve],ee[2]=j*u[8+ve]-_*u[24+ve]+V*u[40+ve]+A*u[56+ve],ee[3]=V*u[8+ve]-j*u[24+ve]+A*u[40+ve]-_*u[56+ve],re[0]=h*(u[ve]+u[32+ve]),re[3]=h*(u[ve]-u[32+ve]),re[1]=te[0]+te[3],re[2]=te[1]-te[2],b[0]=re[0]+re[1],b[1]=re[3]+re[2],b[2]=re[3]-re[2],b[3]=re[0]-re[1],u[0+ve]=b[0]+ee[0],u[8+ve]=b[1]+ee[1],u[16+ve]=b[2]+ee[2],u[24+ve]=b[3]+ee[3],u[32+ve]=b[3]-ee[3],u[40+ve]=b[2]-ee[2],u[48+ve]=b[1]-ee[1],u[56+ve]=b[0]-ee[0]}function zr(u){for(var h=0;h<64;++h){var _=u[0][h],L=u[1][h],A=u[2][h];u[0][h]=_+1.5747*A,u[1][h]=_-.1873*L-.4682*A,u[2][h]=_+1.8556*L}}function Rl(u,h,_){for(var L=0;L<64;++L)h[_+L]=gn.toHalfFloat(Cl(u[L]))}function Cl(u){return u<=1?Math.sign(u)*Math.pow(Math.abs(u),2.2):Math.sign(u)*Math.pow(U,Math.abs(u)-1)}function oi(u){return new DataView(u.array.buffer,u.offset.value,u.size)}function Lr(u){var h=u.viewer.buffer.slice(u.offset.value,u.offset.value+u.size),_=new Uint8Array(li(h)),L=new Uint8Array(_.length);return vt(_),ii(_,L),new DataView(L.buffer)}function Mn(u){var h=u.array.slice(u.offset.value,u.offset.value+u.size),_=fl(h),L=new Uint8Array(_.length);return vt(_),ii(_,L),new DataView(L.buffer)}function Il(u){for(var h=u.viewer,_={value:u.offset.value},L=new Uint16Array(u.width*u.scanlineBlockSize*(u.channels*u.type)),A=new Uint8Array(8192),j=0,q=new Array(u.channels),V=0;V<u.channels;V++)q[V]={},q[V].start=j,q[V].end=q[V].start,q[V].nx=u.width,q[V].ny=u.lines,q[V].size=u.type,j+=q[V].nx*q[V].ny*q[V].size;var te=Ar(h,_),ee=Ar(h,_);if(ee>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(te<=ee)for(var V=0;V<ee-te+1;V++)A[V+te]=gr(h,_);var re=new Uint16Array(65536),b=W(A,re),He=gt(h,_);It(u.array,h,_,He,L,j);for(var V=0;V<u.channels;++V)for(var de=q[V],ve=0;ve<q[V].size;++ve)En(L,de.start+ve,de.nx,de.size,de.ny,de.nx*de.size,b);$r(re,L,j);for(var Ee=0,Ce=new Uint8Array(L.buffer.byteLength),Ae=0;Ae<u.lines;Ae++)for(var Le=0;Le<u.channels;Le++){var de=q[Le],_e=de.nx*de.size,Ie=new Uint8Array(L.buffer,de.end*2,_e*2);Ce.set(Ie,Ee),Ee+=_e*2,de.end+=_e}return new DataView(Ce.buffer)}function Pl(u){var h=u.array.slice(u.offset.value,u.offset.value+u.size),_=fl(h);const L=u.lines*u.channels*u.width,A=u.type==1?new Uint16Array(L):new Uint32Array(L);let j=0,q=0;const V=new Array(4);for(let te=0;te<u.lines;te++)for(let ee=0;ee<u.channels;ee++){let re=0;switch(u.type){case 1:V[0]=j,V[1]=V[0]+u.width,j=V[1]+u.width;for(let b=0;b<u.width;++b){const He=_[V[0]++]<<8|_[V[1]++];re+=He,A[q]=re,q++}break;case 2:V[0]=j,V[1]=V[0]+u.width,V[2]=V[1]+u.width,j=V[2]+u.width;for(let b=0;b<u.width;++b){const He=_[V[0]++]<<24|_[V[1]++]<<16|_[V[2]++]<<8;re+=He,A[q]=re,q++}break}}return new DataView(A.buffer)}function ai(u){var h=u.viewer,_={value:u.offset.value},L=new Uint8Array(u.width*u.lines*(u.channels*u.type*2)),A={version:Et(h,_),unknownUncompressedSize:Et(h,_),unknownCompressedSize:Et(h,_),acCompressedSize:Et(h,_),dcCompressedSize:Et(h,_),rleCompressedSize:Et(h,_),rleUncompressedSize:Et(h,_),rleRawSize:Et(h,_),totalAcUncompressedCount:Et(h,_),totalDcUncompressedCount:Et(h,_),acCompression:Et(h,_)};if(A.version<2)throw"EXRLoader.parse: "+Xt.compression+" version "+A.version+" is unsupported";for(var j=new Array,q=Ar(h,_)-2;q>0;){var V=en(h.buffer,_),te=gr(h,_),ee=te>>2&3,re=(te>>4)-1,b=new Int8Array([re])[0],He=gr(h,_);j.push({name:V,index:b,type:He,compression:ee}),q-=V.length+3}for(var de=Xt.channels,ve=new Array(u.channels),Ee=0;Ee<u.channels;++Ee){var Ce=ve[Ee]={},Ae=de[Ee];Ce.name=Ae.name,Ce.compression=0,Ce.decoded=!1,Ce.type=Ae.pixelType,Ce.pLinear=Ae.pLinear,Ce.width=u.width,Ce.height=u.lines}for(var Le={idx:new Array(3)},_e=0;_e<u.channels;++_e)for(var Ce=ve[_e],Ee=0;Ee<j.length;++Ee){var Ie=j[Ee];Ce.name==Ie.name&&(Ce.compression=Ie.compression,Ie.index>=0&&(Le.idx[Ie.index]=_e),Ce.offset=_e)}if(A.acCompressedSize>0)switch(A.acCompression){case 0:var ke=new Uint16Array(A.totalAcUncompressedCount);It(u.array,h,_,A.acCompressedSize,ke,A.totalAcUncompressedCount);break;case 1:var Oe=u.array.slice(_.value,_.value+A.totalAcUncompressedCount),We=fl(Oe),ke=new Uint16Array(We.buffer);_.value+=A.totalAcUncompressedCount;break}if(A.dcCompressedSize>0){var Qe={array:u.array,offset:_,size:A.dcCompressedSize},yt=new Uint16Array(Mn(Qe).buffer);_.value+=A.dcCompressedSize}if(A.rleRawSize>0){var Oe=u.array.slice(_.value,_.value+A.rleCompressedSize),We=fl(Oe),nt=li(We.buffer);_.value+=A.rleCompressedSize}for(var pt=0,Be=new Array(ve.length),Ee=0;Ee<Be.length;++Ee)Be[Ee]=new Array;for(var ot=0;ot<u.lines;++ot)for(var Ge=0;Ge<ve.length;++Ge)Be[Ge].push(pt),pt+=ve[Ge].width*u.type*2;xl(Le,Be,ve,ke,yt,L);for(var Ee=0;Ee<ve.length;++Ee){var Ce=ve[Ee];if(!Ce.decoded)switch(Ce.compression){case 2:for(var Fe=0,Ke=0,ot=0;ot<u.lines;++ot){for(var ur=Be[Ee][Fe],Mt=0;Mt<Ce.width;++Mt){for(var bt=0;bt<2*Ce.type;++bt)L[ur++]=nt[Ke+bt*Ce.width*Ce.height];Ke++}Fe++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(L.buffer)}function en(u,h){for(var _=new Uint8Array(u),L=0;_[h.value+L]!=0;)L+=1;var A=new TextDecoder().decode(_.slice(h.value,h.value+L));return h.value=h.value+L+1,A}function kl(u,h,_){var L=new TextDecoder().decode(new Uint8Array(u).slice(h.value,h.value+_));return h.value=h.value+_,L}function Tl(u,h){var _=Or(u,h),L=gt(u,h);return[_,L]}function Nl(u,h){var _=gt(u,h),L=gt(u,h);return[_,L]}function Or(u,h){var _=u.getInt32(h.value,!0);return h.value=h.value+4,_}function gt(u,h){var _=u.getUint32(h.value,!0);return h.value=h.value+4,_}function si(u,h){var _=u[h.value];return h.value=h.value+1,_}function gr(u,h){var _=u.getUint8(h.value);return h.value=h.value+1,_}const Et=function(u,h){let _;return"getBigInt64"in DataView.prototype?_=Number(u.getBigInt64(h.value,!0)):_=u.getUint32(h.value+4,!0)+Number(u.getUint32(h.value,!0)<<32),h.value+=8,_};function ut(u,h){var _=u.getFloat32(h.value,!0);return h.value+=4,_}function zl(u,h){return gn.toHalfFloat(ut(u,h))}function ue(u){var h=(u&31744)>>10,_=u&1023;return(u>>15?-1:1)*(h?h===31?_?NaN:1/0:Math.pow(2,h-15)*(1+_/1024):6103515625e-14*(_/1024))}function Ar(u,h){var _=u.getUint16(h.value,!0);return h.value+=2,_}function Ll(u,h){return ue(Ar(u,h))}function Ol(u,h,_,L){for(var A=_.value,j=[];_.value<A+L-1;){var q=en(h,_),V=Or(u,_),te=gr(u,_);_.value+=3;var ee=Or(u,_),re=Or(u,_);j.push({name:q,pixelType:V,pLinear:te,xSampling:ee,ySampling:re})}return _.value+=1,j}function ui(u,h){var _=ut(u,h),L=ut(u,h),A=ut(u,h),j=ut(u,h),q=ut(u,h),V=ut(u,h),te=ut(u,h),ee=ut(u,h);return{redX:_,redY:L,greenX:A,greenY:j,blueX:q,blueY:V,whiteX:te,whiteY:ee}}function ci(u,h){var _=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],L=gr(u,h);return _[L]}function Al(u,h){var _=gt(u,h),L=gt(u,h),A=gt(u,h),j=gt(u,h);return{xMin:_,yMin:L,xMax:A,yMax:j}}function fi(u,h){var _=["INCREASING_Y"],L=gr(u,h);return _[L]}function di(u,h){var _=ut(u,h),L=ut(u,h);return[_,L]}function pi(u,h){var _=ut(u,h),L=ut(u,h),A=ut(u,h);return[_,L,A]}function Fl(u,h,_,L,A){if(L==="string"||L==="stringvector"||L==="iccProfile")return kl(h,_,A);if(L==="chlist")return Ol(u,h,_,A);if(L==="chromaticities")return ui(u,_);if(L==="compression")return ci(u,_);if(L==="box2i")return Al(u,_);if(L==="lineOrder")return fi(u,_);if(L==="float")return ut(u,_);if(L==="v2f")return di(u,_);if(L==="v3f")return pi(u,_);if(L==="int")return Or(u,_);if(L==="rational")return Tl(u,_);if(L==="timecode")return Nl(u,_);if(L==="preview")return _.value+=A,"skipped";_.value+=A}function jl(u,h,_){const L={};if(u.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";L.version=u.getUint8(4);const A=u.getUint8(5);L.spec={singleTile:!!(A&2),longName:!!(A&4),deepFormat:!!(A&8),multiPart:!!(A&16)},_.value=8;for(var j=!0;j;){var q=en(h,_);if(q==0)j=!1;else{var V=en(h,_),te=gt(u,_),ee=Fl(u,h,_,V,te);ee===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${V}'.`):L[q]=ee}}if((A&-5)!=0)throw console.error("EXRHeader:",L),"THREE.EXRLoader: provided file is currently unsupported.";return L}function Dl(u,h,_,L,A){const j={size:0,viewer:h,array:_,offset:L,width:u.dataWindow.xMax-u.dataWindow.xMin+1,height:u.dataWindow.yMax-u.dataWindow.yMin+1,channels:u.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:u.channels[0].pixelType,uncompress:null,getter:null,format:null,[qn?"colorSpace":"encoding"]:null};switch(u.compression){case"NO_COMPRESSION":j.lines=1,j.uncompress=oi;break;case"RLE_COMPRESSION":j.lines=1,j.uncompress=Lr;break;case"ZIPS_COMPRESSION":j.lines=1,j.uncompress=Mn;break;case"ZIP_COMPRESSION":j.lines=16,j.uncompress=Mn;break;case"PIZ_COMPRESSION":j.lines=32,j.uncompress=Il;break;case"PXR24_COMPRESSION":j.lines=16,j.uncompress=Pl;break;case"DWAA_COMPRESSION":j.lines=32,j.uncompress=ai;break;case"DWAB_COMPRESSION":j.lines=256,j.uncompress=ai;break;default:throw"EXRLoader.parse: "+u.compression+" is unsupported"}if(j.scanlineBlockSize=j.lines,j.type==1)switch(A){case ar:j.getter=Ll,j.inputSize=2;break;case At:j.getter=Ar,j.inputSize=2;break}else if(j.type==2)switch(A){case ar:j.getter=ut,j.inputSize=4;break;case At:j.getter=zl,j.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+j.type+" for "+u.compression+".";j.blockCount=(u.dataWindow.yMax+1)/j.scanlineBlockSize;for(var q=0;q<j.blockCount;q++)Et(h,L);j.outputChannels=j.channels==3?4:j.channels;const V=j.width*j.height*j.outputChannels;switch(A){case ar:j.byteArray=new Float32Array(V),j.channels<j.outputChannels&&j.byteArray.fill(1,0,V);break;case At:j.byteArray=new Uint16Array(V),j.channels<j.outputChannels&&j.byteArray.fill(15360,0,V);break;default:console.error("THREE.EXRLoader: unsupported type: ",A);break}return j.bytesPerLine=j.width*j.inputSize*j.channels,j.outputChannels==4?j.format=Sn:j.format=Wf,qn?j.colorSpace="srgb-linear":j.encoding=3e3,j}const Fr=new DataView(i),Rn=new Uint8Array(i),jr={value:0},Xt=jl(Fr,i,jr),ze=Dl(Xt,Fr,Rn,jr,this.type),hi={value:0},Ul={R:0,G:1,B:2,A:3,Y:0};for(let u=0;u<ze.height/ze.scanlineBlockSize;u++){const h=gt(Fr,jr);ze.size=gt(Fr,jr),ze.lines=h+ze.scanlineBlockSize>ze.height?ze.height-h:ze.scanlineBlockSize;const L=ze.size<ze.lines*ze.bytesPerLine?ze.uncompress(ze):oi(ze);jr.value+=ze.size;for(let A=0;A<ze.scanlineBlockSize;A++){const j=A+u*ze.scanlineBlockSize;if(j>=ze.height)break;for(let q=0;q<ze.channels;q++){const V=Ul[Xt.channels[q].name];for(let te=0;te<ze.width;te++){hi.value=(A*(ze.channels*ze.width)+q*ze.width+te)*ze.inputSize;const ee=(ze.height-1-j)*(ze.width*ze.outputChannels)+te*ze.outputChannels+V;ze.byteArray[ee]=ze.getter(L,hi)}}}}return{header:Xt,width:ze.width,height:ze.height,data:ze.byteArray,format:ze.format,[qn?"colorSpace":"encoding"]:ze[qn?"colorSpace":"encoding"],type:this.type}}setDataType(i){return this.type=i,this}load(i,a,c,f){function m(d,w){qn?d.colorSpace=w.colorSpace:d.encoding=w.encoding,d.minFilter=Qt,d.magFilter=Qt,d.generateMipmaps=!1,d.flipY=!1,a&&a(d,w)}return super.load(i,m,c,f)}}function Wp(l,i,a,c){const f=class extends ti{constructor(d={}){const w=Object.entries(l);super({uniforms:w.reduce((g,[x,p])=>{const v=Zf.clone({[x]:{value:p}});return{...g,...v}},{}),vertexShader:i,fragmentShader:a}),this.key="",w.forEach(([g])=>Object.defineProperty(this,g,{get:()=>this.uniforms[g].value,set:x=>this.uniforms[g].value=x})),Object.assign(this,d)}};return f.key=Zt.generateUUID(),f}const Zp=()=>parseInt(Xu.replace(/\D+/g,"")),kc=Zp();function Vp(l,i,a){const c=sr(S=>S.size),f=sr(S=>S.viewport),m=typeof l=="number"?l:c.width*f.dpr,d=c.height*f.dpr,w=(typeof l=="number"?a:l)||{},{samples:g=0,depth:x,...p}=w,v=C.useMemo(()=>{const S=new wa(m,d,{minFilter:Qt,magFilter:Qt,type:At,...p});return x&&(S.depthTexture=new Vf(m,d,ar)),S.samples=g,S},[]);return C.useLayoutEffect(()=>{v.setSize(m,d),g&&(v.samples=g)},[g,v,m,d]),C.useEffect(()=>()=>v.dispose(),[]),v}const Qp=l=>typeof l=="function",Yp=C.forwardRef(({envMap:l,resolution:i=256,frames:a=1/0,makeDefault:c,children:f,...m},d)=>{const w=sr(({set:P})=>P),g=sr(({camera:P})=>P),x=sr(({size:P})=>P),p=C.useRef(null);C.useImperativeHandle(d,()=>p.current,[]);const v=C.useRef(null),S=Vp(i);C.useLayoutEffect(()=>{m.manual||(p.current.aspect=x.width/x.height)},[x,m]),C.useLayoutEffect(()=>{p.current.updateProjectionMatrix()});let I=0,N=null;const F=Qp(f);return vr(P=>{F&&(a===1/0||I<a)&&(v.current.visible=!1,P.gl.setRenderTarget(S),N=P.scene.background,l&&(P.scene.background=l),P.gl.render(P.scene,p.current),P.scene.background=N,P.gl.setRenderTarget(null),v.current.visible=!0,I++)}),C.useLayoutEffect(()=>{if(c){const P=g;return w(()=>({camera:p.current})),()=>w(()=>({camera:P}))}},[p,c,w]),C.createElement(C.Fragment,null,C.createElement("perspectiveCamera",Kr({ref:p},m),!F&&f),C.createElement("group",{ref:v},F&&f(S.texture)))}),Xp=Wp({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new gl,sectionColor:new gl,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new Xe,worldPlanePosition:new Xe},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${kc>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),qp=C.forwardRef(({args:l,cellColor:i="#000000",sectionColor:a="#2080ff",cellSize:c=.5,sectionSize:f=1,followCamera:m=!1,infiniteGrid:d=!1,fadeDistance:w=100,fadeStrength:g=1,fadeFrom:x=1,cellThickness:p=.5,sectionThickness:v=1,side:S=Yf,...I},N)=>{xa({GridMaterial:Xp});const F=C.useRef(null);C.useImperativeHandle(N,()=>F.current,[]);const P=new Qf,M=new Xe(0,1,0),k=new Xe(0,0,0);vr(Y=>{P.setFromNormalAndCoplanarPoint(M,k).applyMatrix4(F.current.matrixWorld);const Z=F.current.material,le=Z.uniforms.worldCamProjPosition,G=Z.uniforms.worldPlanePosition;P.projectPoint(Y.camera.position,le.value),G.value.set(0,0,0).applyMatrix4(F.current.matrixWorld)});const B={cellSize:c,sectionSize:f,cellColor:i,sectionColor:a,cellThickness:p,sectionThickness:v},J={fadeDistance:w,fadeStrength:g,fadeFrom:x,infiniteGrid:d,followCamera:m};return C.createElement("mesh",Kr({ref:F,frustumCulled:!1},I),C.createElement("gridMaterial",Kr({transparent:!0,"extensions-derivatives":!0,side:S},B,J)),C.createElement("planeGeometry",{args:l}))}),Kp=3e3,Jp=3001;function Tc(l,i){const a=l+"Geometry";return C.forwardRef(({args:c,children:f,...m},d)=>{const w=C.useRef(null);return C.useImperativeHandle(d,()=>w.current),C.useLayoutEffect(()=>void(i==null?void 0:i(w.current))),C.createElement("mesh",Kr({ref:w},m),C.createElement(a,{attach:"geometry",args:c}),f)})}const bp=Tc("octahedron"),$p=Tc("extrude"),Nc=(l,i,a)=>{let c;switch(l){case vl:c=new Uint8ClampedArray(i*a*4);break;case At:c=new Uint16Array(i*a*4);break;case $f:c=new Uint32Array(i*a*4);break;case bf:c=new Int8Array(i*a*4);break;case Jf:c=new Int16Array(i*a*4);break;case Kf:c=new Int32Array(i*a*4);break;case ar:c=new Float32Array(i*a*4);break;default:throw new Error("Unsupported data type")}return c};let dl;const eh=(l,i,a,c)=>{if(dl!==void 0)return dl;const f=new wa(1,1,c);i.setRenderTarget(f);const m=new ya(new Ju,new qf({color:16777215}));i.render(m,a),i.setRenderTarget(null);const d=Nc(l,f.width,f.height);return i.readRenderTargetPixels(f,0,0,f.width,f.height,d),f.dispose(),m.geometry.dispose(),m.material.dispose(),dl=d[0]!==0,dl};class Ra{constructor(i){et(this,"_renderer");et(this,"_rendererIsDisposable",!1);et(this,"_material");et(this,"_scene");et(this,"_camera");et(this,"_quad");et(this,"_renderTarget");et(this,"_width");et(this,"_height");et(this,"_type");et(this,"_colorSpace");et(this,"_supportsReadPixels",!0);et(this,"render",()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(i){throw this._renderer.setRenderTarget(null),i}this._renderer.setRenderTarget(null)});var c,f,m,d,w,g,x,p,v,S,I,N,F,P,M,k;this._width=i.width,this._height=i.height,this._type=i.type,this._colorSpace=i.colorSpace;const a={format:Sn,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((c=i.renderTargetOptions)==null?void 0:c.anisotropy)!==void 0?(f=i.renderTargetOptions)==null?void 0:f.anisotropy:1,generateMipmaps:((m=i.renderTargetOptions)==null?void 0:m.generateMipmaps)!==void 0?(d=i.renderTargetOptions)==null?void 0:d.generateMipmaps:!1,magFilter:((w=i.renderTargetOptions)==null?void 0:w.magFilter)!==void 0?(g=i.renderTargetOptions)==null?void 0:g.magFilter:Qt,minFilter:((x=i.renderTargetOptions)==null?void 0:x.minFilter)!==void 0?(p=i.renderTargetOptions)==null?void 0:p.minFilter:Qt,samples:((v=i.renderTargetOptions)==null?void 0:v.samples)!==void 0?(S=i.renderTargetOptions)==null?void 0:S.samples:void 0,wrapS:((I=i.renderTargetOptions)==null?void 0:I.wrapS)!==void 0?(N=i.renderTargetOptions)==null?void 0:N.wrapS:Tr,wrapT:((F=i.renderTargetOptions)==null?void 0:F.wrapT)!==void 0?(P=i.renderTargetOptions)==null?void 0:P.wrapT:Tr};if(this._material=i.material,i.renderer?this._renderer=i.renderer:(this._renderer=Ra.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new ml,this._camera=new Vu,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!eh(this._type,this._renderer,this._camera,a)){let B;switch(this._type){case At:B=this._renderer.extensions.has("EXT_color_buffer_float")?ar:void 0;break}B!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${ar}`),this._type=B):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new ya(new Ju,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new wa(this.width,this.height,a),this._renderTarget.texture.mapping=((M=i.renderTargetOptions)==null?void 0:M.mapping)!==void 0?(k=i.renderTargetOptions)==null?void 0:k.mapping:yl}static instantiateRenderer(){const i=new Qu;return i.setSize(128,128),i}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const i=Nc(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,i),i}toDataTexture(i){const a=new Xf(this.toArray(),this.width,this.height,Sn,this._type,(i==null?void 0:i.mapping)||yl,(i==null?void 0:i.wrapS)||Tr,(i==null?void 0:i.wrapT)||Tr,(i==null?void 0:i.magFilter)||Qt,(i==null?void 0:i.minFilter)||Qt,(i==null?void 0:i.anisotropy)||1,da);return a.generateMipmaps=(i==null?void 0:i.generateMipmaps)!==void 0?i==null?void 0:i.generateMipmaps:!1,a}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(i){this.disposeOnDemandRenderer(),i&&this.renderTarget.dispose(),this.material instanceof ti&&Object.values(this.material.uniforms).forEach(a=>{a.value instanceof Yr&&a.value.dispose()}),Object.values(this.material).forEach(a=>{a instanceof Yr&&a.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(i){this._width=i,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(i){this._height=i,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(i){this._renderTarget=i,this._width=i.width,this._height=i.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class zc extends Error{}class Lc extends Error{}const Kn=(l,i,a)=>{const c=new RegExp(`${i}="([^"]*)"`,"i").exec(l);if(c)return c[1];const f=new RegExp(`<${i}[^>]*>([\\s\\S]*?)</${i}>`,"i").exec(l);if(f){const m=f[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return m&&m.length===3?m.map(d=>d.replace(/<\/?rdf:li>/g,"")):f[1].trim()}if(a!==void 0)return a;throw new Error(`Can't find ${i} in gainmap metadata`)},th=l=>{let i;typeof TextDecoder<"u"?i=new TextDecoder().decode(l):i=l.toString();let a=i.indexOf("<x:xmpmeta");for(;a!==-1;){const c=i.indexOf("x:xmpmeta>",a),f=i.slice(a,c+10);try{const m=Kn(f,"hdrgm:GainMapMin","0"),d=Kn(f,"hdrgm:GainMapMax"),w=Kn(f,"hdrgm:Gamma","1"),g=Kn(f,"hdrgm:OffsetSDR","0.015625"),x=Kn(f,"hdrgm:OffsetHDR","0.015625"),p=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(f),v=p?p[1]:"0",S=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(f);if(!S)throw new Error("Incomplete gainmap metadata");const I=S[1];return{gainMapMin:Array.isArray(m)?m.map(N=>parseFloat(N)):[parseFloat(m),parseFloat(m),parseFloat(m)],gainMapMax:Array.isArray(d)?d.map(N=>parseFloat(N)):[parseFloat(d),parseFloat(d),parseFloat(d)],gamma:Array.isArray(w)?w.map(N=>parseFloat(N)):[parseFloat(w),parseFloat(w),parseFloat(w)],offsetSdr:Array.isArray(g)?g.map(N=>parseFloat(N)):[parseFloat(g),parseFloat(g),parseFloat(g)],offsetHdr:Array.isArray(x)?x.map(N=>parseFloat(N)):[parseFloat(x),parseFloat(x),parseFloat(x)],hdrCapacityMin:parseFloat(v),hdrCapacityMax:parseFloat(I)}}catch{}a=i.indexOf("<x:xmpmeta",c)}};class rh{constructor(i){et(this,"options");this.options={debug:i&&i.debug!==void 0?i.debug:!1,extractFII:i&&i.extractFII!==void 0?i.extractFII:!0,extractNonFII:i&&i.extractNonFII!==void 0?i.extractNonFII:!0}}extract(i){return new Promise((a,c)=>{const f=this.options.debug,m=new DataView(i.buffer);if(m.getUint16(0)!==65496){c(new Error("Not a valid jpeg"));return}const d=m.byteLength;let w=2,g=0,x;for(;w<d;){if(++g>250){c(new Error(`Found no marker after ${g} loops `));return}if(m.getUint8(w)!==255){c(new Error(`Not a valid marker at offset 0x${w.toString(16)}, found: 0x${m.getUint8(w).toString(16)}`));return}if(x=m.getUint8(w+1),f&&console.log(`Marker: ${x.toString(16)}`),x===226){f&&console.log("Found APP2 marker (0xffe2)");const p=w+4;if(m.getUint32(p)===1297106432){const v=p+4;let S;if(m.getUint16(v)===18761)S=!1;else if(m.getUint16(v)===19789)S=!0;else{c(new Error("No valid endianness marker found in TIFF header"));return}if(m.getUint16(v+2,!S)!==42){c(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const I=m.getUint32(v+4,!S);if(I<8){c(new Error("Not valid TIFF data! (First offset less than 8)"));return}const N=v+I,F=m.getUint16(N,!S),P=N+2;let M=0;for(let Y=P;Y<P+12*F;Y+=12)m.getUint16(Y,!S)===45057&&(M=m.getUint32(Y+8,!S));const B=N+2+F*12+4,J=[];for(let Y=B;Y<B+M*16;Y+=16){const Z={MPType:m.getUint32(Y,!S),size:m.getUint32(Y+4,!S),dataOffset:m.getUint32(Y+8,!S),dependantImages:m.getUint32(Y+12,!S),start:-1,end:-1,isFII:!1};Z.dataOffset?(Z.start=v+Z.dataOffset,Z.isFII=!1):(Z.start=0,Z.isFII=!0),Z.end=Z.start+Z.size,J.push(Z)}if(this.options.extractNonFII&&J.length){const Y=new Blob([m]),Z=[];for(const le of J){if(le.isFII&&!this.options.extractFII)continue;const G=Y.slice(le.start,le.end+1,"image/jpeg");Z.push(G)}a(Z)}}}w+=2+m.getUint16(w+2)}})}}const nh=async l=>{const i=th(l);if(!i)throw new Lc("Gain map XMP metadata not found");const c=await new rh({extractFII:!0,extractNonFII:!0}).extract(l);if(c.length!==2)throw new zc("Gain map recovery image not found");return{sdr:new Uint8Array(await c[0].arrayBuffer()),gainMap:new Uint8Array(await c[1].arrayBuffer()),metadata:i}},Du=l=>new Promise((i,a)=>{const c=document.createElement("img");c.onload=()=>{i(c)},c.onerror=f=>{a(f)},c.src=URL.createObjectURL(l)});class ih extends ed{constructor(a,c){super(c);et(this,"_renderer");et(this,"_renderTargetOptions");et(this,"_internalLoadingManager");et(this,"_config");this._config=a,a.renderer&&(this._renderer=a.renderer),this._internalLoadingManager=new td}setRenderer(a){return this._renderer=a,this}setRenderTargetOptions(a){return this._renderTargetOptions=a,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const a=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Yr,sdr:new Yr});return this._config.createQuadRenderer({width:16,height:16,type:At,colorSpace:da,material:a,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(a,c,f){const m=c?new Blob([c],{type:"image/jpeg"}):void 0,d=new Blob([a],{type:"image/jpeg"});let w,g,x=!1;if(typeof createImageBitmap>"u"){const p=await Promise.all([m?Du(m):Promise.resolve(void 0),Du(d)]);g=p[0],w=p[1],x=f==="flipY"}else{const p=await Promise.all([m?createImageBitmap(m,{imageOrientation:f||"flipY"}):Promise.resolve(void 0),createImageBitmap(d,{imageOrientation:f||"flipY"})]);g=p[0],w=p[1]}return{sdrImage:w,gainMapImage:g,needsFlip:x}}createTextures(a,c,f){const m=new Yr(c||new ImageData(2,2),yl,Tr,Tr,Qt,uu,Sn,vl,1,da);m.flipY=f,m.needsUpdate=!0;const d=new Yr(a,yl,Tr,Tr,Qt,uu,Sn,vl,1,rd);return d.flipY=f,d.needsUpdate=!0,{gainMap:m,sdr:d}}updateQuadRenderer(a,c,f,m,d){a.width=c.width,a.height=c.height,a.material.gainMap=f,a.material.sdr=m,a.material.gainMapMin=d.gainMapMin,a.material.gainMapMax=d.gainMapMax,a.material.offsetHdr=d.offsetHdr,a.material.offsetSdr=d.offsetSdr,a.material.gamma=d.gamma,a.material.hdrCapacityMin=d.hdrCapacityMin,a.material.hdrCapacityMax=d.hdrCapacityMax,a.material.maxDisplayBoost=Math.pow(2,d.hdrCapacityMax),a.material.needsUpdate=!0}}const lh=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,oh=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class ah extends ti{constructor({gamma:a,offsetHdr:c,offsetSdr:f,gainMapMin:m,gainMapMax:d,maxDisplayBoost:w,hdrCapacityMin:g,hdrCapacityMax:x,sdr:p,gainMap:v}){super({name:"GainMapDecoderMaterial",vertexShader:lh,fragmentShader:oh,uniforms:{sdr:{value:p},gainMap:{value:v},gamma:{value:new Xe(1/a[0],1/a[1],1/a[2])},offsetHdr:{value:new Xe().fromArray(c)},offsetSdr:{value:new Xe().fromArray(f)},gainMapMin:{value:new Xe().fromArray(m)},gainMapMax:{value:new Xe().fromArray(d)},weightFactor:{value:(Math.log2(w)-g)/(x-g)}},blending:nd,depthTest:!1,depthWrite:!1});et(this,"_maxDisplayBoost");et(this,"_hdrCapacityMin");et(this,"_hdrCapacityMax");this._maxDisplayBoost=w,this._hdrCapacityMin=g,this._hdrCapacityMax=x,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(a){this.uniforms.sdr.value=a}get gainMap(){return this.uniforms.gainMap.value}set gainMap(a){this.uniforms.gainMap.value=a}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(a){this.uniforms.offsetHdr.value.fromArray(a)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(a){this.uniforms.offsetSdr.value.fromArray(a)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(a){this.uniforms.gainMapMin.value.fromArray(a)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(a){this.uniforms.gainMapMax.value.fromArray(a)}get gamma(){const a=this.uniforms.gamma.value;return[1/a.x,1/a.y,1/a.z]}set gamma(a){const c=this.uniforms.gamma.value;c.x=1/a[0],c.y=1/a[1],c.z=1/a[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(a){this._hdrCapacityMin=a,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(a){this._hdrCapacityMax=a,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(a){this._maxDisplayBoost=Math.max(1,Math.min(65504,a)),this.calculateWeight()}calculateWeight(){const a=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,a))}}class Oc extends ih{constructor(i,a){super({renderer:i,createMaterial:c=>new ah(c),createQuadRenderer:c=>new Ra(c)},a)}async render(i,a,c,f){const{sdrImage:m,gainMapImage:d,needsFlip:w}=await this.processImages(c,f,"flipY"),{gainMap:g,sdr:x}=this.createTextures(m,d,w);this.updateQuadRenderer(i,m,g,x,a),i.render()}}class sh extends Oc{load([i,a,c],f,m,d){const w=this.prepareQuadRenderer();let g,x,p;const v=async()=>{if(g&&x&&p){try{await this.render(w,p,g,x)}catch(U){this.manager.itemError(i),this.manager.itemError(a),this.manager.itemError(c),typeof d=="function"&&d(U),w.disposeOnDemandRenderer();return}typeof f=="function"&&f(w),this.manager.itemEnd(i),this.manager.itemEnd(a),this.manager.itemEnd(c),w.disposeOnDemandRenderer()}};let S=!0,I=0,N=0,F=!0,P=0,M=0,k=!0,B=0,J=0;const Y=()=>{if(typeof m=="function"){const U=I+P+B,W=N+M+J,H=S&&F&&k;m(new ProgressEvent("progress",{lengthComputable:H,loaded:W,total:U}))}};this.manager.itemStart(i),this.manager.itemStart(a),this.manager.itemStart(c);const Z=new pl(this._internalLoadingManager);Z.setResponseType("arraybuffer"),Z.setRequestHeader(this.requestHeader),Z.setPath(this.path),Z.setWithCredentials(this.withCredentials),Z.load(i,async U=>{if(typeof U=="string")throw new Error("Invalid sdr buffer");g=U,await v()},U=>{S=U.lengthComputable,N=U.loaded,I=U.total,Y()},U=>{this.manager.itemError(i),typeof d=="function"&&d(U)});const le=new pl(this._internalLoadingManager);le.setResponseType("arraybuffer"),le.setRequestHeader(this.requestHeader),le.setPath(this.path),le.setWithCredentials(this.withCredentials),le.load(a,async U=>{if(typeof U=="string")throw new Error("Invalid gainmap buffer");x=U,await v()},U=>{F=U.lengthComputable,M=U.loaded,P=U.total,Y()},U=>{this.manager.itemError(a),typeof d=="function"&&d(U)});const G=new pl(this._internalLoadingManager);return G.setRequestHeader(this.requestHeader),G.setPath(this.path),G.setWithCredentials(this.withCredentials),G.load(c,async U=>{if(typeof U!="string")throw new Error("Invalid metadata string");p=JSON.parse(U),await v()},U=>{k=U.lengthComputable,J=U.loaded,B=U.total,Y()},U=>{this.manager.itemError(c),typeof d=="function"&&d(U)}),w}}class uh extends Oc{load(i,a,c,f){const m=this.prepareQuadRenderer(),d=new pl(this._internalLoadingManager);return d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setPath(this.path),d.setWithCredentials(this.withCredentials),this.manager.itemStart(i),d.load(i,async w=>{if(typeof w=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const g=new Uint8Array(w);let x,p,v;try{const S=await nh(g);x=S.sdr,p=S.gainMap,v=S.metadata}catch(S){if(S instanceof Lc||S instanceof zc)console.warn(`Failure to reconstruct an HDR image from ${i}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),v={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},x=g;else throw S}try{await this.render(m,v,x.buffer,p==null?void 0:p.buffer)}catch(S){this.manager.itemError(i),typeof f=="function"&&f(S),m.disposeOnDemandRenderer();return}typeof a=="function"&&a(m),this.manager.itemEnd(i),m.disposeOnDemandRenderer()},c,w=>{this.manager.itemError(i),typeof f=="function"&&f(w)}),m}}const ei={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},Ac="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",wn=l=>Array.isArray(l),Ca=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function Sl({files:l=Ca,path:i="",preset:a=void 0,encoding:c=void 0,extensions:f}={}){let m=null,d=!1;a&&(Ia(a),l=ei[a],i=Ac),d=wn(l);const{extension:w,isCubemap:g}=Pa(l);if(m=ka(w),!m)throw new Error("useEnvironment: Unrecognized file extension: "+l);const x=sr(I=>I.gl);C.useLayoutEffect(()=>{if(w!=="webp"&&w!=="jpg"&&w!=="jpeg")return;function I(){xn.clear(m,d?[l]:l)}x.domElement.addEventListener("webglcontextlost",I,{once:!0})},[l,x.domElement]);const p=xn(m,d?[l]:l,I=>{(w==="webp"||w==="jpg"||w==="jpeg")&&I.setRenderer(x),I.setPath==null||I.setPath(i),f&&f(I)});let v=d?p[0]:p;if(w==="jpg"||w==="jpeg"||w==="webp"){var S;v=(S=v.renderTarget)==null?void 0:S.texture}return v.mapping=g?id:ld,"colorSpace"in v?v.colorSpace=c??g?"srgb":"srgb-linear":v.encoding=c??g?Jp:Kp,v}const ch={files:Ca,path:"",preset:void 0,extensions:void 0};Sl.preload=l=>{const i={...ch,...l};let{files:a,path:c=""}=i;const{preset:f,extensions:m}=i;f&&(Ia(f),a=ei[f],c=Ac);const{extension:d}=Pa(a);if(d==="webp"||d==="jpg"||d==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const w=ka(d);if(!w)throw new Error("useEnvironment: Unrecognized file extension: "+a);xn.preload(w,wn(a)?[a]:a,g=>{g.setPath==null||g.setPath(c),m&&m(g)})};const fh={files:Ca,preset:void 0};Sl.clear=l=>{const i={...fh,...l};let{files:a}=i;const{preset:c}=i;c&&(Ia(c),a=ei[c]);const{extension:f}=Pa(a),m=ka(f);if(!m)throw new Error("useEnvironment: Unrecognized file extension: "+a);xn.clear(m,wn(a)?[a]:a)};function Ia(l){if(!(l in ei))throw new Error("Preset must be one of: "+Object.keys(ei).join(", "))}function Pa(l){var i;const a=wn(l)&&l.length===6,c=wn(l)&&l.length===3&&l.some(d=>d.endsWith("json")),f=wn(l)?l[0]:l;return{extension:a?"cube":c?"webp":f.startsWith("data:application/exr")?"exr":f.startsWith("data:application/hdr")?"hdr":f.startsWith("data:image/jpeg")?"jpg":(i=f.split(".").pop())==null||(i=i.split("?"))==null||(i=i.shift())==null?void 0:i.toLowerCase(),isCubemap:a,isGainmap:c}}function ka(l){return l==="cube"?od:l==="hdr"?Hp:l==="exr"?Gp:l==="jpg"||l==="jpeg"?uh:l==="webp"?sh:null}const dh=l=>l.current&&l.current.isScene,ph=l=>dh(l)?l.current:l;function Ta(l,i,a,c,f={}){var m,d,w,g,x;f={backgroundBlurriness:(m=f.blur)!==null&&m!==void 0?m:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...f};const p=ph(i||a),v=p.background,S=p.environment,I={backgroundBlurriness:p.backgroundBlurriness,backgroundIntensity:p.backgroundIntensity,backgroundRotation:(d=(w=p.backgroundRotation)==null||w.clone==null?void 0:w.clone())!==null&&d!==void 0?d:[0,0,0],environmentIntensity:p.environmentIntensity,environmentRotation:(g=(x=p.environmentRotation)==null||x.clone==null?void 0:x.clone())!==null&&g!==void 0?g:[0,0,0]};return l!=="only"&&(p.environment=c),l&&(p.background=c),Pr(p,f),()=>{l!=="only"&&(p.environment=S),l&&(p.background=v),Pr(p,I)}}function Na({scene:l,background:i=!1,map:a,...c}){const f=sr(m=>m.scene);return C.useLayoutEffect(()=>{if(a)return Ta(i,l,f,a,c)}),null}function Fc({background:l=!1,scene:i,blur:a,backgroundBlurriness:c,backgroundIntensity:f,backgroundRotation:m,environmentIntensity:d,environmentRotation:w,...g}){const x=Sl(g),p=sr(v=>v.scene);return C.useLayoutEffect(()=>Ta(l,i,p,x,{blur:a,backgroundBlurriness:c,backgroundIntensity:f,backgroundRotation:m,environmentIntensity:d,environmentRotation:w})),null}function hh({children:l,near:i=1,far:a=1e3,resolution:c=256,frames:f=1,map:m,background:d=!1,blur:w,backgroundBlurriness:g,backgroundIntensity:x,backgroundRotation:p,environmentIntensity:v,environmentRotation:S,scene:I,files:N,path:F,preset:P=void 0,extensions:M}){const k=sr(G=>G.gl),B=sr(G=>G.scene),J=C.useRef(null),[Y]=C.useState(()=>new ml),Z=C.useMemo(()=>{const G=new ad(c);return G.texture.type=At,G},[c]);C.useLayoutEffect(()=>(f===1&&J.current.update(k,Y),Ta(d,I,B,Z.texture,{blur:w,backgroundBlurriness:g,backgroundIntensity:x,backgroundRotation:p,environmentIntensity:v,environmentRotation:S})),[l,Y,Z.texture,I,B,d,f,k]);let le=1;return vr(()=>{(f===1/0||le<f)&&(J.current.update(k,Y),le++)}),C.createElement(C.Fragment,null,Kd(C.createElement(C.Fragment,null,l,C.createElement("cubeCamera",{ref:J,args:[i,a,Z]}),N||P?C.createElement(Fc,{background:!0,files:N,preset:P,path:F,extensions:M}):m?C.createElement(Na,{background:!0,map:m,extensions:M}):null),Y))}function mh(l){var i,a,c,f;const m=Sl(l),d=l.map||m;C.useMemo(()=>xa({GroundProjectedEnvImpl:Bp}),[]);const w=C.useMemo(()=>[d],[d]),g=(i=l.ground)==null?void 0:i.height,x=(a=l.ground)==null?void 0:a.radius,p=(c=(f=l.ground)==null?void 0:f.scale)!==null&&c!==void 0?c:1e3;return C.createElement(C.Fragment,null,C.createElement(Na,Kr({},l,{map:d})),C.createElement("groundProjectedEnvImpl",{args:w,scale:p,height:g,radius:x}))}function vh(l){return l.ground?C.createElement(mh,l):l.map?C.createElement(Na,l):l.children?C.createElement(hh,l):C.createElement(Fc,l)}class gh extends ti{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${kc>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const yh=l=>new Xe().setFromSpherical(new sd(l,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),Uu=C.forwardRef(({radius:l=100,depth:i=50,count:a=5e3,saturation:c=0,factor:f=4,fade:m=!1,speed:d=1},w)=>{const g=C.useRef(),[x,p,v]=C.useMemo(()=>{const I=[],N=[],F=Array.from({length:a},()=>(.5+.5*Math.random())*f),P=new gl;let M=l+i;const k=i/a;for(let B=0;B<a;B++)M-=k*Math.random(),I.push(...yh(M).toArray()),P.setHSL(B/a,c,.9),N.push(P.r,P.g,P.b);return[new Float32Array(I),new Float32Array(N),new Float32Array(F)]},[a,i,f,l,c]);vr(I=>g.current&&(g.current.uniforms.time.value=I.clock.getElapsedTime()*d));const[S]=C.useState(()=>new gh);return C.createElement("points",{ref:w},C.createElement("bufferGeometry",null,C.createElement("bufferAttribute",{attach:"attributes-position",args:[x,3]}),C.createElement("bufferAttribute",{attach:"attributes-color",args:[p,3]}),C.createElement("bufferAttribute",{attach:"attributes-size",args:[v,1]})),C.createElement("primitive",{ref:g,object:S,attach:"material",blending:Jn,"uniforms-fade-value":m,depthWrite:!1,transparent:!0,vertexColors:!0}))}),wh=l=>{const i=new ud,a=l/1.8;return i.moveTo(0,a),i.quadraticCurveTo(0,0,a,0),i.quadraticCurveTo(0,0,0,-a),i.quadraticCurveTo(0,0,-a,0),i.quadraticCurveTo(0,0,0,a),i},Bu=wh(or),fa={depth:or*.4,bevelEnabled:!0,bevelThickness:.05,bevelSize:.05,bevelSegments:3},Sh=({data:l,timeSinceHit:i,color:a})=>{const c=C.useRef(null),f=C.useRef(null),m=6,d=10,w=m*i;vr(()=>{if(c.current&&c.current.scale.setScalar(Math.max(.01,1-i*1.5)),f.current)if(i<.15){const p=i/.15;f.current.visible=!0,f.current.scale.setScalar(1+p*4),f.current.material.opacity=1-p}else f.current.visible=!1});const g=({offsetDir:x,moveDir:p,scale:v=1})=>{const S=C.useRef(null);return vr(()=>{S.current&&(S.current.position.x=x[0]+p[0]*w,S.current.position.y=x[1]+p[1]*w,S.current.position.z=x[2]+p[2]*w,S.current.rotation.x+=p[1]*.1*d,S.current.rotation.y+=p[0]*.1*d)}),T.jsx(bp,{ref:S,args:[or*.3*v],position:[x[0],x[1],x[2]],children:T.jsx("meshStandardMaterial",{color:a,roughness:.1,metalness:.9,emissive:a,emissiveIntensity:.5})})};return T.jsxs("group",{ref:c,children:[T.jsxs("mesh",{ref:f,children:[T.jsx("sphereGeometry",{args:[or*1.2,16,16]}),T.jsx("meshBasicMaterial",{color:"white",transparent:!0,toneMapped:!1})]}),T.jsx(g,{offsetDir:[0,.2,0],moveDir:[0,1.5,-.5],scale:.8}),T.jsx(g,{offsetDir:[.2,0,0],moveDir:[1.5,0,-.5],scale:.8}),T.jsx(g,{offsetDir:[0,-.2,0],moveDir:[0,-1.5,-.5],scale:.8}),T.jsx(g,{offsetDir:[-.2,0,0],moveDir:[-1.5,0,-.5],scale:.8}),T.jsx(g,{offsetDir:[.1,.1,.1],moveDir:[1,1,1],scale:.5}),T.jsx(g,{offsetDir:[-.1,-.1,-.1],moveDir:[-1,-1,1],scale:.5})]})},xh=({data:l,zPos:i,currentTime:a})=>{const c=l.type==="left"?qr.left:qr.right,f=C.useMemo(()=>[wc[l.lineIndex],Sc[l.lineLayer],i],[l.lineIndex,l.lineLayer,i]);return l.missed?null:l.hit&&l.hitTime?T.jsx("group",{position:f,children:T.jsx(Sh,{data:l,timeSinceHit:a-l.hitTime,color:c})}):l.requiresGrip?T.jsxs("group",{position:f,children:[T.jsxs("mesh",{castShadow:!0,receiveShadow:!0,children:[T.jsx("sphereGeometry",{args:[or*.7,32,32]}),T.jsx("meshPhysicalMaterial",{color:"#ffffff",emissive:c,emissiveIntensity:2,roughness:.1,metalness:.8,transmission:.5,thickness:1})]}),T.jsxs("mesh",{rotation:[Math.PI/2,0,0],children:[T.jsx("torusGeometry",{args:[or*.9,.05,16,64]}),T.jsx("meshStandardMaterial",{color:c,emissive:c,emissiveIntensity:5,toneMapped:!1})]}),T.jsx("pointLight",{color:c,intensity:2,distance:2})]}):T.jsxs("group",{position:f,children:[T.jsx("group",{rotation:[0,0,0],children:T.jsx("group",{position:[0,0,-or*.2],children:T.jsx($p,{args:[Bu,fa],castShadow:!0,receiveShadow:!0,children:T.jsx("meshPhysicalMaterial",{color:c,roughness:.2,metalness:.1,transmission:.1,thickness:.5,emissive:c,emissiveIntensity:.8})})})}),T.jsxs("mesh",{position:[0,0,or*.1],children:[T.jsx("octahedronGeometry",{args:[or*.2,0]}),T.jsx("meshBasicMaterial",{color:"white",toneMapped:!1,transparent:!0,opacity:.8})]}),T.jsx("group",{position:[0,0,-or*.2],children:T.jsxs("mesh",{children:[T.jsx("extrudeGeometry",{args:[Bu,{...fa,depth:fa.depth*1.1}]}),T.jsx("meshBasicMaterial",{color:c,wireframe:!0,transparent:!0,opacity:.3})]})})]})},_h=bu.memo(xh,(l,i)=>i.data.hit?!1:l.zPos===i.zPos&&l.data.hit===i.data.hit&&l.data.missed===i.data.missed),Hu=({type:l,positionRef:i,velocityRef:a,isGrippingRef:c})=>{const f=C.useRef(null),m=C.useRef(null),d=C.useRef(null),w=C.useRef(null),g=C.useRef(null),x=C.useRef(null),p=1,v=C.useRef(new cd);vr((N,F)=>{if(!f.current)return;const P=i.current,M=a.current,k=c.current,B=N.clock.elapsedTime;if(P){f.current.visible=!0,f.current.position.lerp(P,.5);const J=-Math.PI/3.5,Y=0,Z=l==="left"?.2:-.2;let le=0,G=0,U=0;M&&(le=M.y*.05,U=-M.x*.05,le+=M.z*.02),v.current.set(J+le,Y+G,Z+U),f.current.rotation.x=Zt.lerp(f.current.rotation.x,v.current.x,.2),f.current.rotation.y=Zt.lerp(f.current.rotation.y,v.current.y,.2),f.current.rotation.z=Zt.lerp(f.current.rotation.z,v.current.z,.2);const W=10*F,H=k?8:2,$=k?6:3;g.current&&(g.current.intensity=Zt.lerp(g.current.intensity,H,W),g.current.distance=Zt.lerp(g.current.distance,$,W));const ce=k?(Math.random()-.5)*.05:0,se=k?Math.sin(B*30)*.2:0,xe=k?1.8:1;if(m.current){const ne=Zt.lerp(m.current.scale.x,xe+se,W);m.current.scale.set(ne,1,ne),m.current.position.x=ce,m.current.position.z=ce,m.current.material.color.set(k?"#ffffff":"white")}if(d.current){const ne=k?1.5:1,we=Zt.lerp(d.current.scale.x,ne,W);d.current.scale.set(we,1,we)}if(x.current){const ne=k?1.2:0,we=x.current.scale.x,Q=Zt.lerp(we,ne,W);x.current.scale.setScalar(Q),x.current.rotation.x+=F,x.current.rotation.z-=F*2}if(w.current){const ne=k?.5+Math.random()*.2:.05,we=k?3:1.2,Q=Zt.lerp(w.current.scale.x,we,W);w.current.scale.set(Q,1,Q),w.current.material.opacity=Zt.lerp(w.current.material.opacity,ne,W)}}else f.current.visible=!1});const S=l==="left"?qr.left:qr.right,I=l==="left"?"#93c5fd":"#fca5a5";return T.jsxs("group",{ref:f,children:[T.jsxs("mesh",{position:[0,-.06,0],children:[T.jsx("cylinderGeometry",{args:[.02,.02,.12,16]}),T.jsx("meshStandardMaterial",{color:"#1a1a1a",roughness:.6,metalness:.8})]}),T.jsxs("mesh",{position:[0,-.13,0],children:[T.jsx("cylinderGeometry",{args:[.025,.025,.02,16]}),T.jsx("meshStandardMaterial",{color:"#888",roughness:.3,metalness:1})]}),T.jsxs("mesh",{position:[0,-.08,0],children:[T.jsx("torusGeometry",{args:[.021,.002,8,24]}),T.jsx("meshStandardMaterial",{color:"#aaa",roughness:.2,metalness:1})]}),T.jsxs("mesh",{position:[0,-.04,0],children:[T.jsx("torusGeometry",{args:[.021,.002,8,24]}),T.jsx("meshStandardMaterial",{color:"#aaa",roughness:.2,metalness:1})]}),T.jsxs("mesh",{position:[0,.01,0],children:[T.jsx("cylinderGeometry",{args:[.035,.025,.05,16]}),T.jsx("meshStandardMaterial",{color:"#C0C0C0",roughness:.2,metalness:1})]}),T.jsxs("mesh",{position:[0,.036,0],rotation:[Math.PI/2,0,0],children:[T.jsx("ringGeometry",{args:[.015,.03,32]}),T.jsx("meshBasicMaterial",{color:S,toneMapped:!1,side:qu})]}),T.jsxs("mesh",{ref:m,position:[0,.05+p/2,0],children:[T.jsx("cylinderGeometry",{args:[.008,.008,p,12]}),T.jsx("meshBasicMaterial",{color:"white",toneMapped:!1})]}),T.jsxs("mesh",{ref:d,position:[0,.05+p/2,0],children:[T.jsx("capsuleGeometry",{args:[.02,p,16,32]}),T.jsx("meshBasicMaterial",{color:S,toneMapped:!1,transparent:!0,opacity:.6,blending:Jn,depthWrite:!1})]}),T.jsxs("mesh",{ref:w,position:[0,.05+p/2,0],children:[T.jsx("capsuleGeometry",{args:[.035,p*1.05,16,32]}),T.jsx("meshBasicMaterial",{color:S,toneMapped:!1,transparent:!0,opacity:.1,blending:Jn,depthWrite:!1})]}),T.jsxs("group",{ref:x,position:[0,.05+p/2,0],children:[T.jsxs("mesh",{position:[0,0,0],scale:[.5,2,.5],children:[T.jsx("icosahedronGeometry",{args:[.08,0]}),T.jsx("meshBasicMaterial",{color:I,toneMapped:!1,transparent:!0,opacity:.4,blending:Jn,wireframe:!0})]}),T.jsxs("mesh",{position:[0,-.2,0],scale:[.6,1,.6],children:[T.jsx("icosahedronGeometry",{args:[.1,0]}),T.jsx("meshBasicMaterial",{color:I,toneMapped:!1,transparent:!0,opacity:.2,blending:Jn})]})]}),T.jsx("pointLight",{ref:g,color:S,intensity:2,distance:3,decay:2,position:[0,.5,0]})]})},Gu=60/xc,Eh=({gameStatus:l,audioRef:i,handPositionsRef:a,chart:c,onNoteHit:f,onNoteMiss:m,onSongEnd:d})=>{const[w,g]=C.useState(c),[x,p]=C.useState(0),v=C.useRef([]),S=C.useRef(0),I=C.useRef(0),N=C.useRef(null),F=C.useRef(null),P=C.useRef(null),M=C.useMemo(()=>new Xe,[]),k=C.useMemo(()=>new Xe,[]),B=(H,$)=>{I.current=$?.3:.15,f(H,$)};vr((H,$)=>{if(i.current&&l===mt.PLAYING){const we=i.current.currentTime%Gu/Gu,Q=Math.pow(1-we,4);F.current&&(F.current.intensity=.1+Q*.3),P.current&&(P.current.intensity=.5+Q*1.5)}if(I.current>0&&N.current){const ne=I.current;N.current.position.x=(Math.random()-.5)*ne,N.current.position.y=1.8+(Math.random()-.5)*ne,N.current.position.z=4+(Math.random()-.5)*ne,I.current=Zt.lerp(I.current,0,10*$),I.current<.01&&(I.current=0,N.current.position.set(0,1.8,4))}if(l!==mt.PLAYING||!i.current)return;const ce=i.current.currentTime;if(p(ce),i.current.ended){d();return}const se=Math.abs(gp-Xn)/sa;for(;S.current<w.length;){const ne=w[S.current];if(ne.time-se<=ce)v.current.push(ne),S.current++;else break}const xe=a.current;for(let ne=v.current.length-1;ne>=0;ne--){const we=v.current[ne];if(we.hit||we.missed)continue;const Q=we.time-ce,ae=Xn-Q*sa;if(ae>yp){we.missed=!0,m(we),v.current.splice(ne,1);continue}if(ae>Xn-1.5&&ae<Xn+1){const X=we.type==="left"?xe.left:xe.right,pe=we.type==="left"?xe.leftVelocity:xe.rightVelocity;if(X){const me=M.set(wc[we.lineIndex],Sc[we.lineLayer],ae);if(X.distanceTo(me)<.8){let Se=!0;if(pe.length()<.1)continue;const tt=we.type==="left"?xe.leftGripping:xe.rightGripping;if(we.requiresGrip){if(!tt)continue}else tt&&(Se=!1);if(we.cutDirection!==kr.ANY){const Pe=_p[we.cutDirection];k.copy(pe).normalize(),k.dot(Pe)<.3&&(Se=!1)}we.hit=!0,we.hitTime=ce,B(we,Se),v.current.splice(ne,1)}}}}});const J=C.useMemo(()=>w.filter(H=>!H.missed&&(!H.hit||x-(H.hitTime||0)<.5)&&H.time-x<5&&H.time-x>-2),[w,x]),Y=C.useRef(null),Z=C.useRef(null),le=C.useRef(null),G=C.useRef(null),U=C.useRef(!1),W=C.useRef(!1);return vr(()=>{Y.current=a.current.left,Z.current=a.current.right,le.current=a.current.leftVelocity,G.current=a.current.rightVelocity,U.current=a.current.leftGripping,W.current=a.current.rightGripping}),T.jsxs(T.Fragment,{children:[T.jsx(Yp,{ref:N,makeDefault:!0,position:[0,1.8,4],fov:60}),T.jsx("color",{attach:"background",args:["#050505"]}),T.jsx("fog",{attach:"fog",args:["#050505",10,50]}),T.jsx("ambientLight",{ref:F,intensity:.2}),T.jsx("spotLight",{ref:P,position:[0,10,5],angle:.5,penumbra:1,intensity:1,castShadow:!0}),T.jsx(vh,{preset:"night"}),T.jsx(qp,{position:[0,0,0],args:[6,100],cellThickness:.1,cellColor:"#333",sectionSize:5,sectionThickness:1.5,sectionColor:qr.right,fadeDistance:60,infiniteGrid:!0}),T.jsxs("mesh",{rotation:[-Math.PI/2,0,0],position:[0,-.01,0],children:[T.jsx("planeGeometry",{args:[4,100]}),T.jsx("meshStandardMaterial",{color:"#111",roughness:.8,metalness:.5})]}),T.jsx(Uu,{radius:100,depth:20,count:5e3,factor:4,saturation:1,fade:!0,speed:2}),T.jsx("group",{rotation:[0,0,Math.PI/4],children:T.jsx(Uu,{radius:150,depth:50,count:2e3,factor:2,saturation:0,fade:!0,speed:.5})}),T.jsx(Hu,{type:"left",positionRef:Y,velocityRef:le,isGrippingRef:U}),T.jsx(Hu,{type:"right",positionRef:Z,velocityRef:G,isGrippingRef:W}),J.map(H=>T.jsx(_h,{data:H,zPos:Xn-(H.time-x)*sa,currentTime:x},H.id))]})},Mh=[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[0,9],[9,10],[10,11],[11,12],[0,13],[13,14],[14,15],[15,16],[0,17],[17,18],[18,19],[19,20],[5,9],[9,13],[13,17],[0,5],[0,17]],Rh=l=>{const i=l[0];let a=0;const c=[{tip:8,pip:6},{tip:12,pip:10},{tip:16,pip:14},{tip:20,pip:18}];for(const f of c){const m=l[f.tip],d=l[f.pip],w=Math.pow(m.x-i.x,2)+Math.pow(m.y-i.y,2)+Math.pow(m.z-i.z,2),g=Math.pow(d.x-i.x,2)+Math.pow(d.y-i.y,2)+Math.pow(d.z-i.z,2);w<g&&a++}return a>=3},Ch=({videoRef:l,resultsRef:i,isCameraReady:a})=>{const c=C.useRef(null);return C.useEffect(()=>{if(!a)return;let f;const m=()=>{const d=c.current,w=l.current;if(d&&w&&w.readyState>=2){const g=d.getContext("2d");if(g&&(d.width!==w.videoWidth&&(d.width=w.videoWidth),d.height!==w.videoHeight&&(d.height=w.videoHeight),g.clearRect(0,0,d.width,d.height),g.save(),g.scale(-1,1),g.translate(-d.width,0),g.globalAlpha=.8,g.drawImage(w,0,0,d.width,d.height),g.restore(),g.globalAlpha=1,i.current&&i.current.landmarks))for(let x=0;x<i.current.landmarks.length;x++){const p=i.current.landmarks[x];if(!i.current.handedness||!i.current.handedness[x]||!i.current.handedness[x][0])continue;const N=i.current.handedness[x][0].categoryName==="Right"?qr.right:qr.left,F=Rh(p);g.strokeStyle=N,g.fillStyle=N,g.lineWidth=F?6:3,g.beginPath();for(const[M,k]of Mh){const B=p[M],J=p[k];g.moveTo((1-B.x)*d.width,B.y*d.height),g.lineTo((1-J.x)*d.width,J.y*d.height)}g.stroke();for(const M of p)g.beginPath(),g.arc((1-M.x)*d.width,M.y*d.height,4,0,2*Math.PI),g.fill();const P=p[8];if(g.beginPath(),g.fillStyle="white",g.arc((1-P.x)*d.width,P.y*d.height,7,0,2*Math.PI),g.fill(),F){g.font="bold 24px monospace",g.fillStyle="white",g.strokeStyle="black",g.lineWidth=4;const M=(1-p[0].x)*d.width,k=p[0].y*d.height;g.strokeText("GRIP",M-30,k-20),g.fillText("GRIP",M-30,k-20)}}}f=requestAnimationFrame(m)};return m(),()=>{f&&cancelAnimationFrame(f)}},[a,l,i]),a?T.jsxs("div",{className:"fixed bottom-4 right-4 w-64 h-48 bg-black/60 border-2 border-blue-500/30 rounded-xl overflow-hidden backdrop-blur-md z-50 shadow-[0_0_20px_rgba(0,0,0,0.5)] pointer-events-none transition-opacity duration-500",children:[T.jsx("div",{className:"absolute top-0 left-0 right-0 bg-black/40 text-[10px] text-blue-300/70 px-2 py-1 font-mono uppercase tracking-widest",children:""}),T.jsx("canvas",{ref:c,className:"w-full h-full object-cover mt-4"})]}):null};/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ih=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),jc=(...l)=>l.filter((i,a,c)=>!!i&&c.indexOf(i)===a).join(" ");/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ph={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=C.forwardRef(({color:l="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:c,className:f="",children:m,iconNode:d,...w},g)=>C.createElement("svg",{ref:g,...Ph,width:i,height:i,stroke:l,strokeWidth:c?Number(a)*24/Number(i):a,className:jc("lucide",f),...w},[...d.map(([x,p])=>C.createElement(x,p)),...Array.isArray(m)?m:[m]]));/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jr=(l,i)=>{const a=C.forwardRef(({className:c,...f},m)=>C.createElement(kh,{ref:m,iconNode:i,className:jc(`lucide-${Ih(l)}`,c),...f}));return a.displayName=`${l}`,a};/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=Jr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nh=Jr("Hand",[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zh=Jr("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lh=Jr("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=Jr("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=Jr("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.436.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=Jr("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),jh=()=>{const[l,i]=C.useState(mt.LOADING),[a,c]=C.useState(0),[f,m]=C.useState(0),[d,w]=C.useState(1),[g,x]=C.useState(100),[p,v]=C.useState(null),S=C.useRef(new Audio(wp)),I=C.useRef(null),[N,F]=C.useState(""),{isCameraReady:P,cameras:M,handPositionsRef:k,lastResultsRef:B,error:J}=Rp(I,N);C.useEffect(()=>{const W=H=>{H.preventDefault(),v(H)};return window.addEventListener("beforeinstallprompt",W),()=>window.removeEventListener("beforeinstallprompt",W)},[]);const Y=async()=>{if(!p)return;p.prompt();const{outcome:W}=await p.userChoice;W==="accepted"&&v(null)},Z=C.useCallback((W,H)=>{if(H){let $=150;navigator.vibrate&&navigator.vibrate(40),m(ce=>{const se=ce+1;return se>30?w(8):se>20?w(4):se>10?w(2):w(1),se}),c(ce=>ce+$*d),x(ce=>Math.min(100,ce+2))}else m(0),w(1),c($=>Math.max(0,$-50)),x($=>Math.max(0,$-5)),navigator.vibrate&&navigator.vibrate(20)},[d]),le=C.useCallback(W=>{m(0),w(1),c(H=>Math.max(0,H-50)),x(H=>{const $=H-15;return $<=0?(setTimeout(()=>U(!1),0),0):$})},[]),G=async()=>{if(P){c(0),m(0),w(1),x(100),ju.forEach(W=>{W.hit=!1,W.missed=!1});try{S.current&&(S.current.currentTime=0,await S.current.play(),i(mt.PLAYING))}catch(W){console.error("Audio play failed",W),alert("")}}},U=W=>{i(W?mt.VICTORY:mt.GAME_OVER),S.current&&S.current.pause()};return C.useEffect(()=>{l===mt.LOADING&&P&&i(mt.IDLE)},[P,l]),T.jsxs("div",{className:"relative w-full h-screen bg-black overflow-hidden font-sans",children:[T.jsx("video",{ref:I,className:"absolute opacity-0 pointer-events-none",playsInline:!0,muted:!0,autoPlay:!0,style:{width:"640px",height:"480px"}}),T.jsx(vp,{shadows:!0,dpr:[1,2],children:l!==mt.LOADING&&T.jsx(Eh,{gameStatus:l,audioRef:S,handPositionsRef:k,chart:ju,onNoteHit:Z,onNoteMiss:le,onSongEnd:()=>U(!0)})}),T.jsx(Ch,{videoRef:I,resultsRef:B,isCameraReady:P}),T.jsxs("div",{className:"absolute inset-0 pointer-events-none flex flex-col justify-between p-6 z-10",children:[T.jsxs("div",{className:"flex items-start text-white w-full",children:[T.jsx("div",{className:"w-1/3",children:T.jsxs("div",{className:"max-w-xs",children:[T.jsx("div",{className:"h-4 bg-gray-800 rounded-full overflow-hidden border-2 border-gray-700",children:T.jsx("div",{className:`h-full transition-all duration-300 ease-out ${g>50?"bg-green-500":g>20?"bg-yellow-500":"bg-red-600"}`,style:{width:`${g}%`}})}),T.jsx("p",{className:"text-xs mt-1 opacity-70",children:" (HP)"})]})}),T.jsxs("div",{className:"w-1/3 flex flex-col items-center",children:[T.jsx("h1",{className:"text-5xl font-bold tracking-wider drop-shadow-[0_0_10px_rgba(59,130,246,0.8)]",children:a.toLocaleString()}),T.jsxs("div",{className:"mt-2 flex flex-col items-center",children:[T.jsxs("p",{className:`text-2xl font-bold ${f>10?"text-blue-400 scale-110":"text-gray-300"} transition-all`,children:[f,"  (COMBO)"]}),d>1&&T.jsxs("span",{className:"text-sm px-2 py-1 bg-blue-900 rounded-full mt-1 animate-pulse",children:[d,"x "]})]})]}),T.jsx("div",{className:"w-1/3"})]}),T.jsxs("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-auto",children:[l===mt.LOADING&&T.jsxs("div",{className:"bg-black/80 p-10 rounded-2xl flex flex-col items-center border border-blue-900/50 backdrop-blur-md",children:[T.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500 mb-6"}),T.jsx("h2",{className:"text-2xl text-white font-bold mb-2",children:""}),T.jsx("p",{className:"text-blue-300",children:P?"...":"..."}),J&&T.jsx("p",{className:"text-red-500 mt-4 max-w-xs text-center",children:J})]}),l===mt.IDLE&&T.jsxs("div",{className:"bg-black/80 p-12 rounded-3xl text-center border-2 border-blue-500/30 backdrop-blur-xl max-w-lg",children:[T.jsx("div",{className:"mb-6 flex justify-center",children:T.jsx(Ah,{className:"w-16 h-16 text-blue-400"})}),T.jsxs("h1",{className:"text-7xl font-black text-white mb-6 tracking-tighter italic drop-shadow-[0_0_30px_rgba(59,130,246,0.6)]",children:["TEMPO ",T.jsx("span",{className:"text-blue-500",children:"STRIKE"})]}),T.jsxs("div",{className:"space-y-4 text-gray-300 mb-8",children:[T.jsxs("p",{className:"flex items-center justify-center gap-2",children:[T.jsx(Nh,{className:"w-5 h-5 text-blue-400"}),T.jsx("span",{children:" 1.5 "})]}),T.jsxs("p",{children:[" ",T.jsx("span",{className:"text-blue-500 font-bold",children:""}),"  ",T.jsx("span",{className:"text-red-500 font-bold",children:""})," "]}),T.jsx("p",{className:"text-yellow-400 font-bold",children:""}),T.jsx("p",{children:""})]}),T.jsxs("div",{className:"flex flex-col gap-4 items-center",children:[P?T.jsxs("div",{className:"flex flex-col items-center gap-6",children:[T.jsxs("button",{onClick:G,className:"px-12 py-6 bg-gradient-to-r from-red-600 to-red-400 hover:from-red-500 hover:to-red-300 text-white rounded-full font-bold text-3xl shadow-[0_0_30px_rgba(239,68,68,0.5)] transform hover:scale-105 transition-all flex items-center gap-4",children:[T.jsx(zh,{fill:"currentColor",size:32}),"START GAME"]}),M.length>0&&T.jsxs("div",{className:"flex flex-col items-center gap-2 bg-white/10 p-4 rounded-2xl backdrop-blur-md border border-white/20",children:[T.jsxs("div",{className:"flex items-center gap-2 text-white/70 text-sm mb-1",children:[T.jsx(Oh,{size:16}),T.jsx("span",{children:" ()"})]}),T.jsxs("select",{value:N,onChange:W=>F(W.target.value),className:"bg-black/40 text-white border-none rounded-lg px-4 py-2 outline-none focus:ring-2 focus:ring-red-500 cursor-pointer pointer-events-auto min-w-[200px]",children:[T.jsx("option",{value:"",children:""}),M.map(W=>T.jsxs("option",{value:W.deviceId,children:[W.label||`Camera ${W.deviceId.slice(0,5)}`,W.label.toLowerCase().includes("fov")||W.label.toLowerCase().includes("external")?" ()":""]},W.deviceId))]})]})]}):T.jsxs("div",{className:"flex items-center justify-center text-red-400 gap-2 bg-red-900/20 p-4 rounded-lg",children:[T.jsx(Fh,{})," "]}),p&&T.jsxs("button",{onClick:Y,className:"text-blue-300 hover:text-white hover:bg-white/10 text-sm py-2 px-6 rounded-full transition-colors flex items-center gap-2",children:[T.jsx(Th,{size:16})," "]})]}),T.jsx("div",{className:"text-white/30 text-sm text-center mt-8",children:" v1.0.0"})]}),(l===mt.GAME_OVER||l===mt.VICTORY)&&T.jsxs("div",{className:"bg-black/90 p-12 rounded-3xl text-center border-2 border-white/10 backdrop-blur-xl",children:[T.jsx("h2",{className:`text-6xl font-bold mb-4 ${l===mt.VICTORY?"text-green-400":"text-red-500"}`,children:l===mt.VICTORY?"":""}),T.jsxs("p",{className:"text-white text-3xl mb-8",children:[": ",a.toLocaleString()]}),T.jsxs("button",{onClick:()=>i(mt.IDLE),className:"bg-white/10 hover:bg-white/20 text-white text-xl py-3 px-8 rounded-full flex items-center justify-center mx-auto gap-2 transition-colors",children:[T.jsx(Lh,{})," "]})]})]})]})]})},Dc=document.getElementById("root");if(!Dc)throw new Error("Could not find root element to mount to");const Wu=document.getElementById("loading-text");Wu&&(Wu.style.display="none");gd.createRoot(Dc).render(T.jsx(bu.StrictMode,{children:T.jsx(jh,{})}));
